!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";function r(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function i(t,e,n){return Math.atan2(e,t-n)}function o(t,e,n,r,i){t[0]+=e*n,t[1]+=e*r,t[2]+=e*i}e.exports=function(t,e){for(var n=e.length,a=t.length,s=new Array(n),u=0;u<n;++u)s[u]=[0,0,0];for(u=0;u<a;++u){var l=t[u],c=e[l[0]],f=e[l[1]],h=e[l[2]],p=c[0]-f[0],d=c[1]-f[1],m=c[2]-f[2],y=r(p,d,m),_=f[0]-h[0],v=f[1]-h[1],g=f[2]-h[2],b=r(_,v,g),w=r(h[0]-c[0],h[1]-c[1],h[2]-c[2]);if(!(Math.min(y,b,w)<1e-6)){var x=.5*(y+b+w),S=Math.sqrt((x-y)*(x-b)*(x-w)/x),T=d*g-m*v,E=m*_-p*g,A=p*v-d*_,k=r(T,E,A);T/=k,E/=k,A/=k,o(s[l[0]],i(x,S,b),T,E,A),o(s[l[1]],i(x,S,w),T,E,A),o(s[l[2]],i(x,S,y),T,E,A)}}for(u=0;u<n;++u){var O=s[u],M=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)+Math.pow(O[2],2));M<1e-8?(O[0]=1,O[1]=0,O[2]=0):(O[0]/=M,O[1]/=M,O[2]/=M)}return s}},{}],2:[function(t,e,n){"use strict";e.exports=function(t,e){if(!t||null==t.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var n=Array(2*e),r=0;r<e;r++){for(var i=-1/0,o=1/0,a=r,s=t.length;a<s;a+=e)t[a]>i&&(i=t[a]),t[a]<o&&(o=t[a]);n[r]=o,n[e+r]=i}return n}},{}],3:[function(t,e,n){"use strict";var r=t("array-bounds");e.exports=function(t,e,n){if(!t||null==t.length)throw Error("Argument should be an array");null==e&&(e=1),null==n&&(n=r(t,e));for(var i=0;i<e;i++){var o=n[e+i],a=n[i],s=i,u=t.length;if(o===1/0&&a===-1/0)for(s=i;s<u;s+=e)t[s]=t[s]===o?1:t[s]===a?0:.5;else if(o===1/0)for(s=i;s<u;s+=e)t[s]=t[s]===o?1:0;else if(a===-1/0)for(s=i;s<u;s+=e)t[s]=t[s]===a?0:1;else{var l=o-a;for(s=i;s<u;s+=e)t[s]=0===l?.5:(t[s]-a)/l}}return t}},{"array-bounds":2}],4:[function(t,e,n){e.exports={default:t("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":56}],5:[function(t,e,n){e.exports={default:t("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":57}],6:[function(t,e,n){e.exports={default:t("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":58}],7:[function(t,e,n){e.exports={default:t("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":59}],8:[function(t,e,n){e.exports={default:t("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":60}],9:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},{}],10:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("../core-js/object/define-property"));n.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},{"../core-js/object/define-property":5}],11:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("../core-js/object/define-property"));n.default=function(t,e){for(var n in e){var i=e[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,n,i)}return t}},{"../core-js/object/define-property":5}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("../core-js/object/set-prototype-of")),o=r(t("../core-js/object/create")),a=r(t("../helpers/typeof"));n.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,a.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},{"../core-js/object/create":4,"../core-js/object/set-prototype-of":6,"../helpers/typeof":14}],13:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("../helpers/typeof"));n.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},{"../helpers/typeof":14}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("../core-js/symbol/iterator")),o=r(t("../core-js/symbol")),a="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===a(i.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":a(t)}},{"../core-js/symbol":7,"../core-js/symbol/iterator":8}],15:[function(t,e,n){var r=/\n[\s]+$/,i=/^\n[\s]+/,o=/[\s]+$/,a=/^[\s]+/,s=/[\n\s]+/g,u=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],l=["code","pre"];e.exports=function t(e,n){if(Array.isArray(n))for(var c,f,h=e.nodeName.toLowerCase(),p=!1,d=0,m=n.length;d<m;d++){var y=n[d];if(Array.isArray(y))t(e,y);else{("number"==typeof y||"boolean"==typeof y||"function"==typeof y||y instanceof Date||y instanceof RegExp)&&(y=y.toString());var _=e.childNodes[e.childNodes.length-1];if("string"==typeof y)p=!0,_&&"#text"===_.nodeName?_.nodeValue+=y:(y=document.createTextNode(y),e.appendChild(y),_=y),d===m-1&&(p=!1,-1===u.indexOf(h)&&-1===l.indexOf(h)?""===(c=_.nodeValue.replace(i,"").replace(o,"").replace(r,"").replace(s," "))?e.removeChild(_):_.nodeValue=c:-1===l.indexOf(h)&&(f=0===d?"":" ",c=_.nodeValue.replace(i,f).replace(a," ").replace(o,"").replace(r,"").replace(s," "),_.nodeValue=c));else if(y&&y.nodeType){p&&(p=!1,-1===u.indexOf(h)&&-1===l.indexOf(h)?""===(c=_.nodeValue.replace(i,"").replace(r,"").replace(s," "))?e.removeChild(_):_.nodeValue=c:-1===l.indexOf(h)&&(c=_.nodeValue.replace(a," ").replace(i,"").replace(r,"").replace(s," "),_.nodeValue=c));var v=y.nodeName;v&&(h=v.toLowerCase()),e.appendChild(y)}}}}},{}],16:[function(t,e,n){function r(t,e,n){var r;-1!==c.indexOf(t)&&(e.namespace=a);var i=!1;if(e.namespace&&(i=e.namespace,delete e.namespace),i)r=document.createElementNS(i,t);else{if(t===l)return document.createComment(e.comment);r=document.createElement(t)}for(var f in e)if(e.hasOwnProperty(f)){var h=f.toLowerCase(),p=e[f];if("classname"===h&&(h="class",f="class"),"htmlFor"===f&&(f="for"),-1!==u.indexOf(h))if("true"===p)p=h;else if("false"===p)continue;"on"===h.slice(0,2)?r[f]=p:i?"xlink:href"===f?r.setAttributeNS(s,f,p):/^xmlns($|:)/i.test(f)||r.setAttributeNS(null,f,p):r.setAttribute(f,p)}return o(r,n),r}var i=t("hyperx"),o=t("./appendChild"),a="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink",u=["autofocus","checked","defaultchecked","disabled","formnovalidate","indeterminate","readonly","required","selected","willvalidate"],l="!--",c=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"];e.exports=i(r,{comments:!0}),e.exports.default=e.exports,e.exports.createElement=r},{"./appendChild":15,hyperx:185}],17:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(){m&&p&&(m=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!m){var t=o(a);m=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,m=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,f,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var p,d=[],m=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],18:[function(t,e,n){var r=t("camera-unproject"),i=t("gl-vec3/set"),o=t("gl-vec3/subtract"),a=t("gl-vec3/normalize");e.exports=function(t,e,n,s,u){i(t,n[0],n[1],0),i(e,n[0],n[1],1),r(t,t,s,u),r(e,e,s,u),o(e,e,t),a(e,e)}},{"camera-unproject":19,"gl-vec3/normalize":175,"gl-vec3/set":178,"gl-vec3/subtract":180}],19:[function(t,e,n){var r=t("./lib/projectMat4");e.exports=function(t,e,n,i){var o=n[0],a=n[1],s=n[2],u=n[3],l=e[0],c=e[1],f=e[2];return l-=o,c=u-c-1,c-=a,t[0]=2*l/s-1,t[1]=2*c/u-1,t[2]=2*f-1,r(t,t,i)}},{"./lib/projectMat4":20}],20:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=n[4],f=n[5],h=n[6],p=n[7],d=n[8],m=n[9],y=n[10],_=n[11],v=n[12],g=n[13],b=n[14],w=1/(r*l+i*p+o*_+n[15]);return t[0]=(r*a+i*c+o*d+v)*w,t[1]=(r*s+i*f+o*m+g)*w,t[2]=(r*u+i*h+o*y+b)*w,t}},{}],21:[function(t,e,n){e.exports=t("bel")},{bel:16}],22:[function(t,e,n){e.exports=function(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}},{}],23:[function(t,e,n){function r(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}var i=t("color-name"),o={};for(var a in i)i.hasOwnProperty(a)&&(o[i[a]]=a);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var u in s)if(s.hasOwnProperty(u)){if(!("channels"in s[u]))throw new Error("missing channels property: "+u);if(!("labels"in s[u]))throw new Error("missing channel labels property: "+u);if(s[u].labels.length!==s[u].channels)throw new Error("channel and label counts mismatch: "+u);var l=s[u].channels,c=s[u].labels;delete s[u].channels,delete s[u].labels,Object.defineProperty(s[u],"channels",{value:l}),Object.defineProperty(s[u],"labels",{value:c})}s.rgb.hsl=function(t){var e,n,r,i=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s;return u===s?e=0:i===u?e=(o-a)/l:o===u?e=2+(a-i)/l:a===u&&(e=4+(i-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=(s+u)/2,n=u===s?0:r<=.5?l/(u+s):l/(2-u-s),[e,100*n,100*r]},s.rgb.hsv=function(t){var e,n,r,i=t[0],o=t[1],a=t[2],s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s;return n=0===u?0:l/u*1e3/10,u===s?e=0:i===u?e=(o-a)/l:o===u?e=2+(a-i)/l:a===u&&(e=4+(i-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=u/255*1e3/10,[e,n,r]},s.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2],i=s.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,100*o,100*r]},s.rgb.cmyk=function(t){var e,n,r,i,o=t[0]/255,a=t[1]/255,s=t[2]/255;return i=Math.min(1-o,1-a,1-s),e=(1-o-i)/(1-i)||0,n=(1-a-i)/(1-i)||0,r=(1-s-i)/(1-i)||0,[100*e,100*n,100*r,100*i]},s.rgb.keyword=function(t){var e=o[t];if(e)return e;var n,a=1/0;for(var s in i)if(i.hasOwnProperty(s)){var u=r(t,i[s]);u<a&&(a=u,n=s)}return n},s.keyword.rgb=function(t){return i[t]},s.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},s.rgb.lab=function(t){var e,n,r,i=s.rgb.xyz(t),o=i[0],a=i[1],u=i[2];return o/=95.047,a/=100,u/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,e=116*a-16,n=500*(o-a),r=200*(a-u),[e,n,r]},s.hsl.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return o=255*u,[o,o,o];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[l]=255*o;return i},s.hsl.hsv=function(t){var e,n,r=t[0],i=t[1]/100,o=t[2]/100,a=i,s=Math.max(o,.01);return o*=2,i*=o<=1?o:2-o,a*=s<=1?s:2-s,n=(o+i)/2,e=0===o?2*a/(s+a):2*i/(o+i),[r,100*e,100*n]},s.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}},s.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return r=(2-o)*a,e=(2-o)*s,n=o*s,n/=e<=1?e:2-e,n=n||0,r/=2,[i,100*n,100*r]},s.hwb.rgb=function(t){var e,n,r,i,o=t[0]/360,a=t[1]/100,s=t[2]/100,u=a+s;u>1&&(a/=u,s/=u),n=1-s,r=6*o-(e=Math.floor(6*o)),0!=(1&e)&&(r=1-r),i=a+r*(n-a);var l,c,f;switch(e){default:case 6:case 0:l=n,c=i,f=a;break;case 1:l=i,c=n,f=a;break;case 2:l=a,c=n,f=i;break;case 3:l=a,c=i,f=n;break;case 4:l=i,c=a,f=n;break;case 5:l=n,c=a,f=i}return[255*l,255*c,255*f]},s.cmyk.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100,s=t[3]/100;return e=1-Math.min(1,i*(1-s)+s),n=1-Math.min(1,o*(1-s)+s),r=1-Math.min(1,a*(1-s)+s),[255*e,255*n,255*r]},s.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return e=3.2406*i+-1.5372*o+-.4986*a,n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,e=Math.min(Math.max(0,e),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*e,255*n,255*r]},s.xyz.lab=function(t){var e,n,r,i=t[0],o=t[1],a=t[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,e=116*o-16,n=500*(i-o),r=200*(o-a),[e,n,r]},s.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),a=Math.pow(e,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,e*=95.047,n*=100,r*=108.883,[e,n,r]},s.lab.lch=function(t){var e,n,r,i=t[0],o=t[1],a=t[2];return e=Math.atan2(a,o),(n=360*e/2/Math.PI)<0&&(n+=360),r=Math.sqrt(o*o+a*a),[i,r,n]},s.lch.lab=function(t){var e,n,r,i=t[0],o=t[1];return r=t[2]/360*2*Math.PI,e=o*Math.cos(r),n=o*Math.sin(r),[i,e,n]},s.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:s.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];if(e===n&&n===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;return 16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},s.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}t-=16;var n;return[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},s.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map(function(t){return t+t}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.max(Math.max(r,i),o),s=Math.min(Math.min(r,i),o),u=a-s;return e=u<1?s/(1-u):0,n=u<=0?0:a===r?(i-o)/u%6:a===i?2+(o-r)/u:4+(r-i)/u+4,n/=6,n%=1,[360*n,100*u,100*e]},s.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},s.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},s.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i=[0,0,0],o=e%1*6,a=o%1,s=1-a,u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return u=(1-n)*r,[255*(n*i[0]+u),255*(n*i[1]+u),255*(n*i[2]+u)]},s.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},s.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},s.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},s.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=s.gray.hsv=function(t){return[0,0,t[0]]},s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},{"color-name":26}],24:[function(t,e,n){var r=t("./conversions"),i=t("./route"),o={};Object.keys(r).forEach(function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach(function(n){var r=e[n];o[t][n]=function(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)})}),e.exports=o},{"./conversions":23,"./route":25}],25:[function(t,e,n){function r(t){var e=function(){for(var t={},e=Object.keys(a),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(a[r]),o=i.length,s=0;s<o;s++){var u=i[s],l=e[u];-1===l.distance&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(u))}return e}function i(t,e){return function(n){return e(t(n))}}function o(t,e){for(var n=[e[t].parent,t],r=a[e[t].parent][t],o=e[t].parent;e[o].parent;)n.unshift(e[o].parent),r=i(a[e[o].parent][o],r),o=e[o].parent;return r.conversion=n,r}var a=t("./conversions");e.exports=function(t){for(var e=r(t),n={},i=Object.keys(e),a=i.length,s=0;s<a;s++){var u=i[s];null!==e[u].parent&&(n[u]=o(u,e))}return n}},{"./conversions":23}],26:[function(t,e,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],27:[function(t,e,n){"use strict";var r=t("color-rgba"),i=t("clamp"),o=t("dtype");e.exports=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var n=o(e),a=new n(4);if(!(t instanceof n)){var s="uint8"!==e&&"uint8_clamped"!==e;return t instanceof Uint8Array||t instanceof Uint8ClampedArray?(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=null!=t[3]?t[3]:255,s&&(a[0]/=255,a[1]/=255,a[2]/=255,a[3]/=255),a):(t.length&&"string"!=typeof t||((t=r(t))[0]/=255,t[1]/=255,t[2]/=255),s?(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=null!=t[3]?t[3]:1):(a[0]=i(Math.round(255*t[0]),0,255),a[1]=i(Math.round(255*t[1]),0,255),a[2]=i(Math.round(255*t[2]),0,255),a[3]=null==t[3]?255:i(Math.floor(255*t[3]),0,255)),a)}a.set(t)}},{clamp:22,"color-rgba":30,dtype:164}],28:[function(t,e,n){(function(n){"use strict";var r=t("color-name"),i=t("is-plain-obj"),o=t("defined");e.exports=function(t){var e,s,u=[],l=1;if("string"==typeof t)if(r[t])u=r[t].slice(),s="rgb";else if("transparent"===t)l=0,s="rgb",u=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var c=t.slice(1);l=1,(h=c.length)<=4?(u=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===h&&(l=parseInt(c[3]+c[3],16)/255)):(u=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===h&&(l=parseInt(c[6]+c[7],16)/255)),u[0]||(u[0]=0),u[1]||(u[1]=0),u[2]||(u[2]=0),s="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var f=e[1];s=c=f.replace(/a$/,"");var h="cmyk"===c?4:"gray"===c?1:3;u=e[2].trim().split(/\s*,\s*/).map(function(t,e){if(/%$/.test(t))return e===h?parseFloat(t)/100:"rgb"===c?255*parseFloat(t)/100:parseFloat(t);if("h"===c[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==a[t])return a[t]}return parseFloat(t)}),f===c&&u.push(1),l=void 0===u[h]?1:u[h],u=u.slice(0,h)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(u=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),s=t.match(/([a-z])/gi).join("").toLowerCase());else if("number"==typeof t)s="rgb",u=[t>>>16,(65280&t)>>>8,255&t];else if(i(t)){var p=o(t.r,t.red,t.R,null);null!==p?(s="rgb",u=[p,o(t.g,t.green,t.G),o(t.b,t.blue,t.B)]):(s="hsl",u=[o(t.h,t.hue,t.H),o(t.s,t.saturation,t.S),o(t.l,t.lightness,t.L,t.b,t.brightness)]),l=o(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(l/=100)}else(Array.isArray(t)||n.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(u=[t[0],t[1],t[2]],s="rgb",l=4===t.length?t[3]:1);return{space:s,values:u,alpha:l}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":26,defined:29,"is-plain-obj":190}],29:[function(t,e,n){e.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},{}],30:[function(t,e,n){"use strict";var r=t("color-parse"),i=t("color-space/hsl"),o=t("clamp");e.exports=function(t){var e;if("string"!=typeof t)throw Error("Argument should be a string");var n=r(t);return n.space?(e=Array(3),e[0]=o(n.values[0],0,255),e[1]=o(n.values[1],0,255),e[2]=o(n.values[2],0,255),"h"===n.space[0]&&(e=i.rgb(e)),e.push(o(n.alpha,0,1)),e):[]}},{clamp:22,"color-parse":28,"color-space/hsl":31}],31:[function(t,e,n){"use strict";var r=t("./rgb");e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return o=255*u,[o,o,o];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0?r++:r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[l]=255*o;return i}},r.hsl=function(t){var e,n,r,i=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s;return u===s?e=0:i===u?e=(o-a)/l:o===u?e=2+(a-i)/l:a===u&&(e=4+(i-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=(s+u)/2,n=u===s?0:r<=.5?l/(u+s):l/(2-u-s),[e,100*n,100*r]}},{"./rgb":32}],32:[function(t,e,n){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],33:[function(t,e,n){function r(t,e,n){return Math.min(Math.max(e,t),n)}function i(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var o=t("color-name"),a=t("simple-swizzle"),s={};for(var u in o)o.hasOwnProperty(u)&&(s[o[u]]=u);var l=e.exports={to:{}};l.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=l.get.hsl(t),n="hsl";break;case"hwb":e=l.get.hwb(t),n="hwb";break;default:e=l.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},l.get.rgb=function(t){if(!t)return null;var e,n,i,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var s=2*n;a[n]=parseInt(e.slice(s,s+2),16)}i&&(a[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)a[n]=parseInt(e[n]+e[n],16);i&&(a[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(e[n+1],0);e[4]&&(a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(a=o[e[1]])?(a[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(a[3]=parseFloat(e[4]))}for(n=0;n<3;n++)a[n]=r(a[n],0,255);return a[3]=r(a[3],0,1),a},l.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,r(parseFloat(e[2]),0,100),r(parseFloat(e[3]),0,100),r(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,r(parseFloat(e[2]),0,100),r(parseFloat(e[3]),0,100),r(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var t=a(arguments);return"#"+i(t[0])+i(t[1])+i(t[2])+(t[3]<1?i(Math.round(255*t[3])):"")},l.to.rgb=function(){var t=a(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},l.to.rgb.percent=function(){var t=a(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},l.to.hsl=function(){var t=a(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},l.to.hwb=function(){var t=a(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},l.to.keyword=function(t){return s[t.slice(0,3)]}},{"color-name":26,"simple-swizzle":215}],34:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(e&&e in f&&(e=null),e&&!(e in l))throw new Error("Unknown model: "+e);var n,i;if(t)if(t instanceof r)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var o=u.get(t);if(null===o)throw new Error("Unable to parse color from string: "+t);this.model=o.model,i=l[this.model].channels,this.color=o.value.slice(0,i),this.valpha="number"==typeof o.value[i]?o.value[i]:1}else if(t.length){this.model=e||"rgb",i=l[this.model].channels;var a=c.call(t,0,i);this.color=s(a,i),this.valpha="number"==typeof t[i]?t[i]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var d=Object.keys(t);"alpha"in t&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var m=d.sort().join("");if(!(m in h))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=h[m];var y=l[this.model].labels,_=[];for(n=0;n<y.length;n++)_.push(t[y[n]]);this.color=s(_)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(p[this.model])for(i=l[this.model].channels,n=0;n<i;n++){var v=p[this.model][n];v&&(this.color[n]=v(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function i(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}function o(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach(function(t){(p[t]||(p[t]=[]))[e]=n}),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),i=this[t](),i.color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function a(t){return function(e){return Math.max(0,Math.min(t,e))}}function s(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}var u=t("color-string"),l=t("color-convert"),c=[].slice,f=["keyword","gray","hex"],h={};Object.keys(l).forEach(function(t){h[c.call(l[t].labels).sort().join("")]=t});var p={};r.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in u.to?this:this.rgb(),n=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return u.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return u.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=l[this.model].channels,n=l[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new r(this.color.map(i(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new r(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:o("rgb",0,a(255)),green:o("rgb",1,a(255)),blue:o("rgb",2,a(255)),hue:o(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:o("hsl",1,a(100)),lightness:o("hsl",2,a(100)),saturationv:o("hsv",1,a(100)),value:o("hsv",2,a(100)),chroma:o("hcg",1,a(100)),gray:o("hcg",2,a(100)),white:o("hwb",1,a(100)),wblack:o("hwb",2,a(100)),cyan:o("cmyk",0,a(100)),magenta:o("cmyk",1,a(100)),yellow:o("cmyk",2,a(100)),black:o("cmyk",3,a(100)),x:o("xyz",0,a(100)),y:o("xyz",1,a(100)),z:o("xyz",2,a(100)),l:o("lab",0,a(100)),a:o("lab",1),b:o("lab",2),keyword:function(t){return arguments.length?new r(t):l[this.model].keyword(this.color)},hex:function(t){return arguments.length?new r(t):u.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return r.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix:function(t,e){var n=t.rgb(),i=this.rgb(),o=void 0===e?.5:e,a=2*o-1,s=n.alpha()-i.alpha(),u=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,l=1-u;return r.rgb(u*n.red()+l*i.red(),u*n.green()+l*i.green(),u*n.blue()+l*i.blue(),n.alpha()*o+i.alpha()*(1-o))}},Object.keys(l).forEach(function(t){if(-1===f.indexOf(t)){var e=l[t].channels;r.prototype[t]=function(){if(this.model===t)return new r(this);if(arguments.length)return new r(arguments,t);var n="number"==typeof arguments[e]?e:this.valpha;return new r(function(t){return Array.isArray(t)?t:[t]}(l[this.model][t].raw(this.color)).concat(n),t)},r[t]=function(n){return"number"==typeof n&&(n=s(c.call(arguments),e)),new r(n,t)}}}),e.exports=r},{"color-convert":24,"color-string":33}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=t.prototype;for(var o in e)for(var a=e[o],s=0,u=a.length;s<u;s++){var l=a[s];r(n,o,l(n,o,i(n,o)))}return t};var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor},{}],36:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e,n){var r=n.value,i=n.configurable,o=n.enumerable;if("function"!=typeof r)throw new SyntaxError("@autobind can only be used on functions, not: "+r);var c=t.constructor;return{configurable:i,enumerable:o,get:function(){if(this===t)return r;if(this.constructor!==c&&u(this).constructor===c)return r;if(this.constructor!==c&&e in this.constructor.prototype)return function(t,e){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+e.name+"() requires WeakMap support due to its use of super."+e.name+"()\n      See https://github.com/jayphelps/core-decorators.js/issues/20");l||(l=new WeakMap),!1===l.has(t)&&l.set(t,new WeakMap);var n=l.get(t);return!1===n.has(e)&&n.set(e,(0,a.bind)(e,t)),n.get(e)}(this,r);var n=(0,a.bind)(r,this);return s(this,e,{configurable:!0,writable:!0,enumerable:!1,value:n}),n},set:(0,a.createDefaultSetter)(e)}}function o(t){return 1===t.length?function(t){for(var e=(0,a.getOwnPropertyDescriptors)(t.prototype),n=(0,a.getOwnKeys)(e),r=0,o=n.length;r<o;r++){var u=n[r],l=e[u];"function"==typeof l.value&&"constructor"!==u&&s(t.prototype,u,i(t.prototype,u,l))}}.apply(void 0,r(t)):i.apply(void 0,r(t))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(){return o(arguments)}:o(e)};var a=t("./private/utils"),s=Object.defineProperty,u=Object.getPrototypeOf,l=void 0},{"./private/utils":49}],37:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./override");Object.defineProperty(n,"override",{enumerable:!0,get:function(){return r(i).default}});var o=t("./deprecate");Object.defineProperty(n,"deprecate",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(n,"deprecated",{enumerable:!0,get:function(){return r(o).default}});var a=t("./suppress-warnings");Object.defineProperty(n,"suppressWarnings",{enumerable:!0,get:function(){return r(a).default}});var s=t("./memoize");Object.defineProperty(n,"memoize",{enumerable:!0,get:function(){return r(s).default}});var u=t("./autobind");Object.defineProperty(n,"autobind",{enumerable:!0,get:function(){return r(u).default}});var l=t("./readonly");Object.defineProperty(n,"readonly",{enumerable:!0,get:function(){return r(l).default}});var c=t("./enumerable");Object.defineProperty(n,"enumerable",{enumerable:!0,get:function(){return r(c).default}});var f=t("./nonenumerable");Object.defineProperty(n,"nonenumerable",{enumerable:!0,get:function(){return r(f).default}});var h=t("./nonconfigurable");Object.defineProperty(n,"nonconfigurable",{enumerable:!0,get:function(){return r(h).default}});var p=t("./debounce");Object.defineProperty(n,"debounce",{enumerable:!0,get:function(){return r(p).default}});var d=t("./throttle");Object.defineProperty(n,"throttle",{enumerable:!0,get:function(){return r(d).default}});var m=t("./decorate");Object.defineProperty(n,"decorate",{enumerable:!0,get:function(){return r(m).default}});var y=t("./mixin");Object.defineProperty(n,"mixin",{enumerable:!0,get:function(){return r(y).default}}),Object.defineProperty(n,"mixins",{enumerable:!0,get:function(){return r(y).default}});var _=t("./lazy-initialize");Object.defineProperty(n,"lazyInitialize",{enumerable:!0,get:function(){return r(_).default}});var v=t("./time");Object.defineProperty(n,"time",{enumerable:!0,get:function(){return r(v).default}});var g=t("./extendDescriptor");Object.defineProperty(n,"extendDescriptor",{enumerable:!0,get:function(){return r(g).default}});var b=t("./profile");Object.defineProperty(n,"profile",{enumerable:!0,get:function(){return r(b).default}});var w=t("./applyDecorators");Object.defineProperty(n,"applyDecorators",{enumerable:!0,get:function(){return r(w).default}})},{"./applyDecorators":35,"./autobind":36,"./debounce":38,"./decorate":39,"./deprecate":40,"./enumerable":41,"./extendDescriptor":42,"./lazy-initialize":43,"./memoize":44,"./mixin":45,"./nonconfigurable":46,"./nonenumerable":47,"./override":48,"./profile":50,"./readonly":51,"./suppress-warnings":52,"./throttle":53,"./time":54}],38:[function(t,e,n){"use strict";function r(t,e,n,r){var u=o(r,2),l=u[0],c=void 0===l?s:l,f=u[1],h=void 0!==f&&f,p=n.value;if("function"!=typeof p)throw new SyntaxError("Only functions can be debounced");return i({},n,{value:function(){var t=this,n=(0,a.metaFor)(this).debounceTimeoutIds,r=n[e],i=h&&!r,o=arguments;clearTimeout(r),n[e]=setTimeout(function(){delete n[e],h||p.apply(t,o)},c),i&&p.apply(this,o)}})}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.default=function(){(0,a.internalDeprecation)("@debounce is deprecated and will be removed shortly. Use @debounce from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.decorate)(r,e)};var a=t("./private/utils"),s=300},{"./private/utils":49}],39:[function(t,e,n){"use strict";function r(t,e,n,r){var a=function(t){return Array.isArray(t)?t:Array.from(t)}(r),s=a[0],u=a.slice(1),l=n.configurable,c=n.enumerable,f=n.writable,h=n.get,p=n.set,d=n.value,m=!!h;return{configurable:l,enumerable:c,get:function(){var t=m?h.call(this):d,n=s.call.apply(s,[this,t].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(u)));if(m)return n;var r={configurable:l,enumerable:c};return r.value=n,r.writable=f,o(this,e,r),n},set:m?p:(0,i.createDefaultSetter)()}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.decorate)(r,e)};var i=t("./private/utils"),o=Object.defineProperty},{"./private/utils":49}],40:[function(t,e,n){"use strict";function r(t,e,n,r){var u=o(r,2),l=u[0],c=void 0===l?s:l,f=u[1],h=void 0===f?{}:f;if("function"!=typeof n.value)throw new SyntaxError("Only functions can be marked as deprecated");var p=t.constructor.name+"#"+e;return h.url&&(c+="\n\n    See "+h.url+" for more details.\n\n"),i({},n,{value:function(){return(0,a.warn)("DEPRECATION "+p+": "+c),n.value.apply(this,arguments)}})}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.decorate)(r,e)};var a=t("./private/utils"),s="This function will be removed in future versions."},{"./private/utils":49}],41:[function(t,e,n){"use strict";function r(t,e,n){return n.enumerable=!0,n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.decorate)(r,e)};var i=t("./private/utils")},{"./private/utils":49}],42:[function(t,e,n){"use strict";function r(t,e,n){var r=a(t),o=s(r,e);return i({},o,{value:n.value,initializer:n.initializer,get:n.get||o.get,set:n.set||o.set})}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,o.decorate)(r,e)};var o=t("./private/utils"),a=Object.getPrototypeOf,s=Object.getOwnPropertyDescriptor},{"./private/utils":49}],43:[function(t,e,n){"use strict";function r(t,e,n){var r=n.configurable,a=n.enumerable,s=n.initializer,u=n.value;return{configurable:r,enumerable:a,get:function(){if(this!==t){var n=s?s.call(this):u;return o(this,e,{configurable:r,enumerable:a,writable:!0,value:n}),n}},set:(0,i.createDefaultSetter)(e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.decorate)(r,e)};var i=t("./private/utils"),o=Object.defineProperty},{"./private/utils":49}],44:[function(t,e,n){"use strict";function r(t,e){return e===Object(e)?e:t[e]||(t[e]={})}function i(t,e,n){var i=function(t){var e=void 0,n=void 0;return t.value?(e=t.value,n="value"):t.get?(e=t.get,n="get"):t.set&&(e=t.set,n="set"),{fn:e,wrapKey:n}}(n),a=i.fn,s=i.wrapKey,u=new WeakMap,l=Object.create(null),c=Object.create(null),f=0;return o({},n,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},s,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i="0",o=0,s=e.length;o<s;o++){var h=e[o],p=r(c,h),d=u.get(p);void 0===d&&(d=++f,u.set(p,d)),i+=d}return l[i]||function(t,e,n,r,i){var o=e.apply(t,n);return r[i]=o,o}(this,a,arguments,l,i)}))}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=function(){(0,a.internalDeprecation)("@memoize is deprecated and will be removed shortly. Use @memoize from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.decorate)(i,e)};var a=t("./private/utils")},{"./private/utils":49}],45:[function(t,e,n){"use strict";function r(t,e){if(function(t){return"[object Symbol]"===Object.prototype.toString.call(t)&&"object"===(void 0===t?"undefined":o(t))}(t)){do{if(e===Object.prototype)return void 0!==e[t];if(e.hasOwnProperty(t))return!0}while(e=u(e));return!1}return t in e}function i(t,e){if(!e.length)throw new SyntaxError("@mixin() class "+t.name+" requires at least one mixin as an argument");for(var n=0,i=e.length;n<i;n++)for(var o=(0,a.getOwnPropertyDescriptors)(e[n]),u=(0,a.getOwnKeys)(o),l=0,c=u.length;l<c;l++){var f=u[l];r(f,t.prototype)||s(t.prototype,f,o[f])}}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.internalDeprecation)("@mixin is deprecated and will be removed shortly. Use @mixin from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators"),"function"==typeof e[0]?i(e[0],[]):function(t){return i(t,e)}};var a=t("./private/utils"),s=Object.defineProperty,u=Object.getPrototypeOf},{"./private/utils":49}],46:[function(t,e,n){"use strict";function r(t,e,n){return n.configurable=!1,n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.decorate)(r,e)};var i=t("./private/utils")},{"./private/utils":49}],47:[function(t,e,n){"use strict";function r(t,e,n){return n.enumerable=!1,n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.decorate)(r,e)};var i=t("./private/utils")},{"./private/utils":49}],48:[function(t,e,n){"use strict";function r(t){return t.hasOwnProperty("value")?"data":t.hasOwnProperty("get")||t.hasOwnProperty("set")?"accessor":"data"}function i(t,e,n){n.assert(t.length===e.length)}function o(t,e,n){var o=r(t),a=r(e);switch(o!==a&&n.error('descriptor types do not match. {parent} is "'+o+'", {child} is "'+a+'"'),a){case"data":!function(t,e,n){var r=s(t.value),o=s(e.value);"undefined"===r&&"undefined"===o&&n.error("descriptor values are both undefined. (class properties are are not currently supported)'"),r!==o&&("function"===o&&void 0===r||void 0!==r)&&n.error('value types do not match. {parent} is "'+r+'", {child} is "'+o+'"');switch(o){case"function":i(t.value,e.value,n);break;default:n.error('Unexpected error. Please file a bug with: {parent} is "'+r+'", {child} is "'+o+'"')}}(t,e,n);break;case"accessor":!function(t,e,n){var r="function"==typeof t.get,o="function"==typeof e.get,a="function"==typeof t.set,s="function"==typeof e.set;(r||o)&&(!r&&a&&n.error("{parent} is setter but {child} is getter"),!o&&s&&n.error("{parent} is getter but {child} is setter"),i(t.get,e.get,n)),(a||s)&&(!a&&r&&n.error("{parent} is getter but {child} is setter"),!s&&o&&n.error("{parent} is setter but {child} is getter"),i(t.set,e.set,n))}(t,e,n)}}function a(t,e,n){n.key=e;var r=Object.getPrototypeOf(t),i=Object.getOwnPropertyDescriptor(r,e),a=new f(r,t,i,n);if(void 0===i){var s=function(t,e){for(var n=0,r=h.length;n<r;n++){var i=(0,h[n])(e);if(i in t)return i}return null}(r,e),u=s?'\n\n  Did you mean "'+s+'"?':"";a.error("No descriptor matching {child} was found on the prototype chain."+u)}return o(i,n,a),n}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,l.decorate)(a,e)};var l=t("./private/utils"),c=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/,f=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentKlass=e,this.childKlass=n,this.parentDescriptor=r,this.childDescriptor=i}return u(t,[{key:"_getTopic",value:function(t){return void 0===t?null:"value"in t?t.value:"get"in t?t.get:"set"in t?t.set:void 0}},{key:"_extractTopicSignature",value:function(t){switch(void 0===t?"undefined":s(t)){case"function":return this._extractFunctionSignature(t);default:return this.key}}},{key:"_extractFunctionSignature",value:function(t){var e=this;return t.toString().replace(c,function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key)+arguments[2]})}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),u(t,[{key:"assert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!0!==t&&this.error("{child} does not properly override {parent}"+e)}},{key:"error",value:function(t){var e=this;throw t=t.replace("{parent}",function(t){return e.parentNotation}).replace("{child}",function(t){return e.childNotation}),new SyntaxError(t)}}]),t}(),h=[function(t){return t.toLowerCase()},function(t){return t.toUpperCase()},function(t){return t+"s"},function(t){return t.slice(0,-1)},function(t){return t.slice(1,t.length)}]},{"./private/utils":49}],49:[function(t,e,n){"use strict";function r(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){if(!t||!t.hasOwnProperty)return!1;for(var e=["value","initializer","get","set"],n=0,r=e.length;n<r;n++)if(t.hasOwnProperty(e[n]))return!0;return!1}function s(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}Object.defineProperty(n,"__esModule",{value:!0}),n.warn=n.getOwnKeys=void 0;var u,l,c,f,h,p,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.isDescriptor=a,n.decorate=function(t,e){return a(e[e.length-1])?t.apply(void 0,o(e).concat([[]])):function(){return t.apply(void 0,o(Array.prototype.slice.call(arguments)).concat([e]))}},n.metaFor=function(t){return!1===t.hasOwnProperty(w)&&y(t,w,{value:new b}),t[w]},n.getOwnPropertyDescriptors=function(t){var e={};return x(t).forEach(function(n){return e[n]=_(t,n)}),e},n.createDefaultSetter=function(t){return function(e){return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!0,value:e}),e}},n.bind=s,n.internalDeprecation=function(t){!0!==T[t]&&(T[t]=!0,S("DEPRECATION: "+t))};var m=function(t){return t&&t.__esModule?t:{default:t}}(t("../lazy-initialize")),y=Object.defineProperty,_=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,b=(u=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"debounceTimeoutIds",l,this),r(this,"throttleTimeoutIds",c,this),r(this,"throttlePreviousTimestamps",f,this),r(this,"throttleTrailingArgs",h,this),r(this,"profileLastRan",p,this)},l=i(u.prototype,"debounceTimeoutIds",[m.default],{enumerable:!0,initializer:function(){return{}}}),c=i(u.prototype,"throttleTimeoutIds",[m.default],{enumerable:!0,initializer:function(){return{}}}),f=i(u.prototype,"throttlePreviousTimestamps",[m.default],{enumerable:!0,initializer:function(){return{}}}),h=i(u.prototype,"throttleTrailingArgs",[m.default],{enumerable:!0,initializer:function(){return null}}),p=i(u.prototype,"profileLastRan",[m.default],{enumerable:!0,initializer:function(){return null}}),u),w="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__",x=n.getOwnKeys=g?function(t){return v(t).concat(g(t))}:v,S=n.warn="object"===("undefined"==typeof console?"undefined":d(console))&&console&&"function"==typeof console.warn?s(console.warn,console):function(){},T={}},{"../lazy-initialize":43}],50:[function(t,e,n){"use strict";function r(t,e,n,r){var l=a(r,3),c=l[0],f=void 0===c?null:c,h=l[1],p=void 0!==h&&h,d=l[2],m=void 0===d?u:d;if(!i.__enabled)return i.__warned||(m.warn("console.profile is not supported. All @profile decorators are disabled."),i.__warned=!0),n;var y=n.value;if(null===f&&(f=t.constructor.name+"."+e),"function"!=typeof y)throw new SyntaxError("@profile can only be used on functions, not: "+y);return o({},n,{value:function(){var t=Date.now(),e=(0,s.metaFor)(this);(!0===p&&!e.profileLastRan||!1===p||"number"==typeof p&&t-e.profileLastRan>p||"function"==typeof p&&p.apply(this,arguments))&&(m.profile(f),e.profileLastRan=t);try{return y.apply(this,arguments)}finally{m.profileEnd(f)}}})}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,s.decorate)(r,e)}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConsole=void 0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.default=i;var s=t("./private/utils"),u=(console,n.defaultConsole={profile:console.profile?(0,s.bind)(console.profile,console):function(){},profileEnd:console.profileEnd?(0,s.bind)(console.profileEnd,console):function(){},warn:s.warn});i.__enabled=!!console.profile,i.__warned=!1},{"./private/utils":49}],51:[function(t,e,n){"use strict";function r(t,e,n){return n.writable=!1,n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.decorate)(r,e)};var i=t("./private/utils")},{"./private/utils":49}],52:[function(t,e,n){"use strict";function r(){}function i(t,e,n){return o({},n,{value:function(){return function(t,e,n){if("object"===("undefined"==typeof console?"undefined":a(console))){var i=console.warn;console.warn=r;var o=e.apply(t,n);return console.warn=i,o}return e.apply(t,n)}(this,n.value,arguments)}})}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,s.decorate)(i,e)};var s=t("./private/utils")},{"./private/utils":49}],53:[function(t,e,n){"use strict";function r(t,e,n,r){var u=o(r,2),l=u[0],c=void 0===l?s:l,f=u[1],h=void 0===f?{}:f,p=n.value;if("function"!=typeof p)throw new SyntaxError("Only functions can be throttled");return!1!==h.leading&&(h.leading=!0),!1!==h.trailing&&(h.trailing=!0),i({},n,{value:function(){var t=this,n=(0,a.metaFor)(this),r=n.throttleTimeoutIds,i=n.throttlePreviousTimestamps,o=r[e],s=i[e]||0,u=Date.now();h.trailing&&(n.throttleTrailingArgs=arguments),s||!1!==h.leading||(s=u);var l=c-(u-s);l<=0?(clearTimeout(o),delete r[e],i[e]=u,p.apply(this,arguments)):!o&&h.trailing&&(r[e]=setTimeout(function(){i[e]=!1===h.leading?0:Date.now(),delete r[e],p.apply(t,n.throttleTrailingArgs),n.throttleTrailingArgs=null},l))}})}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.default=function(){(0,a.internalDeprecation)("@throttle is deprecated and will be removed shortly. Use @throttle from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.decorate)(r,e)};var a=t("./private/utils"),s=300},{"./private/utils":49}],54:[function(t,e,n){"use strict";function r(t,e,n,r){var a=o(r,2),s=a[0],c=void 0===s?null:s,f=a[1],h=void 0===f?u:f,p=n.value;if(null===c&&(c=t.constructor.name+"."+e),"function"!=typeof p)throw new SyntaxError("@time can only be used on functions, not: "+p);return i({},n,{value:function(){var t=c+"-"+l;l++,h.time(t);try{return p.apply(this,arguments)}finally{h.timeEnd(t)}}})}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConsole=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.decorate)(r,e)};var a=t("./private/utils"),s={},u=n.defaultConsole={time:console.time?void 0:function(t){s[t]=new Date},timeEnd:console.timeEnd?void 0:function(t){new Date,s[t];delete s[t]}},l=0},{"./private/utils":49}],55:[function(t,e,n){t("../../modules/es6.object.assign"),e.exports=t("../../modules/_core").Object.assign},{"../../modules/_core":131,"../../modules/es6.object.assign":162}],56:[function(t,e,n){t("../../modules/es6.object.create");var r=t("../../modules/_core").Object;e.exports=function(t,e){return r.create(t,e)}},{"../../modules/_core":66,"../../modules/es6.object.create":118}],57:[function(t,e,n){t("../../modules/es6.object.define-property");var r=t("../../modules/_core").Object;e.exports=function(t,e,n){return r.defineProperty(t,e,n)}},{"../../modules/_core":66,"../../modules/es6.object.define-property":119}],58:[function(t,e,n){t("../../modules/es6.object.set-prototype-of"),e.exports=t("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":66,"../../modules/es6.object.set-prototype-of":120}],59:[function(t,e,n){t("../../modules/es6.symbol"),t("../../modules/es6.object.to-string"),t("../../modules/es7.symbol.async-iterator"),t("../../modules/es7.symbol.observable"),e.exports=t("../../modules/_core").Symbol},{"../../modules/_core":66,"../../modules/es6.object.to-string":121,"../../modules/es6.symbol":123,"../../modules/es7.symbol.async-iterator":124,"../../modules/es7.symbol.observable":125}],60:[function(t,e,n){t("../../modules/es6.string.iterator"),t("../../modules/web.dom.iterable"),e.exports=t("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":115,"../../modules/es6.string.iterator":122,"../../modules/web.dom.iterable":126}],61:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],62:[function(t,e,n){e.exports=function(){}},{}],63:[function(t,e,n){var r=t("./_is-object");e.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":82}],64:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_to-length"),o=t("./_to-absolute-index");e.exports=function(t){return function(e,n,a){var s,u=r(e),l=i(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},{"./_to-absolute-index":107,"./_to-iobject":109,"./_to-length":110}],65:[function(t,e,n){var r={}.toString;e.exports=function(t){return r.call(t).slice(8,-1)}},{}],66:[function(t,e,n){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},{}],67:[function(t,e,n){var r=t("./_a-function");e.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":61}],68:[function(t,e,n){e.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],69:[function(t,e,n){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":74}],70:[function(t,e,n){var r=t("./_is-object"),i=t("./_global").document,o=r(i)&&r(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{"./_global":75,"./_is-object":82}],71:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],72:[function(t,e,n){var r=t("./_object-keys"),i=t("./_object-gops"),o=t("./_object-pie");e.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},{"./_object-gops":95,"./_object-keys":98,"./_object-pie":99}],73:[function(t,e,n){var r=t("./_global"),i=t("./_core"),o=t("./_ctx"),a=t("./_hide"),s="prototype",u=function(t,e,n){var l,c,f,h=t&u.F,p=t&u.G,d=t&u.S,m=t&u.P,y=t&u.B,_=t&u.W,v=p?i:i[e]||(i[e]={}),g=v[s],b=p?r:d?r[e]:(r[e]||{})[s];p&&(n=e);for(l in n)(c=!h&&b&&void 0!==b[l])&&l in v||(f=c?b[l]:n[l],v[l]=p&&"function"!=typeof b[l]?n[l]:y&&c?o(f,r):_&&b[l]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(f):m&&"function"==typeof f?o(Function.call,f):f,m&&((v.virtual||(v.virtual={}))[l]=f,t&u.R&&g&&!g[l]&&a(g,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},{"./_core":66,"./_ctx":67,"./_global":75,"./_hide":77}],74:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],75:[function(t,e,n){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],76:[function(t,e,n){var r={}.hasOwnProperty;e.exports=function(t,e){return r.call(t,e)}},{}],77:[function(t,e,n){var r=t("./_object-dp"),i=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},{"./_descriptors":69,"./_object-dp":90,"./_property-desc":100}],78:[function(t,e,n){var r=t("./_global").document;e.exports=r&&r.documentElement},{"./_global":75}],79:[function(t,e,n){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":69,"./_dom-create":70,"./_fails":74}],80:[function(t,e,n){var r=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},{"./_cof":65}],81:[function(t,e,n){var r=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==r(t)}},{"./_cof":65}],82:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],83:[function(t,e,n){"use strict";var r=t("./_object-create"),i=t("./_property-desc"),o=t("./_set-to-string-tag"),a={};t("./_hide")(a,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},{"./_hide":77,"./_object-create":89,"./_property-desc":100,"./_set-to-string-tag":103,"./_wks":116}],84:[function(t,e,n){"use strict";var r=t("./_library"),i=t("./_export"),o=t("./_redefine"),a=t("./_hide"),s=t("./_has"),u=t("./_iterators"),l=t("./_iter-create"),c=t("./_set-to-string-tag"),f=t("./_object-gpo"),h=t("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(t,e,n,m,y,_,v){l(n,e,m);var g,b,w,x=function(t){if(!p&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T="values"==y,E=!1,A=t.prototype,k=A[h]||A["@@iterator"]||y&&A[y],O=k||x(y),M=y?T?x("entries"):O:void 0,P="Array"==e?A.entries||k:k;if(P&&(w=f(P.call(new t)))!==Object.prototype&&w.next&&(c(w,S,!0),r||s(w,h)||a(w,h,d)),T&&k&&"values"!==k.name&&(E=!0,O=function(){return k.call(this)}),r&&!v||!p&&!E&&A[h]||a(A,h,O),u[e]=O,u[S]=d,y)if(g={values:T?O:x("values"),keys:_?O:x("keys"),entries:M},v)for(b in g)b in A||o(A,b,g[b]);else i(i.P+i.F*(p||E),e,g);return g}},{"./_export":73,"./_has":76,"./_hide":77,"./_iter-create":83,"./_iterators":86,"./_library":87,"./_object-gpo":96,"./_redefine":101,"./_set-to-string-tag":103,"./_wks":116}],85:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],86:[function(t,e,n){e.exports={}},{}],87:[function(t,e,n){e.exports=!0},{}],88:[function(t,e,n){var r=t("./_uid")("meta"),i=t("./_is-object"),o=t("./_has"),a=t("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},l=!t("./_fails")(function(){return u(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&f.NEED&&u(t)&&!o(t,r)&&c(t),t}}},{"./_fails":74,"./_has":76,"./_is-object":82,"./_object-dp":90,"./_uid":113}],89:[function(t,e,n){var r=t("./_an-object"),i=t("./_object-dps"),o=t("./_enum-bug-keys"),a=t("./_shared-key")("IE_PROTO"),s=function(){},u=function(){var e,n=t("./_dom-create")("iframe"),r=o.length;for(n.style.display="none",t("./_html").appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},{"./_an-object":63,"./_dom-create":70,"./_enum-bug-keys":71,"./_html":78,"./_object-dps":91,"./_shared-key":104}],90:[function(t,e,n){var r=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),a=Object.defineProperty;n.f=t("./_descriptors")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{"./_an-object":63,"./_descriptors":69,"./_ie8-dom-define":79,"./_to-primitive":112}],91:[function(t,e,n){var r=t("./_object-dp"),i=t("./_an-object"),o=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},{"./_an-object":63,"./_descriptors":69,"./_object-dp":90,"./_object-keys":98}],92:[function(t,e,n){var r=t("./_object-pie"),i=t("./_property-desc"),o=t("./_to-iobject"),a=t("./_to-primitive"),s=t("./_has"),u=t("./_ie8-dom-define"),l=Object.getOwnPropertyDescriptor;n.f=t("./_descriptors")?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},{"./_descriptors":69,"./_has":76,"./_ie8-dom-define":79,"./_object-pie":99,"./_property-desc":100,"./_to-iobject":109,"./_to-primitive":112}],93:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},{"./_object-gopn":94,"./_to-iobject":109}],94:[function(t,e,n){var r=t("./_object-keys-internal"),i=t("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},{"./_enum-bug-keys":71,"./_object-keys-internal":97}],95:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],96:[function(t,e,n){var r=t("./_has"),i=t("./_to-object"),o=t("./_shared-key")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},{"./_has":76,"./_shared-key":104,"./_to-object":111}],97:[function(t,e,n){var r=t("./_has"),i=t("./_to-iobject"),o=t("./_array-includes")(!1),a=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},{"./_array-includes":64,"./_has":76,"./_shared-key":104,"./_to-iobject":109}],98:[function(t,e,n){var r=t("./_object-keys-internal"),i=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return r(t,i)}},{"./_enum-bug-keys":71,"./_object-keys-internal":97}],99:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],100:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],101:[function(t,e,n){e.exports=t("./_hide")},{"./_hide":77}],102:[function(t,e,n){var r=t("./_is-object"),i=t("./_an-object"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,r){try{(r=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},{"./_an-object":63,"./_ctx":67,"./_is-object":82,"./_object-gopd":92}],103:[function(t,e,n){var r=t("./_object-dp").f,i=t("./_has"),o=t("./_wks")("toStringTag");e.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},{"./_has":76,"./_object-dp":90,"./_wks":116}],104:[function(t,e,n){var r=t("./_shared")("keys"),i=t("./_uid");e.exports=function(t){return r[t]||(r[t]=i(t))}},{"./_shared":105,"./_uid":113}],105:[function(t,e,n){var r=t("./_global"),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(t){return o[t]||(o[t]={})}},{"./_global":75}],106:[function(t,e,n){var r=t("./_to-integer"),i=t("./_defined");e.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},{"./_defined":68,"./_to-integer":108}],107:[function(t,e,n){var r=t("./_to-integer"),i=Math.max,o=Math.min;e.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},{"./_to-integer":108}],108:[function(t,e,n){var r=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},{}],109:[function(t,e,n){var r=t("./_iobject"),i=t("./_defined");e.exports=function(t){return r(i(t))}},{"./_defined":68,"./_iobject":80}],110:[function(t,e,n){var r=t("./_to-integer"),i=Math.min;e.exports=function(t){return t>0?i(r(t),9007199254740991):0}},{"./_to-integer":108}],111:[function(t,e,n){var r=t("./_defined");e.exports=function(t){return Object(r(t))}},{"./_defined":68}],112:[function(t,e,n){var r=t("./_is-object");e.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":82}],113:[function(t,e,n){var r=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},{}],114:[function(t,e,n){var r=t("./_global"),i=t("./_core"),o=t("./_library"),a=t("./_wks-ext"),s=t("./_object-dp").f;e.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},{"./_core":66,"./_global":75,"./_library":87,"./_object-dp":90,"./_wks-ext":115}],115:[function(t,e,n){n.f=t("./_wks")},{"./_wks":116}],116:[function(t,e,n){var r=t("./_shared")("wks"),i=t("./_uid"),o=t("./_global").Symbol,a="function"==typeof o;(e.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},{"./_global":75,"./_shared":105,"./_uid":113}],117:[function(t,e,n){"use strict";var r=t("./_add-to-unscopables"),i=t("./_iter-step"),o=t("./_iterators"),a=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":62,"./_iter-define":84,"./_iter-step":85,"./_iterators":86,"./_to-iobject":109}],118:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{create:t("./_object-create")})},{"./_export":73,"./_object-create":89}],119:[function(t,e,n){var r=t("./_export");r(r.S+r.F*!t("./_descriptors"),"Object",{defineProperty:t("./_object-dp").f})},{"./_descriptors":69,"./_export":73,"./_object-dp":90}],120:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{setPrototypeOf:t("./_set-proto").set})},{"./_export":73,"./_set-proto":102}],121:[function(t,e,n){},{}],122:[function(t,e,n){"use strict";var r=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":84,"./_string-at":106}],123:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_has"),o=t("./_descriptors"),a=t("./_export"),s=t("./_redefine"),u=t("./_meta").KEY,l=t("./_fails"),c=t("./_shared"),f=t("./_set-to-string-tag"),h=t("./_uid"),p=t("./_wks"),d=t("./_wks-ext"),m=t("./_wks-define"),y=t("./_enum-keys"),_=t("./_is-array"),v=t("./_an-object"),g=t("./_to-iobject"),b=t("./_to-primitive"),w=t("./_property-desc"),x=t("./_object-create"),S=t("./_object-gopn-ext"),T=t("./_object-gopd"),E=t("./_object-dp"),A=t("./_object-keys"),k=T.f,O=E.f,M=S.f,P=r.Symbol,C=r.JSON,j=C&&C.stringify,R="prototype",F=p("_hidden"),L=p("toPrimitive"),q={}.propertyIsEnumerable,D=c("symbol-registry"),N=c("symbols"),I=c("op-symbols"),B=Object[R],z="function"==typeof P,U=r.QObject,V=!U||!U[R]||!U[R].findChild,G=o&&l(function(){return 7!=x(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=k(B,e);r&&delete B[e],O(t,e,n),r&&t!==B&&O(B,e,r)}:O,W=function(t){var e=N[t]=x(P[R]);return e._k=t,e},Y=z&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},H=function(t,e,n){return t===B&&H(I,e,n),v(t),e=b(e,!0),v(n),i(N,e)?(n.enumerable?(i(t,F)&&t[F][e]&&(t[F][e]=!1),n=x(n,{enumerable:w(0,!1)})):(i(t,F)||O(t,F,w(1,{})),t[F][e]=!0),G(t,e,n)):O(t,e,n)},K=function(t,e){v(t);for(var n,r=y(e=g(e)),i=0,o=r.length;o>i;)H(t,n=r[i++],e[n]);return t},X=function(t){var e=q.call(this,t=b(t,!0));return!(this===B&&i(N,t)&&!i(I,t))&&(!(e||!i(this,t)||!i(N,t)||i(this,F)&&this[F][t])||e)},Q=function(t,e){if(t=g(t),e=b(e,!0),t!==B||!i(N,e)||i(I,e)){var n=k(t,e);return!n||!i(N,e)||i(t,F)&&t[F][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=M(g(t)),r=[],o=0;n.length>o;)i(N,e=n[o++])||e==F||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===B,r=M(n?I:g(t)),o=[],a=0;r.length>a;)!i(N,e=r[a++])||n&&!i(B,e)||o.push(N[e]);return o};z||(s((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(I,n),i(this,F)&&i(this[F],t)&&(this[F][t]=!1),G(this,t,w(1,n))};return o&&V&&G(B,t,{configurable:!0,set:e}),W(t)})[R],"toString",function(){return this._k}),T.f=Q,E.f=H,t("./_object-gopn").f=S.f=J,t("./_object-pie").f=X,t("./_object-gops").f=Z,o&&!t("./_library")&&s(B,"propertyIsEnumerable",X,!0),d.f=function(t){return W(p(t))}),a(a.G+a.W+a.F*!z,{Symbol:P});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)p($[tt++]);for(var et=A(p.store),nt=0;et.length>nt;)m(et[nt++]);a(a.S+a.F*!z,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=P(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in D)if(D[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!z,"Object",{create:function(t,e){return void 0===e?x(t):K(x(t),e)},defineProperty:H,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),C&&a(a.S+a.F*(!z||l(function(){var t=P();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(e=r[1])&&(n=e),!n&&_(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,j.apply(C,r)}}}),P[R][L]||t("./_hide")(P[R],L,P[R].valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":63,"./_descriptors":69,"./_enum-keys":72,"./_export":73,"./_fails":74,"./_global":75,"./_has":76,"./_hide":77,"./_is-array":81,"./_library":87,"./_meta":88,"./_object-create":89,"./_object-dp":90,"./_object-gopd":92,"./_object-gopn":94,"./_object-gopn-ext":93,"./_object-gops":95,"./_object-keys":98,"./_object-pie":99,"./_property-desc":100,"./_redefine":101,"./_set-to-string-tag":103,"./_shared":105,"./_to-iobject":109,"./_to-primitive":112,"./_uid":113,"./_wks":116,"./_wks-define":114,"./_wks-ext":115}],124:[function(t,e,n){t("./_wks-define")("asyncIterator")},{"./_wks-define":114}],125:[function(t,e,n){t("./_wks-define")("observable")},{"./_wks-define":114}],126:[function(t,e,n){t("./es6.array.iterator");for(var r=t("./_global"),i=t("./_hide"),o=t("./_iterators"),a=t("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],f=c&&c.prototype;f&&!f[a]&&i(f,a,l),o[l]=o.Array}},{"./_global":75,"./_hide":77,"./_iterators":86,"./_wks":116,"./es6.array.iterator":117}],127:[function(t,e,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],128:[function(t,e,n){arguments[4][63][0].apply(n,arguments)},{"./_is-object":144,dup:63}],129:[function(t,e,n){arguments[4][64][0].apply(n,arguments)},{"./_to-absolute-index":155,"./_to-iobject":157,"./_to-length":158,dup:64}],130:[function(t,e,n){arguments[4][65][0].apply(n,arguments)},{dup:65}],131:[function(t,e,n){arguments[4][66][0].apply(n,arguments)},{dup:66}],132:[function(t,e,n){arguments[4][67][0].apply(n,arguments)},{"./_a-function":127,dup:67}],133:[function(t,e,n){arguments[4][68][0].apply(n,arguments)},{dup:68}],134:[function(t,e,n){arguments[4][69][0].apply(n,arguments)},{"./_fails":138,dup:69}],135:[function(t,e,n){arguments[4][70][0].apply(n,arguments)},{"./_global":139,"./_is-object":144,dup:70}],136:[function(t,e,n){arguments[4][71][0].apply(n,arguments)},{dup:71}],137:[function(t,e,n){var r=t("./_global"),i=t("./_core"),o=t("./_hide"),a=t("./_redefine"),s=t("./_ctx"),u=function(t,e,n){var l,c,f,h,p=t&u.F,d=t&u.G,m=t&u.S,y=t&u.P,_=t&u.B,v=d?r:m?r[e]||(r[e]={}):(r[e]||{}).prototype,g=d?i:i[e]||(i[e]={}),b=g.prototype||(g.prototype={});d&&(n=e);for(l in n)f=((c=!p&&v&&void 0!==v[l])?v:n)[l],h=_&&c?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,v&&a(v,l,f,t&u.U),g[l]!=f&&o(g,l,h),y&&b[l]!=f&&(b[l]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},{"./_core":131,"./_ctx":132,"./_global":139,"./_hide":141,"./_redefine":152}],138:[function(t,e,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],139:[function(t,e,n){arguments[4][75][0].apply(n,arguments)},{dup:75}],140:[function(t,e,n){arguments[4][76][0].apply(n,arguments)},{dup:76}],141:[function(t,e,n){arguments[4][77][0].apply(n,arguments)},{"./_descriptors":134,"./_object-dp":146,"./_property-desc":151,dup:77}],142:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{"./_descriptors":134,"./_dom-create":135,"./_fails":138,dup:79}],143:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"./_cof":130,dup:80}],144:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{dup:82}],145:[function(t,e,n){"use strict";var r=t("./_object-keys"),i=t("./_object-gops"),o=t("./_object-pie"),a=t("./_to-object"),s=t("./_iobject"),u=Object.assign;e.exports=!u||t("./_fails")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,l=1,c=i.f,f=o.f;u>l;)for(var h,p=s(arguments[l++]),d=c?r(p).concat(c(p)):r(p),m=d.length,y=0;m>y;)f.call(p,h=d[y++])&&(n[h]=p[h]);return n}:u},{"./_fails":138,"./_iobject":143,"./_object-gops":147,"./_object-keys":149,"./_object-pie":150,"./_to-object":159}],146:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./_an-object":128,"./_descriptors":134,"./_ie8-dom-define":142,"./_to-primitive":160,dup:90}],147:[function(t,e,n){arguments[4][95][0].apply(n,arguments)},{dup:95}],148:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{"./_array-includes":129,"./_has":140,"./_shared-key":153,"./_to-iobject":157,dup:97}],149:[function(t,e,n){arguments[4][98][0].apply(n,arguments)},{"./_enum-bug-keys":136,"./_object-keys-internal":148,dup:98}],150:[function(t,e,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],151:[function(t,e,n){arguments[4][100][0].apply(n,arguments)},{dup:100}],152:[function(t,e,n){var r=t("./_global"),i=t("./_hide"),o=t("./_has"),a=t("./_uid")("src"),s=Function.toString,u=(""+s).split("toString");t("./_core").inspectSource=function(t){return s.call(t)},(e.exports=function(t,e,n,s){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},{"./_core":131,"./_global":139,"./_has":140,"./_hide":141,"./_uid":161}],153:[function(t,e,n){arguments[4][104][0].apply(n,arguments)},{"./_shared":154,"./_uid":161,dup:104}],154:[function(t,e,n){arguments[4][105][0].apply(n,arguments)},{"./_global":139,dup:105}],155:[function(t,e,n){arguments[4][107][0].apply(n,arguments)},{"./_to-integer":156,dup:107}],156:[function(t,e,n){arguments[4][108][0].apply(n,arguments)},{dup:108}],157:[function(t,e,n){arguments[4][109][0].apply(n,arguments)},{"./_defined":133,"./_iobject":143,dup:109}],158:[function(t,e,n){arguments[4][110][0].apply(n,arguments)},{"./_to-integer":156,dup:110}],159:[function(t,e,n){arguments[4][111][0].apply(n,arguments)},{"./_defined":133,dup:111}],160:[function(t,e,n){arguments[4][112][0].apply(n,arguments)},{"./_is-object":144,dup:112}],161:[function(t,e,n){arguments[4][113][0].apply(n,arguments)},{dup:113}],162:[function(t,e,n){var r=t("./_export");r(r.S+r.F,"Object",{assign:t("./_object-assign")})},{"./_export":137,"./_object-assign":145}],163:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,i){"object"===(void 0===n?"undefined":r(n))&&"object"===(void 0===e?"undefined":r(e))?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"===(void 0===n?"undefined":r(n))?n.dat=i():t.dat=i()}(void 0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1));e.default=r.default,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(2)),o=r(n(6)),a=r(n(3)),s=r(n(7)),u=r(n(8)),l=r(n(10)),c=r(n(11)),f=r(n(12)),h=r(n(13)),p=r(n(14)),d=r(n(15)),m=r(n(16)),y=r(n(9)),_=r(n(17));e.default={color:{Color:i.default,math:o.default,interpret:a.default},controllers:{Controller:s.default,BooleanController:u.default,OptionController:l.default,StringController:c.default,NumberController:f.default,NumberControllerBox:h.default,NumberControllerSlider:p.default,FunctionController:d.default,ColorController:m.default},dom:{dom:y.default},gui:{GUI:_.default},GUI:_.default},t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(c.recalculateRGB(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(c.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(c.recalculateHSV(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(c.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}e.__esModule=!0;var a=r(n(3)),s=r(n(6)),u=r(n(4)),l=r(n(5)),c=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__state=a.default.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return t.prototype.toString=function(){return(0,u.default)(this)},t.prototype.toHexString=function(){return(0,u.default)(this,!0)},t.prototype.toOriginal=function(){return this.__state.conversion.write(this)},t}();c.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=s.default.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");l.default.extend(t.__state,s.default.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},c.recalculateHSV=function(t){var e=s.default.rgb_to_hsv(t.r,t.g,t.b);l.default.extend(t.__state,{s:e.s,v:e.v}),l.default.isNaN(e.h)?l.default.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},c.COMPONENTS=["r","g","b","h","s","v","hex","a"],i(c.prototype,"r",2),i(c.prototype,"g",1),i(c.prototype,"b",0),o(c.prototype,"h"),o(c.prototype,"s"),o(c.prototype,"v"),Object.defineProperty(c.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(c.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=s.default.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),e.default=c,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(4)),o=r(n(5)),a=[{litmus:o.default.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:i.default},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:i.default},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:i.default},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:i.default}}},{litmus:o.default.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:o.default.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:o.default.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(o.default.isNumber(t.r)&&o.default.isNumber(t.g)&&o.default.isNumber(t.b)&&o.default.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(o.default.isNumber(t.r)&&o.default.isNumber(t.g)&&o.default.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(o.default.isNumber(t.h)&&o.default.isNumber(t.s)&&o.default.isNumber(t.v)&&o.default.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(o.default.isNumber(t.h)&&o.default.isNumber(t.s)&&o.default.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],s=void 0,u=void 0;e.default=function(){u=!1;var t=arguments.length>1?o.default.toArray(arguments):arguments[0];return o.default.each(a,function(e){if(e.litmus(t))return o.default.each(e.conversions,function(e,n){if(s=e.read(t),!1===u&&!1!==s)return u=s,s.conversionName=n,s.conversion=e,o.default.BREAK}),o.default.BREAK}),u},t.exports=e.default},function(t,e){e.__esModule=!0,e.default=function(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+a+"}":"unknown format"},t.exports=e.default},function(t,e){e.__esModule=!0;var n=Array.prototype.forEach,r=Array.prototype.slice,i={BREAK:{},extend:function(t){return this.each(r.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))},this),t},defaults:function(t){return this.each(r.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))},this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(t)if(n&&t.forEach&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){var i=void 0,o=void 0;for(i=0,o=t.length;i<o;i++)if(i in t&&e.call(r,t[i],i)===this.BREAK)return}else for(var a in t)if(e.call(r,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments,a=n||!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),a&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return isNaN(t)}),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}};e.default=i,t.exports=e.default},function(t,e){e.__esModule=!0;var n=void 0,r={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=o/i,a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:s,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,r){return r<<(n=8*e)|t&~(255<<n)}};e.default=r,t.exports=e.default},function(t,e){e.__esModule=!0;var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return t.prototype.onChange=function(t){return this.__onChange=t,this},t.prototype.onFinishChange=function(t){return this.__onFinishChange=t,this},t.prototype.setValue=function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},t.prototype.getValue=function(){return this.object[this.property]},t.prototype.updateDisplay=function(){return this},t.prototype.isModified=function(){return this.initialValue!==this.getValue()},t}();e.default=n,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(7)),a=i(n(9)),s=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i)),s=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),a.default.bind(o.__checkbox,"change",function(){s.setValue(!s.__prev)},!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setValue=function(e){var n=t.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n},e.prototype.updateDisplay=function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),t.prototype.updateDisplay.call(this)},e}(o.default);e.default=s,t.exports=e.default},function(t,e,n){function r(t){if("0"===t||i.default.isUndefined(t))return 0;var e=t.match(a);return i.default.isNull(e)?0:parseFloat(e[1])}e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),o={};i.default.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,e){i.default.each(t,function(t){o[t]=e})});var a=/(\d+(\.\d+)?)px/,s={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,o=e;i.default.isUndefined(o)&&(o=!0),i.default.isUndefined(r)&&(r=!0),t.style.position="absolute",o&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var a=n||{},s=o[e];if(!s)throw new Error("Event type "+e+" not supported.");var u=document.createEvent(s);switch(s){case"MouseEvents":var l=a.x||a.clientX||0,c=a.y||a.clientY||0;u.initMouseEvent(e,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var f=u.initKeyboardEvent||u.initKeyEvent;i.default.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),f(e,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break;default:u.initEvent(e,a.bubbles||!1,a.cancelable||!0)}i.default.defaults(u,r),t.dispatchEvent(u)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),s},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),s},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return s},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return s},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return r(e["border-left-width"])+r(e["border-right-width"])+r(e["padding-left"])+r(e["padding-right"])+r(e.width)},getHeight:function(t){var e=getComputedStyle(t);return r(e["border-top-width"])+r(e["border-bottom-width"])+r(e["padding-top"])+r(e["padding-bottom"])+r(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};e.default=s,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(7)),a=i(n(9)),s=i(n(5)),u=function(t){function e(n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i)),l=o,c=u;if(u.__select=document.createElement("select"),s.default.isArray(l)){var f={};s.default.each(l,function(t){f[t]=t}),l=f}return s.default.each(l,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),c.__select.appendChild(n)}),u.updateDisplay(),a.default.bind(u.__select,"change",function(){var t=this.options[this.selectedIndex].value;c.setValue(t)}),u.domElement.appendChild(u.__select),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setValue=function(e){var n=t.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n},e.prototype.updateDisplay=function(){return a.default.isActive(this.__select)?this:(this.__select.value=this.getValue(),t.prototype.updateDisplay.call(this))},e}(o.default);e.default=u,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(7)),a=i(n(9)),s=function(t){function e(n,i){function o(){u.setValue(u.__input.value)}!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i)),u=s;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),a.default.bind(s.__input,"keyup",o),a.default.bind(s.__input,"change",o),a.default.bind(s.__input,"blur",function(){u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}),a.default.bind(s.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateDisplay=function(){return a.default.isActive(this.__input)||(this.__input.value=this.getValue()),t.prototype.updateDisplay.call(this)},e}(o.default);e.default=s,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}e.__esModule=!0;var a=i(n(7)),s=i(n(5)),u=function(t){function e(n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i)),l=a||{};return u.__min=l.min,u.__max=l.max,u.__step=l.step,s.default.isUndefined(u.__step)?0===u.initialValue?u.__impliedStep=1:u.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(u.initialValue))/Math.LN10))/10:u.__impliedStep=u.__step,u.__precision=o(u.__impliedStep),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setValue=function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),t.prototype.setValue.call(this,n)},e.prototype.min=function(t){return this.__min=t,this},e.prototype.max=function(t){return this.__max=t,this},e.prototype.step=function(t){return this.__step=t,this.__impliedStep=t,this.__precision=o(t),this},e}(a.default);e.default=u,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(12)),a=i(n(9)),s=i(n(5)),u=function(t){function e(n,i,o){function u(){h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function l(t){var e=p-t.clientY;h.setValue(h.getValue()+e*h.__impliedStep),p=t.clientY}function c(){a.default.unbind(window,"mousemove",l),a.default.unbind(window,"mouseup",c),u()}!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o));f.__truncationSuspended=!1;var h=f,p=void 0;return f.__input=document.createElement("input"),f.__input.setAttribute("type","text"),a.default.bind(f.__input,"change",function(){var t=parseFloat(h.__input.value);s.default.isNaN(t)||h.setValue(t)}),a.default.bind(f.__input,"blur",function(){u()}),a.default.bind(f.__input,"mousedown",function(t){a.default.bind(window,"mousemove",l),a.default.bind(window,"mouseup",c),p=t.clientY}),a.default.bind(f.__input,"keydown",function(t){13===t.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1,u())}),f.updateDisplay(),f.domElement.appendChild(f.__input),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(this.getValue(),this.__precision),t.prototype.updateDisplay.call(this)},e}(o.default);e.default=u,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(12)),a=i(n(9)),s=function(t){function e(n,i,o,s,u){function l(t){t.preventDefault();var e=h.__background.getBoundingClientRect();return h.setValue(function(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}(t.clientX,e.left,e.right,h.__min,h.__max)),!1}function c(){a.default.unbind(window,"mousemove",l),a.default.unbind(window,"mouseup",c),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i,{min:o,max:s,step:u})),h=f;return f.__background=document.createElement("div"),f.__foreground=document.createElement("div"),a.default.bind(f.__background,"mousedown",function(t){document.activeElement.blur(),a.default.bind(window,"mousemove",l),a.default.bind(window,"mouseup",c),l(t)}),a.default.addClass(f.__background,"slider"),a.default.addClass(f.__foreground,"slider-fg"),f.updateDisplay(),f.__background.appendChild(f.__foreground),f.domElement.appendChild(f.__background),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateDisplay=function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",t.prototype.updateDisplay.call(this)},e}(o.default);e.default=s,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(7)),a=i(n(9)),s=function(t){function e(n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i)),u=s;return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===o?"Fire":o,a.default.bind(s.__button,"click",function(t){return t.preventDefault(),u.fire(),!1}),a.default.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},e}(o.default);e.default=s,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,r){t.style.background="",c.default.each(h,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}e.__esModule=!0;var a=i(n(7)),s=i(n(9)),u=i(n(2)),l=i(n(3)),c=i(n(5)),f=function(t){function e(n,i){function a(t){m(t),s.default.bind(window,"mousemove",m),s.default.bind(window,"mouseup",f)}function f(){s.default.unbind(window,"mousemove",m),s.default.unbind(window,"mouseup",f),d()}function h(){var t=(0,l.default)(this.value);!1!==t?(v.__color.__state=t,v.setValue(v.__color.toOriginal())):this.value=v.__color.toString()}function p(){s.default.unbind(window,"mousemove",y),s.default.unbind(window,"mouseup",p),d()}function d(){v.__onFinishChange&&v.__onFinishChange.call(v,v.__color.toOriginal())}function m(t){t.preventDefault();var e=v.__saturation_field.getBoundingClientRect(),n=(t.clientX-e.left)/(e.right-e.left),r=1-(t.clientY-e.top)/(e.bottom-e.top);return r>1?r=1:r<0&&(r=0),n>1?n=1:n<0&&(n=0),v.__color.v=r,v.__color.s=n,v.setValue(v.__color.toOriginal()),!1}function y(t){t.preventDefault();var e=v.__hue_field.getBoundingClientRect(),n=1-(t.clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),v.__color.h=360*n,v.setValue(v.__color.toOriginal()),!1}!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var _=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,t.call(this,n,i));_.__color=new u.default(_.getValue()),_.__temp=new u.default(0);var v=_;_.domElement=document.createElement("div"),s.default.makeSelectable(_.domElement,!1),_.__selector=document.createElement("div"),_.__selector.className="selector",_.__saturation_field=document.createElement("div"),_.__saturation_field.className="saturation-field",_.__field_knob=document.createElement("div"),_.__field_knob.className="field-knob",_.__field_knob_border="2px solid ",_.__hue_knob=document.createElement("div"),_.__hue_knob.className="hue-knob",_.__hue_field=document.createElement("div"),_.__hue_field.className="hue-field",_.__input=document.createElement("input"),_.__input.type="text",_.__input_textShadow="0 1px 1px ",s.default.bind(_.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),s.default.bind(_.__input,"blur",h),s.default.bind(_.__selector,"mousedown",function(){s.default.addClass(this,"drag").bind(window,"mouseup",function(){s.default.removeClass(v.__selector,"drag")})});var g=document.createElement("div");return c.default.extend(_.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),c.default.extend(_.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:_.__field_knob_border+(_.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),c.default.extend(_.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),c.default.extend(_.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),c.default.extend(g.style,{width:"100%",height:"100%",background:"none"}),o(g,"top","rgba(0,0,0,0)","#000"),c.default.extend(_.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(_.__hue_field),c.default.extend(_.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:_.__input_textShadow+"rgba(0,0,0,0.7)"}),s.default.bind(_.__saturation_field,"mousedown",a),s.default.bind(_.__field_knob,"mousedown",a),s.default.bind(_.__hue_field,"mousedown",function(t){y(t),s.default.bind(window,"mousemove",y),s.default.bind(window,"mouseup",p)}),_.__saturation_field.appendChild(g),_.__selector.appendChild(_.__field_knob),_.__selector.appendChild(_.__saturation_field),_.__selector.appendChild(_.__hue_field),_.__hue_field.appendChild(_.__hue_knob),_.domElement.appendChild(_.__input),_.domElement.appendChild(_.__selector),_.updateDisplay(),_}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateDisplay=function(){var t=(0,l.default)(this.getValue());if(!1!==t){var e=!1;c.default.each(u.default.COMPONENTS,function(n){if(!c.default.isUndefined(t[n])&&!c.default.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&c.default.extend(this.__color.__state,t)}c.default.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;c.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),c.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})},e}(a.default),h=["-moz-","-o-","-webkit-","-ms-",""];e.default=f,t.exports=e.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function a(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function s(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o[P])return;a=o[P]}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function u(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new T.default(e,n);else{var l=[e,n].concat(r.factoryArgs);i=v.default.apply(t,l)}r.before instanceof g.default&&(r.before=r.before.__li),s(t,i),k.default.addClass(i.domElement,"c");var c=document.createElement("span");k.default.addClass(c,"property-name"),c.innerHTML=i.property;var f=document.createElement("div");f.appendChild(c),f.appendChild(i.domElement);var h=o(t,f,r.before);return k.default.addClass(h,D.CLASS_CONTROLLER_ROW),i instanceof T.default?k.default.addClass(h,"color"):k.default.addClass(h,m(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,O.default.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),u(t,n.object,n.property,{before:r,factoryArgs:[O.default.toArray(arguments)]})}if(O.default.isArray(e)||O.default.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),u(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof S.default){var r=new x.default(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});O.default.each(["updateDisplay","onChange","onFinishChange","step"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}}),k.default.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof x.default){var i=function(e){if(O.default.isNumber(n.__min)&&O.default.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=u(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=O.default.compose(i,n.min),n.max=O.default.compose(i,n.max)}else n instanceof b.default?(k.default.bind(e,"click",function(){k.default.fakeEvent(n.__checkbox,"click")}),k.default.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof w.default?(k.default.bind(e,"click",function(){k.default.fakeEvent(n.__button,"click")}),k.default.bind(e,"mouseover",function(){k.default.addClass(n.__button,"hover")}),k.default.bind(e,"mouseout",function(){k.default.removeClass(n.__button,"hover")})):n instanceof T.default&&(k.default.addClass(e,"color"),n.updateDisplay=O.default.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=O.default.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&a(t.getRoot(),!0),e},n.setValue)}(t,h,i),t.__controllers.push(i),i}function l(t,e){return document.location.href+"."+e}function c(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function f(t,e){e.style.display=t.useLocalStorage?"block":"none"}function h(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function p(t,e){var n={};return O.default.each(t.__rememberedObjects,function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];O.default.each(a,function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[i]=o}),n}function d(t){0!==t.length&&E.default.call(window,function(){d(t)}),O.default.each(t,function(t){t.updateDisplay()})}e.__esModule=!0;var m="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return void 0===t?"undefined":r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":r(t)},y=i(n(18)),_=i(n(19)),v=i(n(20)),g=i(n(7)),b=i(n(8)),w=i(n(15)),x=i(n(13)),S=i(n(14)),T=i(n(16)),E=i(n(21)),A=i(n(22)),k=i(n(9)),O=i(n(5)),M=i(n(23));y.default.inject(M.default);var P="Default",C=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),j=void 0,R=!0,F=void 0,L=!1,q=[],D=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),k.default.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=O.default.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=O.default.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),O.default.isUndefined(r.load)?r.load={preset:P}:r.preset&&(r.load.preset=r.preset),O.default.isUndefined(r.parent)&&r.hideable&&q.push(this),r.resizable=O.default.isUndefined(r.parent)&&r.resizable,r.autoPlace&&O.default.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=C&&"true"===localStorage.getItem(l(0,"isLocal")),a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,h(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,titleRowName&&(titleRowName.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?k.default.addClass(n.__ul,t.CLASS_CLOSED):k.default.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(t){C&&(i=t,t?k.default.bind(window,"unload",a):k.default.unbind(window,"unload",a),localStorage.setItem(l(0,"isLocal"),t))}}}),O.default.isUndefined(r.parent)){if(r.closed=!1,k.default.addClass(this.domElement,t.CLASS_MAIN),k.default.makeSelectable(this.domElement,!1),C&&i){n.useLocalStorage=!0;var s=localStorage.getItem(l(0,"gui"));s&&(r.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,k.default.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(k.default.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(k.default.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),k.default.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var u=document.createTextNode(r.name);k.default.addClass(u,"controller-name");var c=o(n,u),f=function(t){return t.preventDefault(),n.closed=!n.closed,!1};k.default.addClass(this.__ul,t.CLASS_CLOSED),k.default.addClass(c,"title"),k.default.bind(c,"click",f),r.closed||(this.closed=!1)}r.autoPlace&&(O.default.isUndefined(r.parent)&&(R&&(F=document.createElement("div"),k.default.addClass(F,"dg"),k.default.addClass(F,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(F),R=!1),F.appendChild(this.domElement),k.default.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||h(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},k.default.bind(window,"resize",this.__resizeHandler),k.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),k.default.bind(this.__ul,"transitionend",this.__resizeHandler),k.default.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(t){function e(e){return e.preventDefault(),t.width+=i-e.clientX,t.onResize(),i=e.clientX,!1}function n(){k.default.removeClass(t.__closeButton,D.CLASS_DRAG),k.default.unbind(window,"mousemove",e),k.default.unbind(window,"mouseup",n)}function r(r){return r.preventDefault(),i=r.clientX,k.default.addClass(t.__closeButton,D.CLASS_DRAG),k.default.bind(window,"mousemove",e),k.default.bind(window,"mouseup",n),!1}var i=void 0;t.__resize_handle=document.createElement("div"),O.default.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),k.default.bind(t.__resize_handle,"mousedown",r),k.default.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),a=function(){C&&"true"===localStorage.getItem(l(0,"isLocal"))&&localStorage.setItem(l(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||function(){var t=n.getRoot();t.width+=1,O.default.defer(function(){t.width-=1})}()};D.toggleHide=function(){L=!L,O.default.each(q,function(t){t.domElement.style.display=L?"none":""})},D.CLASS_AUTO_PLACE="a",D.CLASS_AUTO_PLACE_CONTAINER="ac",D.CLASS_MAIN="main",D.CLASS_CONTROLLER_ROW="cr",D.CLASS_TOO_TALL="taller-than-window",D.CLASS_CLOSED="closed",D.CLASS_CLOSE_BUTTON="close-button",D.CLASS_CLOSE_TOP="close-top",D.CLASS_CLOSE_BOTTOM="close-bottom",D.CLASS_DRAG="drag",D.DEFAULT_WIDTH=245,D.TEXT_CLOSED="Close Controls",D.TEXT_OPEN="Open Controls",D._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||D.toggleHide()},k.default.bind(window,"keydown",D._keydownHandler,!1),O.default.extend(D.prototype,{add:function(t,e){return u(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return u(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;O.default.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&F.removeChild(this.domElement),k.default.unbind(window,"keydown",D._keydownHandler,!1),k.default.unbind(window,"resize",this.__resizeHandler),this.saveToLocalStorageIfPossible&&k.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new D(e);this.__folders[t]=n;var r=o(this,n.domElement);return k.default.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=k.default.getOffset(t.__ul).top,n=0;O.default.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=k.default.getHeight(e))}),window.innerHeight-e-20<n?(k.default.addClass(t.domElement,D.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(k.default.removeClass(t.domElement,D.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&O.default.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:O.default.debounce(function(){this.onResize()},50),remember:function(){if(O.default.isUndefined(j)&&((j=new A.default).domElement.innerHTML=_.default),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;O.default.each(Array.prototype.slice.call(arguments),function(e){0===t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");k.default.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),k.default.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",k.default.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",k.default.addClass(r,"button"),k.default.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",k.default.addClass(i,"button"),k.default.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",k.default.addClass(o,"button"),k.default.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?O.default.each(t.load.remembered,function(e,n){c(t,n,n===t.preset)}):c(t,P,!1),k.default.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),C){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(l(0,"isLocal"))&&u.setAttribute("checked","checked"),f(t,s),k.default.bind(u,"change",function(){t.useLocalStorage=!t.useLocalStorage,f(t,s)})}var h=document.getElementById("dg-new-constructor");k.default.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||j.hide()}),k.default.bind(n,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),j.show(),h.focus(),h.select()}),k.default.bind(r,"click",function(){t.save()}),k.default.bind(i,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),k.default.bind(o,"click",function(){t.revert()})}(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&h(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=p(this)),t.folders={},O.default.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=p(this),a(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[P]=p(this,!0)),this.load.remembered[t]=p(this),this.preset=t,c(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){O.default.each(this.__controllers,function(e){this.getRoot().load.remembered?s(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),O.default.each(this.__folders,function(t){t.revert(t)}),t||a(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&d(this.__listening)},updateDisplay:function(){O.default.each(this.__controllers,function(t){t.updateDisplay()}),O.default.each(this.__folders,function(t){t.updateDisplay()})}}),e.default=D,t.exports=e.default},function(t,e){t.exports={load:function(t,e){var n=e||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}}}},function(t,e){t.exports='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(10)),o=r(n(13)),a=r(n(14)),s=r(n(11)),u=r(n(15)),l=r(n(8)),c=r(n(5));e.default=function(t,e){var n=t[e];return c.default.isArray(arguments[2])||c.default.isObject(arguments[2])?new i.default(t,e,arguments[2]):c.default.isNumber(n)?c.default.isNumber(arguments[2])&&c.default.isNumber(arguments[3])?c.default.isNumber(arguments[4])?new a.default(t,e,arguments[2],arguments[3],arguments[4]):new a.default(t,e,arguments[2],arguments[3]):c.default.isNumber(arguments[4])?new o.default(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new o.default(t,e,{min:arguments[2],max:arguments[3]}):c.default.isString(n)?new s.default(t,e):c.default.isFunction(n)?new u.default(t,e,""):c.default.isBoolean(n)?new l.default(t,e):null},t.exports=e.default},function(t,e){e.__esModule=!0,e.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(9)),o=r(n(5)),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.backgroundElement=document.createElement("div"),o.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),i.default.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;i.default.bind(this.backgroundElement,"click",function(){e.hide()})}return t.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.default.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},t.prototype.hide=function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",i.default.unbind(t.domElement,"webkitTransitionEnd",e),i.default.unbind(t.domElement,"transitionend",e),i.default.unbind(t.domElement,"oTransitionEnd",e)};i.default.bind(this.domElement,"webkitTransitionEnd",e),i.default.bind(this.domElement,"transitionend",e),i.default.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},t.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-i.default.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-i.default.getHeight(this.domElement)/2+"px"},t}();e.default=a,t.exports=e.default},function(t,e,n){(t.exports=n(24)()).push([t.id,".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */\n  /** allow overflow for color selector */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button.close-top {\n        position: relative; }\n      .dg.main .close-button.close-bottom {\n        position: absolute; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-y: visible; }\n    .dg.a.has-save > ul.close-top {\n      margin-top: 0; }\n    .dg.a.has-save > ul.close-bottom {\n      margin-top: 27px; }\n    .dg.a.has-save > ul.closed {\n      margin-top: 0; }\n    .dg.a .save-row {\n      top: 0;\n      z-index: 1002; }\n      .dg.a .save-row.close-top {\n        position: relative; }\n      .dg.a .save-row.close-bottom {\n        position: fixed; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out;\n    -webkit-transition: overflow 0.1s linear;\n    -o-transition: overflow 0.1s linear;\n    -moz-transition: overflow 0.1s linear;\n    transition: overflow 0.1s linear; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid transparent; }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px;\n    overflow: hidden; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%;\n    position: relative; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 7px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .cr.color {\n    overflow: visible; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: #000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.color {\n    border-left: 3px solid; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2FA1D6; }\n    .dg .cr.number input[type=text] {\n      color: #2FA1D6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2FA1D6;\n    max-width: 100%; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}}])})},{}],164:[function(t,e,n){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],165:[function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r=e&&e.length,u=r?e[0]*n:t.length,c=i(t,0,u,n,!0),f=[];if(!c)return f;var h,m,y,_,v,g,b;if(r&&(c=function(t,e,n,r){var a,u,c,f,h,m=[];for(a=0,u=e.length;a<u;a++)c=e[a]*r,f=a<u-1?e[a+1]*r:t.length,(h=i(t,c,f,r,!1))===h.next&&(h.steiner=!0),m.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(h));for(m.sort(s),a=0;a<m.length;a++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,f=n.x,h=n.y,d=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=f&&i!==r.x&&l(o<h?i:a,o,f,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<d||u===d&&r.x>n.x)&&p(r,t)&&(n=r,d=u),r=r.next;return n}(t,e)){var n=d(e,t);o(n,n.next)}}(m[a],n),n=o(n,n.next);return n}(t,e,c,n)),t.length>80*n){h=y=t[0],m=_=t[1];for(var w=n;w<u;w+=n)v=t[w],g=t[w+1],v<h&&(h=v),g<m&&(m=g),v>y&&(y=v),g>_&&(_=g);b=0!==(b=Math.max(y-h,_-m))?1/b:0}return a(c,f,n,h,m,b),f}function i(t,e,n,r,i){var o,a;if(i===v(t,e,n,r)>0)for(o=e;o<n;o+=r)a=m(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=m(o,t[o],t[o+1],a);return a&&f(a,a.next)&&(y(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!f(r,r.next)&&0!==c(r.prev,r,r.next))r=r.next;else{if(y(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,s,m){if(t){!m&&s&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=u(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,s);for(var _,v,g=t;t.prev!==t.next;)if(_=t.prev,v=t.next,s?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(c(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,f=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,h=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,p=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,d=u(s,f,e,n,r),m=u(h,p,e,n,r),y=t.nextZ;for(;y&&y.z<=m;){if(y!==t.prev&&y!==t.next&&l(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&c(y.prev,y,y.next)>=0)return!1;y=y.nextZ}y=t.prevZ;for(;y&&y.z>=d;){if(y!==t.prev&&y!==t.next&&l(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&c(y.prev,y,y.next)>=0)return!1;y=y.prevZ}return!0}(t,r,i,s):function(t){var e=t.prev,n=t,r=t.next;if(c(e,n,r)>=0)return!1;var i=t.next.next;for(;i!==t.prev;){if(l(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&c(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(t))e.push(_.i/n),e.push(t.i/n),e.push(v.i/n),y(t),t=v.next,g=v.next;else if((t=v)===g){m?1===m?a(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!f(i,o)&&h(i,r,r.next,o)&&p(i,o)&&p(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),y(r),y(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,s,2):2===m&&function(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&h(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&p(t,e)&&p(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(u,l)){var c=d(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s),void a(c,e,n,r,i,s)}l=l.next}u=u.next}while(u!==t)}(t,e,n,r,i,s):a(o(t),e,n,r,i,s,1);break}}}function s(t,e){return t.x-e.x}function u(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function l(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function c(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function f(t,e){return t.x===e.x&&t.y===e.y}function h(t,e,n,r){return!!(f(t,e)&&f(n,r)||f(t,r)&&f(n,e))||c(t,e,n)>0!=c(t,e,r)>0&&c(n,r,t)>0!=c(n,r,e)>0}function p(t,e){return c(t.prev,t,t.next)<0?c(t,e,t.next)>=0&&c(t,t.prev,e)>=0:c(t,e,t.prev)<0||c(t,t.next,e)<0}function d(t,e){var n=new _(t.i,t.x,t.y),r=new _(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function m(t,e,n,r){var i=new _(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function y(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(v(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(v(t,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},{}],166:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(l=n.slice()).length,u=0;u<r;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.trace),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],167:[function(t,e,n){var r=t("dtype");e.exports=function(t,e,n){if(!t)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(t)&&Array.isArray(t[0])){var i=t[0].length,o=t.length*i;e&&"string"!=typeof e||(e=new(r(e||"float32"))(o+n));var a=e.length-n;if(o!==a)throw new Error("source length "+o+" ("+i+"x"+t.length+") does not match destination length "+a);for(var s=0,u=n;s<t.length;s++)for(var l=0;l<i;l++)e[u++]=t[s][l]}else if(e&&"string"!=typeof e)e.set(t,n);else{var c=r(e||"float32");0===n?e=new c(t):(e=new c(t.length+n)).set(t,n)}return e}},{dtype:164}],168:[function(t,e,n){var r=t("is-function");e.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===i.call(t)?function(t,e,n){for(var r=0,i=t.length;r<i;r++)o.call(t,r)&&e.call(n,t[r],r,t)}(t,e,n):"string"==typeof t?function(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t.charAt(r),r,t)}(t,e,n):function(t,e,n){for(var r in t)o.call(t,r)&&e.call(n,t[r],r,t)}(t,e,n)};var i=Object.prototype.toString,o=Object.prototype.hasOwnProperty},{"is-function":189}],169:[function(t,e,n){e.exports=function(t){var e={positions:[],cells:[],uvs:[]};return t=t||{},t.cellSize=t.cellSize||3,t.x=t.x||0,t.y=t.y||0,t.z=t.z||0,t.startRadian=t.startRadian||0,t.endRadian=t.endRadian||1.5*Math.PI,t.innerRadius="number"==typeof t.innerRadius?t.innerRadius:40,t.outerRadius=t.outerRadius||200,t.numBands=t.numBands||2,t.numSlices=t.numSlices||40,t.drawOutline=void 0===t.drawOutline||t.drawOutline,function(t,e,n,r){for(var i,o,a,s,u,l,c,f=t,h=f.cellSize,p=f.endRadian-f.startRadian,d=Math.floor(Math.abs(p)/(2*Math.PI)*f.numSlices),m=p/d,y=1==f.numBands?1:f.numBands-1,_=(f.outerRadius-f.innerRadius)/y,v=0,g=d;v<=g;v++){i=v*m+f.startRadian,c=(v-1)*f.numBands,l=v*f.numBands;for(var b=0,w=f.numBands;b<w;b++)u=f.innerRadius+_*b,o=Math.cos(i)*u+f.x,a=f.y,s=Math.sin(i)*u+f.z,e.push([o,a,s]),r.push([v/d,b/y]),1==h?n.push([l+b]):2==h?v>0&&b+1<w&&(n.push([c+b,l+b]),n.push([l+b+1,c+b+1]),f.drawOutline||n.push([l+b,l+b+1])):3==h&&v>0&&b+1<w&&(n.push([l+b,c+b+1,c+b]),n.push([l+b,l+b+1,c+b+1]))}if(2==h&&p%Math.PI*2!=0){for(var b=0,w=f.numBands-1;b<w;b++)n.push([l+b,l+b+1]);l=0;for(var b=0,w=f.numBands-1;b<w;b++)n.push([l+b,l+b+1])}}(t,e.positions,e.cells,e.uvs),e}},{}],170:[function(t,e,n){!function(t,r){if("object"==typeof n&&"object"==typeof e)e.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var i=r();for(var o in i)("object"==typeof n?n:t)[o]=i[o]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=i=t},e.toRadian=function(t){return t*o},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=e.EPSILON=1e-6,i=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,o=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],p=n[1],d=n[2],m=n[3],y=n[4],_=n[5],v=n[6],g=n[7],b=n[8];return t[0]=h*r+p*a+d*l,t[1]=h*i+p*s+d*c,t[2]=h*o+p*u+d*f,t[3]=m*r+y*a+_*l,t[4]=m*i+y*s+_*c,t[5]=m*o+y*u+_*f,t[6]=v*r+g*a+b*l,t[7]=v*i+g*s+b*c,t[8]=v*o+g*u+b*f,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,i,a,s,u,l){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=s,c[7]=u,c[8]=l,c},e.set=function(t,e,n,r,i,o,a,s,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*a-s*l,h=-c*o+s*u,p=l*o-a*u,d=n*f+r*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-c*r+i*l)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(c*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-l*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*a,t[3]=s*u-o*c,t[4]=n*c-i*u,t[5]=i*o-n*s,t[6]=o*l-a*u,t[7]=r*u-n*l,t[8]=n*a-r*o,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+n*(-l*i+a*s)+r*(u*i-o*s)},e.multiply=r,e.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+l,t[7]=h*i+p*s+c,t[8]=h*o+p*u+f,t},e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*r,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=l,t[7]=c,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,p=i*s,d=i*u,m=o*a,y=o*s,_=o*u;return t[0]=1-f-d,t[3]=c-_,t[6]=h+y,t[1]=c+_,t[4]=1-l-d,t[7]=p-m,t[2]=h-y,t[5]=p+m,t[8]=1-l-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],m=e[13],y=e[14],_=e[15],v=n*s-r*a,g=n*u-i*a,b=n*l-o*a,w=r*u-i*s,x=r*l-o*s,S=i*l-o*u,T=c*m-f*d,E=c*y-h*d,A=c*_-p*d,k=f*y-h*m,O=f*_-p*m,M=h*_-p*y,P=v*M-g*O+b*k+w*A-x*E+S*T;return P?(P=1/P,t[0]=(s*M-u*O+l*k)*P,t[1]=(u*A-a*M-l*E)*P,t[2]=(a*O-s*A+l*T)*P,t[3]=(i*O-r*M-o*k)*P,t[4]=(n*M-i*A+o*E)*P,t[5]=(r*A-n*O-o*T)*P,t[6]=(m*S-y*x+_*w)*P,t[7]=(y*b-d*S-_*g)*P,t[8]=(d*x-m*b+_*v)*P,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=e[0],p=e[1],d=e[2],m=e[3],y=e[4],_=e[5],v=e[6],g=e[7],b=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-p)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-d)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-m)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-y)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-_)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-v)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-g)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=i},function(t,e,n){"use strict";function r(){var t=new d.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){var r=new d.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function s(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function u(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function f(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=function(t){var e=new d.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=a,e.multiply=s,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=l,e.squaredDistance=c,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=p,e.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},e.hermite=function(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t},e.bezier=function(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,l=s*a,c=3*o*s,f=3*u*a,h=u*o;return t[0]=e[0]*l+n[0]*c+r[0]*f+i[0]*h,t[1]=e[1]*l+n[1]*c+r[1]*f+i[1]*h,t[2]=e[2]*l+n[2]*c+r[2]*f+i[2]*h,t},e.random=function(t,e){e=e||1;var n=2*d.RANDOM()*Math.PI,r=2*d.RANDOM()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,f=l*i+u*r-a*o,h=l*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=c*l+p*-a+f*-u-h*-s,t[1]=f*l+p*-s+h*-a-c*-u,t[2]=h*l+p*-u+c*-s-f*-a,t},e.rotateX=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);h(n,n),h(r,r);var i=p(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.sub=a,e.mul=s,e.div=u,e.dist=l,e.sqrDist=c,e.len=i,e.sqrLen=f,e.forEach=function(){var t=r();return function(e,n,r,i,o,a){var s=void 0,u=void 0;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(){var t=new p.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function a(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function s(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function c(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=function(t){var e=new p.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){var i=new p.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=s,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=u,e.squaredDistance=l,e.length=c,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){return e=e||1,t[0]=p.RANDOM(),t[1]=p.RANDOM(),t[2]=p.RANDOM(),t[3]=p.RANDOM(),h(t,t),s(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},e.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,f=l*i+u*r-a*o,h=l*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=c*l+p*-a+f*-u-h*-s,t[1]=f*l+p*-s+h*-a-c*-u,t[2]=h*l+p*-u+c*-s-f*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-a)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=p.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))};var p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.sub=i,e.mul=o,e.div=a,e.dist=u,e.sqrDist=l,e.len=c,e.sqrLen=f,e.forEach=function(){var t=r();return function(e,n,r,i,o,a){var s=void 0,u=void 0;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var i=r(n(0)),o=r(n(5)),a=r(n(6)),s=r(n(1)),u=r(n(7)),l=r(n(8)),c=r(n(9)),f=r(n(2)),h=r(n(3));e.glMatrix=i,e.mat2=o,e.mat2d=a,e.mat3=s,e.mat4=u,e.quat=l,e.vec2=c,e.vec3=f,e.vec4=h},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*l+o*c,t[3]=i*l+a*c,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){var i=new o.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},e.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-u)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=i},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1],f=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*f+o*h,t[3]=i*f+a*h,t[4]=r*p+o*d+s,t[5]=i*p+a*d+u,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,i,a){var s=new o.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=a,s},e.set=function(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*-l+o*c,t[3]=i*-l+a*c,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=i*l,t[2]=o*c,t[3]=a*c,t[4]=s,t[5]=u,t},e.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*l+o*c+s,t[5]=i*l+a*c+u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=e[0],c=e[1],f=e[2],h=e[3],p=e[4],d=e[5];return Math.abs(n-l)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=i},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],m=e[12],y=e[13],_=e[14],v=e[15],g=n[0],b=n[1],w=n[2],x=n[3];return t[0]=g*r+b*s+w*f+x*m,t[1]=g*i+b*u+w*h+x*y,t[2]=g*o+b*l+w*p+x*_,t[3]=g*a+b*c+w*d+x*v,g=n[4],b=n[5],w=n[6],x=n[7],t[4]=g*r+b*s+w*f+x*m,t[5]=g*i+b*u+w*h+x*y,t[6]=g*o+b*l+w*p+x*_,t[7]=g*a+b*c+w*d+x*v,g=n[8],b=n[9],w=n[10],x=n[11],t[8]=g*r+b*s+w*f+x*m,t[9]=g*i+b*u+w*h+x*y,t[10]=g*o+b*l+w*p+x*_,t[11]=g*a+b*c+w*d+x*v,g=n[12],b=n[13],w=n[14],x=n[15],t[12]=g*r+b*s+w*f+x*m,t[13]=g*i+b*u+w*h+x*y,t[14]=g*o+b*l+w*p+x*_,t[15]=g*a+b*c+w*d+x*v,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,i,a,s,u,l,c,f,h,p,d,m,y){var _=new o.ARRAY_TYPE(16);return _[0]=t,_[1]=e,_[2]=n,_[3]=r,_[4]=i,_[5]=a,_[6]=s,_[7]=u,_[8]=l,_[9]=c,_[10]=f,_[11]=h,_[12]=p,_[13]=d,_[14]=m,_[15]=y,_},e.set=function(t,e,n,r,i,o,a,s,u,l,c,f,h,p,d,m,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=f,t[11]=h,t[12]=p,t[13]=d,t[14]=m,t[15]=y,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],m=e[13],y=e[14],_=e[15],v=n*s-r*a,g=n*u-i*a,b=n*l-o*a,w=r*u-i*s,x=r*l-o*s,S=i*l-o*u,T=c*m-f*d,E=c*y-h*d,A=c*_-p*d,k=f*y-h*m,O=f*_-p*m,M=h*_-p*y,P=v*M-g*O+b*k+w*A-x*E+S*T;return P?(P=1/P,t[0]=(s*M-u*O+l*k)*P,t[1]=(i*O-r*M-o*k)*P,t[2]=(m*S-y*x+_*w)*P,t[3]=(h*x-f*S-p*w)*P,t[4]=(u*A-a*M-l*E)*P,t[5]=(n*M-i*A+o*E)*P,t[6]=(y*b-d*S-_*g)*P,t[7]=(c*S-h*b+p*g)*P,t[8]=(a*O-s*A+l*T)*P,t[9]=(r*A-n*O-o*T)*P,t[10]=(d*x-m*b+_*v)*P,t[11]=(f*b-c*x-p*v)*P,t[12]=(s*E-a*k-u*T)*P,t[13]=(n*k-r*E+i*T)*P,t[14]=(m*g-d*w-y*v)*P,t[15]=(c*w-f*g+h*v)*P,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],m=e[13],y=e[14],_=e[15];return t[0]=s*(h*_-p*y)-f*(u*_-l*y)+m*(u*p-l*h),t[1]=-(r*(h*_-p*y)-f*(i*_-o*y)+m*(i*p-o*h)),t[2]=r*(u*_-l*y)-s*(i*_-o*y)+m*(i*l-o*u),t[3]=-(r*(u*p-l*h)-s*(i*p-o*h)+f*(i*l-o*u)),t[4]=-(a*(h*_-p*y)-c*(u*_-l*y)+d*(u*p-l*h)),t[5]=n*(h*_-p*y)-c*(i*_-o*y)+d*(i*p-o*h),t[6]=-(n*(u*_-l*y)-a*(i*_-o*y)+d*(i*l-o*u)),t[7]=n*(u*p-l*h)-a*(i*p-o*h)+c*(i*l-o*u),t[8]=a*(f*_-p*m)-c*(s*_-l*m)+d*(s*p-l*f),t[9]=-(n*(f*_-p*m)-c*(r*_-o*m)+d*(r*p-o*f)),t[10]=n*(s*_-l*m)-a*(r*_-o*m)+d*(r*l-o*s),t[11]=-(n*(s*p-l*f)-a*(r*p-o*f)+c*(r*l-o*s)),t[12]=-(a*(f*y-h*m)-c*(s*y-u*m)+d*(s*h-u*f)),t[13]=n*(f*y-h*m)-c*(r*y-i*m)+d*(r*h-i*f),t[14]=-(n*(s*y-u*m)-a*(r*y-i*m)+d*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+c*(r*u-i*s),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],p=t[12],d=t[13],m=t[14],y=t[15];return(e*a-n*o)*(f*y-h*m)-(e*s-r*o)*(c*y-h*d)+(e*u-i*o)*(c*m-f*d)+(n*s-r*a)*(l*y-h*p)-(n*u-i*a)*(l*m-f*p)+(r*u-i*s)*(l*d-c*p)},e.multiply=r,e.translate=function(t,e,n){var r=n[0],i=n[1],o=n[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=void 0,p=void 0,d=void 0,m=void 0,y=void 0,_=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],l=e[3],c=e[4],f=e[5],h=e[6],p=e[7],d=e[8],m=e[9],y=e[10],_=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=l,t[4]=c,t[5]=f,t[6]=h,t[7]=p,t[8]=d,t[9]=m,t[10]=y,t[11]=_,t[12]=a*r+c*i+d*o+e[12],t[13]=s*r+f*i+m*o+e[13],t[14]=u*r+h*i+y*o+e[14],t[15]=l*r+p*i+_*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){var i=r[0],a=r[1],s=r[2],u=Math.sqrt(i*i+a*a+s*s),l=void 0,c=void 0,f=void 0,h=void 0,p=void 0,d=void 0,m=void 0,y=void 0,_=void 0,v=void 0,g=void 0,b=void 0,w=void 0,x=void 0,S=void 0,T=void 0,E=void 0,A=void 0,k=void 0,O=void 0,M=void 0,P=void 0,C=void 0,j=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,i*=u,a*=u,s*=u,l=Math.sin(n),c=Math.cos(n),f=1-c,h=e[0],p=e[1],d=e[2],m=e[3],y=e[4],_=e[5],v=e[6],g=e[7],b=e[8],w=e[9],x=e[10],S=e[11],T=i*i*f+c,E=a*i*f+s*l,A=s*i*f-a*l,k=i*a*f-s*l,O=a*a*f+c,M=s*a*f+i*l,P=i*s*f+a*l,C=a*s*f-i*l,j=s*s*f+c,t[0]=h*T+y*E+b*A,t[1]=p*T+_*E+w*A,t[2]=d*T+v*E+x*A,t[3]=m*T+g*E+S*A,t[4]=h*k+y*O+b*M,t[5]=p*k+_*O+w*M,t[6]=d*k+v*O+x*M,t[7]=m*k+g*O+S*M,t[8]=h*P+y*C+b*j,t[9]=p*P+_*C+w*j,t[10]=d*P+v*C+x*j,t[11]=m*P+g*C+S*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var r=n[0],i=n[1],a=n[2],s=Math.sqrt(r*r+i*i+a*a),u=void 0,l=void 0,c=void 0;return Math.abs(s)<o.EPSILON?null:(s=1/s,r*=s,i*=s,a*=s,u=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=r*r*c+l,t[1]=i*r*c+a*u,t[2]=a*r*c-i*u,t[3]=0,t[4]=r*i*c-a*u,t[5]=i*i*c+l,t[6]=a*i*c+r*u,t[7]=0,t[8]=r*a*c+i*u,t[9]=i*a*c-r*u,t[10]=a*a*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,l=o+o,c=r*s,f=r*u,h=r*l,p=i*u,d=i*l,m=o*l,y=a*s,_=a*u,v=a*l;return t[0]=1-(p+m),t[1]=f+v,t[2]=h-_,t[3]=0,t[4]=f-v,t[5]=1-(c+m),t[6]=d+y,t[7]=0,t[8]=h+_,t[9]=d-y,t[10]=1-(c+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+l*l+c*c),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,l=o+o,c=a+a,f=i*u,h=i*l,p=i*c,d=o*l,m=o*c,y=a*c,_=s*u,v=s*l,g=s*c,b=r[0],w=r[1],x=r[2];return t[0]=(1-(d+y))*b,t[1]=(h+g)*b,t[2]=(p-v)*b,t[3]=0,t[4]=(h-g)*w,t[5]=(1-(f+y))*w,t[6]=(m+_)*w,t[7]=0,t[8]=(p+v)*x,t[9]=(m-_)*x,t[10]=(1-(f+d))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],l=o+o,c=a+a,f=s+s,h=o*l,p=o*c,d=o*f,m=a*c,y=a*f,_=s*f,v=u*l,g=u*c,b=u*f,w=r[0],x=r[1],S=r[2],T=i[0],E=i[1],A=i[2];return t[0]=(1-(m+_))*w,t[1]=(p+b)*w,t[2]=(d-g)*w,t[3]=0,t[4]=(p-b)*x,t[5]=(1-(h+_))*x,t[6]=(y+v)*x,t[7]=0,t[8]=(d+g)*S,t[9]=(y-v)*S,t[10]=(1-(h+m))*S,t[11]=0,t[12]=n[0]+T-(t[0]*T+t[4]*E+t[8]*A),t[13]=n[1]+E-(t[1]*T+t[5]*E+t[9]*A),t[14]=n[2]+A-(t[2]*T+t[6]*E+t[10]*A),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,p=i*s,d=i*u,m=o*a,y=o*s,_=o*u;return t[0]=1-f-d,t[1]=c+_,t[2]=h-y,t[3]=0,t[4]=c-_,t[5]=1-l-d,t[6]=p+m,t[7]=0,t[8]=h+y,t[9]=p-m,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t},e.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},e.lookAt=function(t,e,n,r){var i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=void 0,p=void 0,d=void 0,m=e[0],y=e[1],_=e[2],v=r[0],g=r[1],b=r[2],w=n[0],x=n[1],S=n[2];return Math.abs(m-w)<o.EPSILON&&Math.abs(y-x)<o.EPSILON&&Math.abs(_-S)<o.EPSILON?mat4.identity(t):(f=m-w,h=y-x,p=_-S,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,i=g*p-b*h,a=b*f-v*p,s=v*h-g*f,(d=Math.sqrt(i*i+a*a+s*s))?(i*=d=1/d,a*=d,s*=d):(i=0,a=0,s=0),u=h*s-p*a,l=p*i-f*s,c=f*a-h*i,(d=Math.sqrt(u*u+l*l+c*c))?(u*=d=1/d,l*=d,c*=d):(u=0,l=0,c=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=p,t[11]=0,t[12]=-(i*m+a*y+s*_),t[13]=-(u*m+l*y+c*_),t[14]=-(f*m+h*y+p*_),t[15]=1,t)},e.targetTo=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],l=r[2],c=i-n[0],f=o-n[1],h=a-n[2],p=c*c+f*f+h*h;p>0&&(c*=p=1/Math.sqrt(p),f*=p,h*=p);var d=u*h-l*f,m=l*c-s*h,y=s*f-u*c;return t[0]=d,t[1]=m,t[2]=y,t[3]=0,t[4]=f*y-h*m,t[5]=h*d-c*y,t[6]=c*m-f*d,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],m=t[12],y=t[13],_=t[14],v=t[15],g=e[0],b=e[1],w=e[2],x=e[3],S=e[4],T=e[5],E=e[6],A=e[7],k=e[8],O=e[9],M=e[10],P=e[11],C=e[12],j=e[13],R=e[14],F=e[15];return Math.abs(n-g)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-w)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-x)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-S)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-T)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(l-E)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-A)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-k)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-O)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-M)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(d-P)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(m-C)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(y-j)<=o.EPSILON*Math.max(1,Math.abs(y),Math.abs(j))&&Math.abs(_-R)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(R))&&Math.abs(v-F)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(F))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=i},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new l.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function a(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-r*l,t[2]=o*c+a*l+r*u-i*s,t[3]=a*c-r*s-i*u-o*l,t}function s(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=n[0],l=n[1],c=n[2],f=n[3],h=void 0,p=void 0,d=void 0,m=void 0,y=void 0;return(p=i*u+o*l+a*c+s*f)<0&&(p=-p,u=-u,l=-l,c=-c,f=-f),1-p>1e-6?(h=Math.acos(p),d=Math.sin(h),m=Math.sin((1-r)*h)/d,y=Math.sin(r*h)/d):(m=1-r,y=r),t[0]=m*i+y*u,t[1]=m*o+y*l,t[2]=m*a+y*c,t[3]=m*s+y*f,t}function u(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=i,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=o,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=a,e.rotateX=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},e.calculateW=function(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=s,e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return t[0]=o*u*c-a*s*l,t[1]=a*s*c+o*u*l,t[2]=a*u*l-o*s*c,t[3]=a*u*c+o*s*l,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var l=r(n(0)),c=r(n(1)),f=r(n(2)),h=r(n(3)),p=(e.clone=h.clone,e.fromValues=h.fromValues,e.copy=h.copy,e.set=h.set,e.add=h.add,e.mul=a,e.scale=h.scale,e.dot=h.dot,e.lerp=h.lerp,e.length=h.length),d=(e.len=p,e.squaredLength=h.squaredLength),m=(e.sqrLen=d,e.normalize=h.normalize);e.exactEquals=h.exactEquals,e.equals=h.equals,e.rotationTo=function(){var t=f.create(),e=f.fromValues(1,0,0),n=f.fromValues(0,1,0);return function(r,i,a){var s=f.dot(i,a);return s<-.999999?(f.cross(t,e,i),f.len(t)<1e-6&&f.cross(t,n,i),f.normalize(t,t),o(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(f.cross(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,m(r,r))}}(),e.sqlerp=function(){var t=i(),e=i();return function(n,r,i,o,a,u){return s(t,r,a,u),s(e,i,o,u),s(n,t,e,2*u*(1-u)),n}}(),e.setAxes=function(){var t=c.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],m(e,u(e,t))}}()},function(t,e,n){"use strict";function r(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function a(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function c(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=r,e.clone=function(t){var e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new f.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=s,e.squaredDistance=u,e.length=l,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.len=l,e.sub=i,e.mul=o,e.div=a,e.dist=s,e.sqrDist=u,e.sqrLen=c,e.forEach=function(){var t=r();return function(e,n,r,i,o,a){var s=void 0,u=void 0;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()}])})},{}],171:[function(t,e,n){e.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},{}],172:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},{}],173:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},{}],174:[function(t,e,n){e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},{}],175:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}},{}],176:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},{}],177:[function(t,e,n){e.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},{}],178:[function(t,e,n){e.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},{}],179:[function(t,e,n){e.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}},{}],180:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},{}],181:[function(t,e,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],182:[function(t,e,n){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),n=[],r=0;r<t.length-1;r++)n.push(t[r],e[r]||"");return n.push(t[r]),n.join("")}},{}],183:[function(t,e,n){!function(t,n,r,i){"use strict";function o(t,e,n){return setTimeout(c(t,n),e)}function a(t,e,n){return!!Array.isArray(t)&&(s(t,n[e],n),!0)}function s(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function u(e,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,i,r),e.apply(this,arguments)}}function l(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&Z(r,n)}function c(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return typeof t==et?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function p(t,e,n){s(_(e),function(e){t.addEventListener(e,n,!1)})}function d(t,e,n){s(_(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function y(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function v(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function g(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];v(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function w(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<$.length;){if(n=$[a],(r=n?n+o:e)in t)return r;a++}return i}function x(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function S(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&n.handler(e)},this.init()}function T(t,e,n){var r=n.pointers.length,o=n.changedPointers.length,a=e&ht&&r-o==0,s=e&(dt|mt)&&r-o==0;n.isFirst=!!a,n.isFinal=!!s,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,o=r.length;n.firstInput||(n.firstInput=E(e));o>1&&!n.firstMultiple?n.firstMultiple=E(e):1===o&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,u=s?s.center:a.center,l=e.center=A(r);e.timeStamp=it(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=P(u,l),e.distance=M(u,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==ht&&o.eventType!==dt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=O(e.deltaX,e.deltaY);var c=k(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=rt(c.x)>rt(c.y)?c.x:c.y,e.scale=s?function(t,e){return M(e[0],e[1],Et)/M(t[0],t[1],Et)}(s.pointers,r):1,e.rotation=s?function(t,e){return P(e[1],e[0],Et)+P(t[1],t[0],Et)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=mt&&(u>ft||s.velocity===i)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,f=k(u,l,c);r=f.x,o=f.y,n=rt(f.x)>rt(f.y)?f.x:f.y,a=O(l,c),t.lastInterval=e}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=a}(n,e);var f=t.element;m(e.srcEvent.target,f)&&(f=e.srcEvent.target);e.target=f}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function E(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:nt(t.pointers[n].clientX),clientY:nt(t.pointers[n].clientY)},n++;return{timeStamp:it(),pointers:e,center:A(e),deltaX:t.deltaX,deltaY:t.deltaY}}function A(t){var e=t.length;if(1===e)return{x:nt(t[0].clientX),y:nt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:nt(n/e),y:nt(r/e)}}function k(t,e,n){return{x:e/t||0,y:n/t||0}}function O(t,e){return t===e?yt:rt(t)>=rt(e)?t<0?_t:vt:e<0?gt:bt}function M(t,e,n){n||(n=Tt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function P(t,e,n){n||(n=Tt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function C(){this.evEl=kt,this.evWin=Ot,this.pressed=!1,S.apply(this,arguments)}function j(){this.evEl=Ct,this.evWin=jt,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function R(){this.evTarget=Ft,this.evWin=Lt,this.started=!1,S.apply(this,arguments)}function F(){this.evTarget=Dt,this.targetIds={},S.apply(this,arguments)}function L(){S.apply(this,arguments);var t=c(this.handler,this);this.touch=new F(this.manager,t),this.mouse=new C(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function q(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,Nt)}}function D(t,e){this.manager=t,this.set(e)}function N(t){this.options=Z({},this.defaults,t||{}),this.id=st++,this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Kt,this.simultaneous={},this.requireFail=[]}function I(t){return t&$t?"cancel":t&Jt?"end":t&Qt?"move":t&Xt?"start":""}function B(t){return t==bt?"down":t==gt?"up":t==_t?"left":t==vt?"right":""}function z(t,e){var n=e.manager;return n?n.get(t):t}function U(){N.apply(this,arguments)}function V(){U.apply(this,arguments),this.pX=null,this.pY=null}function G(){U.apply(this,arguments)}function W(){N.apply(this,arguments),this._timer=null,this._input=null}function Y(){U.apply(this,arguments)}function H(){U.apply(this,arguments)}function K(){N.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function X(t,e){return e=e||{},e.recognizers=h(e.recognizers,X.defaults.preset),new Q(t,e)}function Q(t,e){this.options=Z({},X.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){var e=t.options.inputClass;return new(e||(lt?j:ct?F:ut?L:C))(t,T)}(this),this.touchAction=new D(this,this.options.touchAction),J(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function J(t,e){var n=t.element;if(n.style){var r;s(t.options.cssProps,function(i,o){r=w(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}var Z,$=["","webkit","Moz","MS","ms","o"],tt=n.createElement("div"),et="function",nt=Math.round,rt=Math.abs,it=Date.now;Z="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var ot=u(function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t},"extend","Use `assign`."),at=u(function(t,e){return ot(t,e,!0)},"merge","Use `assign`."),st=1,ut="ontouchstart"in t,lt=w(t,"PointerEvent")!==i,ct=ut&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ft=25,ht=1,pt=2,dt=4,mt=8,yt=1,_t=2,vt=4,gt=8,bt=16,wt=_t|vt,xt=gt|bt,St=wt|xt,Tt=["x","y"],Et=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(x(this.element),this.evWin,this.domHandler)}};var At={mousedown:ht,mousemove:pt,mouseup:dt},kt="mousedown",Ot="mousemove mouseup";l(C,S,{handler:function(t){var e=At[t.type];e&ht&&0===t.button&&(this.pressed=!0),e&pt&&1!==t.which&&(e=dt),this.pressed&&(e&dt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Mt={pointerdown:ht,pointermove:pt,pointerup:dt,pointercancel:mt,pointerout:mt},Pt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ct="pointerdown",jt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Ct="MSPointerDown",jt="MSPointerMove MSPointerUp MSPointerCancel"),l(j,S,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Mt[r],o=Pt[t.pointerType]||t.pointerType,a="touch"==o,s=v(e,t.pointerId,"pointerId");i&ht&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(dt|mt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Rt={touchstart:ht,touchmove:pt,touchend:dt,touchcancel:mt},Ft="touchstart",Lt="touchstart touchmove touchend touchcancel";l(R,S,{handler:function(t){var e=Rt[t.type];if(e===ht&&(this.started=!0),this.started){var n=function(t,e){var n=g(t.touches),r=g(t.changedTouches);return e&(dt|mt)&&(n=b(n.concat(r),"identifier",!0)),[n,r]}.call(this,t,e);e&(dt|mt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var qt={touchstart:ht,touchmove:pt,touchend:dt,touchcancel:mt},Dt="touchstart touchmove touchend touchcancel";l(F,S,{handler:function(t){var e=qt[t.type],n=function(t,e){var n=g(t.touches),r=this.targetIds;if(e&(ht|pt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=g(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return m(t.target,u)}),e===ht)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(dt|mt)&&delete r[a[i].identifier],i++;return s.length?[b(o.concat(s),"identifier",!0),s]:void 0}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Nt=2500,It=25;l(L,S,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(t,e){t&ht?(this.primaryTouch=e.changedPointers[0].identifier,q.call(this,e)):t&(dt|mt)&&q.call(this,e)}).call(this,e,n);else if(i&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=It&&a<=It)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Bt=w(tt.style,"touchAction"),zt=Bt!==i,Ut="auto",Vt="manipulation",Gt="none",Wt="pan-x",Yt="pan-y",Ht=function(){if(!zt)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=!n||t.CSS.supports("touch-action",r)}),e}();D.prototype={set:function(t){"compute"==t&&(t=this.compute()),zt&&this.manager.element.style&&Ht[t]&&(this.manager.element.style[Bt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(y(t,Gt))return Gt;var e=y(t,Wt),n=y(t,Yt);return e&&n?Gt:e||n?e?Wt:Yt:y(t,Vt)?Vt:Ut}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=y(r,Gt)&&!Ht[Gt],o=y(r,Yt)&&!Ht[Yt],a=y(r,Wt)&&!Ht[Wt];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!o)return i||o&&n&wt||a&&n&xt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Kt=1,Xt=2,Qt=4,Jt=8,Zt=Jt,$t=16;N.prototype={defaults:{},set:function(t){return Z(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=z(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=z(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=z(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=z(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<Jt&&e(n.options.event+I(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=Jt&&e(n.options.event+I(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Kt)))return!1;t++}return!0},recognize:function(t){var e=Z({},t);if(!f(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Zt|$t|32)&&(this.state=Kt),this.state=this.process(e),this.state&(Xt|Qt|Jt|$t)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},l(U,N,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Xt|Qt),i=this.attrTest(t);return r&&(n&mt||!i)?e|$t:r||i?n&dt?e|Jt:e&Xt?e|Qt:Xt:32}}),l(V,U,{defaults:{event:"pan",threshold:10,pointers:1,direction:St},getTouchAction:function(){var t=this.options.direction,e=[];return t&wt&&e.push(Yt),t&xt&&e.push(Wt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&wt?(i=0===o?yt:o<0?_t:vt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?yt:a<0?gt:bt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return U.prototype.attrTest.call(this,t)&&(this.state&Xt||!(this.state&Xt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=B(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(G,U,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Xt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(W,N,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ut]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(dt|mt)&&!i)this.reset();else if(t.eventType&ht)this.reset(),this._timer=o(function(){this.state=Zt,this.tryEmit()},e.time,this);else if(t.eventType&dt)return Zt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Zt&&(t&&t.eventType&dt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=it(),this.manager.emit(this.options.event,this._input)))}}),l(Y,U,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Xt)}}),l(H,U,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wt|xt,pointers:1},getTouchAction:function(){return V.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(wt|xt)?e=t.overallVelocity:n&wt?e=t.overallVelocityX:n&xt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&rt(e)>this.options.velocity&&t.eventType&dt},emit:function(t){var e=B(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(K,N,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Vt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&ht&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=dt)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||M(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=o(function(){this.state=Zt,this.tryEmit()},e.interval,this),Xt):Zt}return 32},failTimeout:function(){return this._timer=o(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Zt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),X.VERSION="2.0.7",X.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Y,{enable:!1}],[G,{enable:!1},["rotate"]],[H,{direction:wt}],[V,{direction:wt},["swipe"]],[K],[K,{event:"doubletap",taps:2},["tap"]],[W]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};Q.prototype={set:function(t){return Z(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Zt)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Xt|Qt|Jt)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof N)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=v(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return s(_(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return s(_(t),function(t){e?n[t]&&n[t].splice(v(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},destroy:function(){this.element&&J(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Z(X,{INPUT_START:ht,INPUT_MOVE:pt,INPUT_END:dt,INPUT_CANCEL:mt,STATE_POSSIBLE:Kt,STATE_BEGAN:Xt,STATE_CHANGED:Qt,STATE_ENDED:Jt,STATE_RECOGNIZED:Zt,STATE_CANCELLED:$t,STATE_FAILED:32,DIRECTION_NONE:yt,DIRECTION_LEFT:_t,DIRECTION_RIGHT:vt,DIRECTION_UP:gt,DIRECTION_DOWN:bt,DIRECTION_HORIZONTAL:wt,DIRECTION_VERTICAL:xt,DIRECTION_ALL:St,Manager:Q,Input:S,TouchAction:D,TouchInput:F,MouseInput:C,PointerEventInput:j,TouchMouseInput:L,SingleTouchInput:R,Recognizer:N,AttrRecognizer:U,Tap:K,Pan:V,Swipe:H,Pinch:G,Rotate:Y,Press:W,on:p,off:d,each:s,merge:at,extend:ot,assign:Z,inherit:l,bindFn:c,prefixed:w});(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=X,"function"==typeof define&&define.amd?define(function(){return X}):void 0!==e&&e.exports?e.exports=X:t.Hammer=X}(window,document)},{}],184:[function(t,e,n){e.exports=function(t){return function(e,n,i){for(var o in n)o in r&&(n[r[o]]=n[o],delete n[o]);return t(e,n,i)}};var r={class:"className",for:"htmlFor","http-equiv":"httpEquiv"}},{}],185:[function(t,e,n){var r=t("hyperscript-attribute-to-property"),i=1,o=2,a=3,s=4,u=5,l=6,c=7,f=8,h=9,p=10,d=11,m=12,y=13;e.exports=function(t,e){function n(t){return"function"==typeof t?t:"string"==typeof t?t:t&&"object"==typeof t?t:v("",t)}e||(e={});var v=e.concat||function(t,e){return String(t)+String(e)};return!1!==e.attrToProp&&(t=r(t)),function(r){function g(t){var n=[];b===c&&(b=s);for(var r=0;r<t.length;r++){var _=t.charAt(r);b===i&&"<"===_?(w.length&&n.push([i,w]),w="",b=o):">"!==_||function(t){return t===h||t===p}(b)||b===y?b===y&&/-$/.test(w)&&"-"===_?(e.comments&&n.push([f,w.substr(0,w.length-1)],[a]),w="",b=i):b===o&&/^!--$/.test(w)?(e.comments&&n.push([o,w],[u,"comment"],[d]),w=_,b=y):b===i||b===y?w+=_:b===o&&/\s/.test(_)?(n.push([o,w]),w="",b=s):b===o?w+=_:b===s&&/[^\s"'=/]/.test(_)?(b=u,w=_):b===s&&/\s/.test(_)?(w.length&&n.push([u,w]),n.push([m])):b===u&&/\s/.test(_)?(n.push([u,w]),w="",b=l):b===u&&"="===_?(n.push([u,w],[d]),w="",b=c):b===u?w+=_:b!==l&&b!==s||"="!==_?b!==l&&b!==s||/\s/.test(_)?b===c&&'"'===_?b=p:b===c&&"'"===_?b=h:b===p&&'"'===_?(n.push([f,w],[m]),w="",b=s):b===h&&"'"===_?(n.push([f,w],[m]),w="",b=s):b!==c||/\s/.test(_)?b===f&&/\s/.test(_)?(n.push([f,w],[m]),w="",b=s):b!==f&&b!==h&&b!==p||(w+=_):(b=f,r--):(n.push([m]),/[\w-]/.test(_)?(w+=_,b=u):b=s):(n.push([d]),b=c):(b===o?n.push([o,w]):b===u?n.push([u,w]):b===f&&w.length&&n.push([f,w]),n.push([a]),w="",b=i)}return b===i&&w.length?(n.push([i,w]),w=""):b===f&&w.length?(n.push([f,w]),w=""):b===p&&w.length?(n.push([f,w]),w=""):b===h&&w.length?(n.push([f,w]),w=""):b===u&&(n.push([u,w]),w=""),n}for(var b=i,w="",x=arguments.length,S=[],T=0;T<r.length;T++)if(T<x-1){var E=arguments[T+1],A=g(r[T]),k=b;k===p&&(k=f),k===h&&(k=f),k===c&&(k=f),k===s&&(k=u),A.push([0,k,E]),S.push.apply(S,A)}else S.push.apply(S,g(r[T]));var O=[null,{},[]],M=[[O,-1]];for(T=0;T<S.length;T++){var P=M[M.length-1][0],C=(A=S[T])[0];if(C===o&&/^\//.test(A[1])){var j=M[M.length-1][1];M.length>1&&(M.pop(),M[M.length-1][0][2][j]=t(P[0],P[1],P[2].length?P[2]:void 0))}else if(C===o){var R=[A[1],{},[]];P[2].push(R),M.push([R,P[2].length-1])}else if(C===u||0===C&&A[1]===u){for(var F,L="";T<S.length;T++)if(S[T][0]===u)L=v(L,S[T][1]);else{if(0!==S[T][0]||S[T][1]!==u)break;if("object"!=typeof S[T][2]||L)L=v(L,S[T][2]);else for(F in S[T][2])S[T][2].hasOwnProperty(F)&&!P[1][F]&&(P[1][F]=S[T][2][F])}S[T][0]===d&&T++;for(var q=T;T<S.length;T++)if(S[T][0]===f||S[T][0]===u)P[1][L]?""===S[T][1]||(P[1][L]=v(P[1][L],S[T][1])):P[1][L]=n(S[T][1]);else{if(0!==S[T][0]||S[T][1]!==f&&S[T][1]!==u){!L.length||P[1][L]||T!==q||S[T][0]!==a&&S[T][0]!==m||(P[1][L]=L.toLowerCase()),S[T][0]===a&&T--;break}P[1][L]?""===S[T][2]||(P[1][L]=v(P[1][L],S[T][2])):P[1][L]=n(S[T][2])}}else if(C===u)P[1][A[1]]=!0;else if(0===C&&A[1]===u)P[1][A[2]]=!0;else if(C===a){if(function(t){return _.test(t)}(P[0])&&M.length){j=M[M.length-1][1];M.pop(),M[M.length-1][0][2][j]=t(P[0],P[1],P[2].length?P[2]:void 0)}}else if(0===C&&A[1]===i)void 0===A[2]||null===A[2]?A[2]="":A[2]||(A[2]=v("",A[2])),Array.isArray(A[2][0])?P[2].push.apply(P[2],A[2]):P[2].push(A[2]);else if(C===i)P[2].push(A[1]);else if(C!==d&&C!==m)throw new Error("unhandled: "+C)}if(O[2].length>1&&/^\s*$/.test(O[2][0])&&O[2].shift(),O[2].length>2||2===O[2].length&&/\S/.test(O[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(O[2][0])&&"string"==typeof O[2][0][0]&&Array.isArray(O[2][0][2])&&(O[2][0]=t(O[2][0][0],O[2][0][1],O[2][0][2])),O[2][0]}};Object.prototype.hasOwnProperty;var _=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$")},{"hyperscript-attribute-to-property":184}],186:[function(t,e,n){var r=t("vectors/normalize-nd");e.exports=function(t){t=0|+t;var e=[],n=[],i=.5+Math.sqrt(5)/2;e.push([-1,+i,0]),e.push([1,+i,0]),e.push([-1,-i,0]),e.push([1,-i,0]),e.push([0,-1,+i]),e.push([0,1,+i]),e.push([0,-1,-i]),e.push([0,1,-i]),e.push([+i,0,-1]),e.push([+i,0,1]),e.push([-i,0,-1]),e.push([-i,0,1]),n.push([0,11,5]),n.push([0,5,1]),n.push([0,1,7]),n.push([0,7,10]),n.push([0,10,11]),n.push([1,5,9]),n.push([5,11,4]),n.push([11,10,2]),n.push([10,7,6]),n.push([7,1,8]),n.push([3,9,4]),n.push([3,4,2]),n.push([3,2,6]),n.push([3,6,8]),n.push([3,8,9]),n.push([4,9,5]),n.push([2,4,11]),n.push([6,2,10]),n.push([8,6,7]),n.push([9,8,1]);for(var o={cells:n,positions:e};t-- >0;)o=function(t){function e(t,e){var n=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}(t,e),r=function(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}(n),i=a[r];return i||(a[r]=n)}for(var n=t.positions,r=t.cells,i=[],o=[],a={},s=0,u=0;u<r.length;u++){var l=r[u],c=l[0],f=l[1],h=l[2],p=n[c],d=n[f],m=n[h],y=e(p,d),_=e(d,m),v=e(m,p),g=o.indexOf(y);-1===g&&(g=s++,o.push(y));var b=o.indexOf(_);-1===b&&(b=s++,o.push(_));var w=o.indexOf(v);-1===w&&(w=s++,o.push(v));var x=o.indexOf(p);-1===x&&(x=s++,o.push(p));var S=o.indexOf(d);-1===S&&(S=s++,o.push(d));var T=o.indexOf(m);-1===T&&(T=s++,o.push(m)),i.push([x,g,w]),i.push([S,b,g]),i.push([T,w,b]),i.push([g,b,w])}return{cells:i,positions:o}}(o);e=o.positions;for(var a=0;a<e.length;a++)r(e[a]);return o}},{"vectors/normalize-nd":263}],187:[function(t,e,n){"use strict";function r(t){return function(e,n,r,i){var o,a,s=r/i,u=e/n;return(t?s>u:s<u)?a=(o=e)/s:o=(a=n)*s,{width:o,height:a,x:(e-o)/2,y:(n-a)/2}}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(!0),o=r(!1);n.contain=i,n.cover=o},{}],188:[function(t,e,n){"use strict";e.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},{}],189:[function(t,e,n){e.exports=function(t){var e=r.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var r=Object.prototype.toString},{}],190:[function(t,e,n){"use strict";var r=Object.prototype.toString;e.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},{}],191:[function(t,e,n){e.exports=t("./lib/KeyCode.js").default},{"./lib/KeyCode.js":192}],192:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function t(){}var e={KEY_CANCEL:3,KEY_HELP:6,KEY_BACK_SPACE:8,KEY_TAB:9,KEY_CLEAR:12,KEY_RETURN:13,KEY_ENTER:14,KEY_SHIFT:16,KEY_CONTROL:17,KEY_ALT:18,KEY_PAUSE:19,KEY_CAPS_LOCK:20,KEY_ESCAPE:27,KEY_SPACE:32,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_PRINTSCREEN:44,KEY_INSERT:45,KEY_DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_SEMICOLON:59,KEY_EQUALS:61,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,KEY_CONTEXT_MENU:93,KEY_NUMPAD0:96,KEY_NUMPAD1:97,KEY_NUMPAD2:98,KEY_NUMPAD3:99,KEY_NUMPAD4:100,KEY_NUMPAD5:101,KEY_NUMPAD6:102,KEY_NUMPAD7:103,KEY_NUMPAD8:104,KEY_NUMPAD9:105,KEY_MULTIPLY:106,KEY_ADD:107,KEY_SEPARATOR:108,KEY_SUBTRACT:109,KEY_DECIMAL:110,KEY_DIVIDE:111,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123,KEY_F13:124,KEY_F14:125,KEY_F15:126,KEY_F16:127,KEY_F17:128,KEY_F18:129,KEY_F19:130,KEY_F20:131,KEY_F21:132,KEY_F22:133,KEY_F23:134,KEY_F24:135,KEY_NUM_LOCK:144,KEY_SCROLL_LOCK:145,KEY_COMMA:188,KEY_PERIOD:190,KEY_SLASH:191,KEY_BACK_QUOTE:192,KEY_OPEN_BRACKET:219,KEY_BACK_SLASH:220,KEY_CLOSE_BRACKET:221,KEY_QUOTE:222,KEY_META:224};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}()},{}],193:[function(t,e,n){(function(t){(function(){function r(t,e){return t.set(e[0],e[1]),t}function i(t,e){return t.add(e),t}function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function u(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function l(t,e){return!!(null==t?0:t.length)&&_(t,e,0)>-1}function c(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function f(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function h(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function p(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function d(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function m(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function y(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function _(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):y(t,v,n)}function v(t){return t!=t}function g(t,e){var n=null==t?0:t.length;return n?S(t,e)/n:mt}function b(t){return function(e){return null==e?N:e[t]}}function w(t){return function(e){return null==t?N:t[e]}}function x(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function S(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==N&&(n=n===N?o:n+o)}return n}function T(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function E(t){return function(e){return t(e)}}function A(t,e){return f(e,function(e){return t[e]})}function k(t,e){return t.has(e)}function O(t,e){for(var n=-1,r=t.length;++n<r&&_(e,t[n],0)>-1;);return n}function M(t,e){for(var n=t.length;n--&&_(e,t[n],0)>-1;);return n}function P(t){return"\\"+yn[t]}function C(t){return cn.test(t)}function j(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function R(t,e){return function(n){return t(e(n))}}function F(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==G||(t[n]=G,o[i++]=n)}return o}function L(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function q(t){return C(t)?function(t){var e=un.lastIndex=0;for(;un.test(t);)++e;return e}(t):Rn(t)}function D(t){return C(t)?function(t){return t.match(un)||[]}(t):function(t){return t.split("")}(t)}var N,I=200,B="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",z="Expected a function",U="__lodash_hash_undefined__",V=500,G="__lodash_placeholder__",W=1,Y=2,H=4,K=1,X=2,Q=1,J=2,Z=4,$=8,tt=16,et=32,nt=64,rt=128,it=256,ot=512,at=30,st="...",ut=800,lt=16,ct=1,ft=2,ht=1/0,pt=9007199254740991,dt=1.7976931348623157e308,mt=NaN,yt=4294967295,_t=yt-1,vt=yt>>>1,gt=[["ary",rt],["bind",Q],["bindKey",J],["curry",$],["curryRight",tt],["flip",ot],["partial",et],["partialRight",nt],["rearg",it]],bt="[object Arguments]",wt="[object Array]",xt="[object AsyncFunction]",St="[object Boolean]",Tt="[object Date]",Et="[object DOMException]",At="[object Error]",kt="[object Function]",Ot="[object GeneratorFunction]",Mt="[object Map]",Pt="[object Number]",Ct="[object Null]",jt="[object Object]",Rt="[object Promise]",Ft="[object Proxy]",Lt="[object RegExp]",qt="[object Set]",Dt="[object String]",Nt="[object Symbol]",It="[object Undefined]",Bt="[object WeakMap]",zt="[object WeakSet]",Ut="[object ArrayBuffer]",Vt="[object DataView]",Gt="[object Float32Array]",Wt="[object Float64Array]",Yt="[object Int8Array]",Ht="[object Int16Array]",Kt="[object Int32Array]",Xt="[object Uint8Array]",Qt="[object Uint8ClampedArray]",Jt="[object Uint16Array]",Zt="[object Uint32Array]",$t=/\b__p \+= '';/g,te=/\b(__p \+=) '' \+/g,ee=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ne=/&(?:amp|lt|gt|quot|#39);/g,re=/[&<>"']/g,ie=RegExp(ne.source),oe=RegExp(re.source),ae=/<%-([\s\S]+?)%>/g,se=/<%([\s\S]+?)%>/g,ue=/<%=([\s\S]+?)%>/g,le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ce=/^\w*$/,fe=/^\./,he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pe=/[\\^$.*+?()[\]{}|]/g,de=RegExp(pe.source),me=/^\s+|\s+$/g,ye=/^\s+/,_e=/\s+$/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,be=/,? & /,we=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xe=/\\(\\)?/g,Se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Te=/\w*$/,Ee=/^[-+]0x[0-9a-f]+$/i,Ae=/^0b[01]+$/i,ke=/^\[object .+?Constructor\]$/,Oe=/^0o[0-7]+$/i,Me=/^(?:0|[1-9]\d*)$/,Pe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ce=/($^)/,je=/['\n\r\u2028\u2029\\]/g,Re="\\ud800-\\udfff",Fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Le="a-z\\xdf-\\xf6\\xf8-\\xff",qe="A-Z\\xc0-\\xd6\\xd8-\\xde",De="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="["+Re+"]",Ie="["+De+"]",Be="["+Fe+"]",ze="\\d+",Ue="[\\u2700-\\u27bf]",Ve="["+Le+"]",Ge="[^"+Re+De+ze+"\\u2700-\\u27bf"+Le+qe+"]",We="\\ud83c[\\udffb-\\udfff]",Ye="[^"+Re+"]",He="(?:\\ud83c[\\udde6-\\uddff]){2}",Ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="["+qe+"]",Qe="(?:"+Ve+"|"+Ge+")",Je="(?:"+Xe+"|"+Ge+")",Ze="(?:['’](?:d|ll|m|re|s|t|ve))?",$e="(?:['’](?:D|LL|M|RE|S|T|VE))?",tn="(?:"+Be+"|"+We+")"+"?",en="[\\ufe0e\\ufe0f]?",nn=en+tn+("(?:\\u200d(?:"+[Ye,He,Ke].join("|")+")"+en+tn+")*"),rn="(?:"+[Ue,He,Ke].join("|")+")"+nn,on="(?:"+[Ye+Be+"?",Be,He,Ke,Ne].join("|")+")",an=RegExp("['’]","g"),sn=RegExp(Be,"g"),un=RegExp(We+"(?="+We+")|"+on+nn,"g"),ln=RegExp([Xe+"?"+Ve+"+"+Ze+"(?="+[Ie,Xe,"$"].join("|")+")",Je+"+"+$e+"(?="+[Ie,Xe+Qe,"$"].join("|")+")",Xe+"?"+Qe+"+"+Ze,Xe+"+"+$e,"\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",ze,rn].join("|"),"g"),cn=RegExp("[\\u200d"+Re+Fe+"\\ufe0e\\ufe0f]"),fn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pn=-1,dn={};dn[Gt]=dn[Wt]=dn[Yt]=dn[Ht]=dn[Kt]=dn[Xt]=dn[Qt]=dn[Jt]=dn[Zt]=!0,dn[bt]=dn[wt]=dn[Ut]=dn[St]=dn[Vt]=dn[Tt]=dn[At]=dn[kt]=dn[Mt]=dn[Pt]=dn[jt]=dn[Lt]=dn[qt]=dn[Dt]=dn[Bt]=!1;var mn={};mn[bt]=mn[wt]=mn[Ut]=mn[Vt]=mn[St]=mn[Tt]=mn[Gt]=mn[Wt]=mn[Yt]=mn[Ht]=mn[Kt]=mn[Mt]=mn[Pt]=mn[jt]=mn[Lt]=mn[qt]=mn[Dt]=mn[Nt]=mn[Xt]=mn[Qt]=mn[Jt]=mn[Zt]=!0,mn[At]=mn[kt]=mn[Bt]=!1;var yn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_n=parseFloat,vn=parseInt,gn="object"==typeof t&&t&&t.Object===Object&&t,bn="object"==typeof self&&self&&self.Object===Object&&self,wn=gn||bn||Function("return this")(),xn="object"==typeof n&&n&&!n.nodeType&&n,Sn=xn&&"object"==typeof e&&e&&!e.nodeType&&e,Tn=Sn&&Sn.exports===xn,En=Tn&&gn.process,An=function(){try{return En&&En.binding&&En.binding("util")}catch(t){}}(),kn=An&&An.isArrayBuffer,On=An&&An.isDate,Mn=An&&An.isMap,Pn=An&&An.isRegExp,Cn=An&&An.isSet,jn=An&&An.isTypedArray,Rn=b("length"),Fn=w({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ln=w({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),qn=w({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Dn=function t(e){function n(t){if(eo(t)&&!Ws(t)&&!(t instanceof Fe)){if(t instanceof Re)return t;if(Wo.call(t,"__wrapped__"))return Ti(t)}return new Re(t)}function w(){}function Re(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=N}function Fe(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yt,this.__views__=[]}function Le(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function De(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ne(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new De;++e<n;)this.add(t[e])}function Ie(t){var e=this.__data__=new qe(t);this.size=e.size}function Be(t,e){var n=Ws(t),r=!n&&Gs(t),i=!n&&!r&&Hs(t),o=!n&&!r&&!i&&Zs(t),a=n||r||i||o,s=a?T(t.length,No):[],u=s.length;for(var l in t)!e&&!Wo.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ci(l,u))||s.push(l);return s}function ze(t){var e=t.length;return e?t[$n(0,e-1)]:N}function Ue(t,e,n){(n===N||Hi(t[e],n))&&(n!==N||e in t)||Ye(t,e,n)}function Ve(t,e,n){var r=t[e];Wo.call(t,e)&&Hi(r,n)&&(n!==N||e in t)||Ye(t,e,n)}function Ge(t,e){for(var n=t.length;n--;)if(Hi(t[n][0],e))return n;return-1}function We(t,e){return t&&kr(e,yo(e),t)}function Ye(t,e,n){"__proto__"==e&&la?la(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function He(t,e){for(var n=-1,r=e.length,i=Co(r),o=null==t;++n<r;)i[n]=o?N:po(t,e[n]);return i}function Ke(t,e,n){return t==t&&(n!==N&&(t=t<=n?t:n),e!==N&&(t=t>=e?t:e)),t}function Xe(t,e,n,o,s,u){var l,c=e&W,f=e&Y,h=e&H;if(n&&(l=s?n(t,o,s,u):n(t)),l!==N)return l;if(!to(t))return t;var d=Ws(t);if(d){if(l=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Wo.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return Ar(t,l)}else{var m=es(t),y=m==kt||m==Ot;if(Hs(t))return br(t,c);if(m==jt||m==bt||y&&!s){if(l=f||y?{}:ui(t),!c)return f?function(t,e){return kr(t,ts(t),e)}(t,function(t,e){return t&&kr(e,_o(e),t)}(l,t)):function(t,e){return kr(t,$a(t),e)}(t,We(l,t))}else{if(!mn[m])return s?t:{};l=function(t,e,n,o){var a=t.constructor;switch(e){case Ut:return wr(t);case St:case Tt:return new a(+t);case Vt:return function(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,o);case Gt:case Wt:case Yt:case Ht:case Kt:case Xt:case Qt:case Jt:case Zt:return xr(t,o);case Mt:return function(t,e,n){return p(e?n(j(t),W):j(t),r,new t.constructor)}(t,o,n);case Pt:case Dt:return new a(t);case Lt:return function(t){var e=new t.constructor(t.source,Te.exec(t));return e.lastIndex=t.lastIndex,e}(t);case qt:return function(t,e,n){return p(e?n(L(t),W):L(t),i,new t.constructor)}(t,o,n);case Nt:return function(t){return Ba?qo(Ba.call(t)):{}}(t)}}(t,m,Xe,c)}}u||(u=new Ie);var _=u.get(t);if(_)return _;u.set(t,l);var v=d?N:(h?f?ti:$r:f?_o:yo)(t);return a(v||t,function(r,i){v&&(r=t[i=r]),Ve(l,i,Xe(r,e,n,i,t,u))}),l}function Qe(t,e,n){var r=n.length;if(null==t)return!r;for(t=qo(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===N&&!(i in t)||!o(a))return!1}return!0}function Je(t,e,n){if("function"!=typeof t)throw new Io(z);return is(function(){t.apply(N,n)},e)}function Ze(t,e,n,r){var i=-1,o=l,a=!0,s=t.length,u=[],h=e.length;if(!s)return u;n&&(e=f(e,E(n))),r?(o=c,a=!1):e.length>=I&&(o=k,a=!1,e=new Ne(e));t:for(;++i<s;){var p=t[i],d=null==n?p:n(p);if(p=r||0!==p?p:0,a&&d==d){for(var m=h;m--;)if(e[m]===d)continue t;u.push(p)}else o(e,d,r)||u.push(p)}return u}function $e(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===N?a==a&&!oo(a):n(a,s)))var s=a,u=o}return u}function tn(t,e){var n=[];return Va(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function en(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=li),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?en(s,e-1,n,r,i):h(i,s):r||(i[i.length]=s)}return i}function nn(t,e){return t&&Wa(t,e,yo)}function rn(t,e){return t&&Ya(t,e,yo)}function on(t,e){return u(e,function(e){return Ji(t[e])})}function un(t,e){for(var n=0,r=(e=vr(e,t)).length;null!=t&&n<r;)t=t[xi(e[n++])];return n&&n==r?t:N}function cn(t,e,n){var r=e(t);return Ws(t)?r:h(r,n(t))}function yn(t){return null==t?t===N?It:Ct:ua&&ua in qo(t)?function(t){var e=Wo.call(t,ua),n=t[ua];try{t[ua]=N;var r=!0}catch(t){}var i=Ko.call(t);return r&&(e?t[ua]=n:delete t[ua]),i}(t):function(t){return Ko.call(t)}(t)}function gn(t,e){return t>e}function bn(t,e){return null!=t&&Wo.call(t,e)}function xn(t,e){return null!=t&&e in qo(t)}function Sn(t,e,n){for(var r=n?c:l,i=t[0].length,o=t.length,a=o,s=Co(o),u=1/0,h=[];a--;){var p=t[a];a&&e&&(p=f(p,E(e))),u=wa(p.length,u),s[a]=!n&&(e||i>=120&&p.length>=120)?new Ne(a&&p):N}p=t[0];var d=-1,m=s[0];t:for(;++d<i&&h.length<u;){var y=p[d],_=e?e(y):y;if(y=n||0!==y?y:0,!(m?k(m,_):r(h,_,n))){for(a=o;--a;){var v=s[a];if(!(v?k(v,_):r(t[a],_,n)))continue t}m&&m.push(_),h.push(y)}}return h}function En(t,e,n){var r=null==(t=vi(t,e=vr(e,t)))?t:t[xi(Mi(e))];return null==r?N:o(r,t,n)}function An(t){return eo(t)&&yn(t)==bt}function Rn(t,e,n,r,i){return t===e||(null==t||null==e||!eo(t)&&!eo(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a=Ws(t),s=Ws(e),u=a?wt:es(t),l=s?wt:es(e),c=(u=u==bt?jt:u)==jt,f=(l=l==bt?jt:l)==jt,h=u==l;if(h&&Hs(t)){if(!Hs(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new Ie),a||Zs(t)?Jr(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case Vt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ut:return!(t.byteLength!=e.byteLength||!o(new ta(t),new ta(e)));case St:case Tt:case Pt:return Hi(+t,+e);case At:return t.name==e.name&&t.message==e.message;case Lt:case Dt:return t==e+"";case Mt:var s=j;case qt:var u=r&K;if(s||(s=L),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=X,a.set(t,e);var c=Jr(s(t),s(e),r,i,o,a);return a.delete(t),c;case Nt:if(Ba)return Ba.call(t)==Ba.call(e)}return!1}(t,e,u,n,r,i,o);if(!(n&K)){var p=c&&Wo.call(t,"__wrapped__"),d=f&&Wo.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,y=d?e.value():e;return o||(o=new Ie),i(m,y,n,r,o)}}return!!h&&(o||(o=new Ie),function(t,e,n,r,i,o){var a=n&K,s=$r(t),u=s.length,l=$r(e).length;if(u!=l&&!a)return!1;for(var c=u;c--;){var f=s[c];if(!(a?f in e:Wo.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){f=s[c];var m=t[f],y=e[f];if(r)var _=a?r(y,m,f,e,t,o):r(m,y,f,t,e,o);if(!(_===N?m===y||i(m,y,n,r,o):_)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o))}(t,e,n,r,Rn,i))}function Nn(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=qo(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(l===N&&!(u in t))return!1}else{var f=new Ie;if(r)var h=r(l,c,u,t,e,f);if(!(h===N?Rn(c,l,K|X,r,f):h))return!1}}return!0}function In(t){return!(!to(t)||function(t){return!!Ho&&Ho in t}(t))&&(Ji(t)?Jo:ke).test(Si(t))}function Bn(t){return"function"==typeof t?t:null==t?To:"object"==typeof t?Ws(t)?Yn(t[0],t[1]):Wn(t):Oo(t)}function zn(t){if(!di(t))return ga(t);var e=[];for(var n in qo(t))Wo.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Un(t){if(!to(t))return function(t){var e=[];if(null!=t)for(var n in qo(t))e.push(n);return e}(t);var e=di(t),n=[];for(var r in t)("constructor"!=r||!e&&Wo.call(t,r))&&n.push(r);return n}function Vn(t,e){return t<e}function Gn(t,e){var n=-1,r=Ki(t)?Co(t.length):[];return Va(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Wn(t){var e=oi(t);return 1==e.length&&e[0][2]?yi(e[0][0],e[0][1]):function(n){return n===t||Nn(n,t,e)}}function Yn(t,e){return hi(t)&&mi(e)?yi(xi(t),e):function(n){var r=po(n,t);return r===N&&r===e?mo(n,t):Rn(e,r,K|X)}}function Hn(t,e,n,r,i){t!==e&&Wa(e,function(o,a){if(to(o))i||(i=new Ie),function(t,e,n,r,i,o,a){var s=t[n],u=e[n],l=a.get(u);if(l)Ue(t,n,l);else{var c=o?o(s,u,n+"",t,e,a):N,f=c===N;if(f){var h=Ws(u),p=!h&&Hs(u),d=!h&&!p&&Zs(u);c=u,h||p||d?Ws(s)?c=s:Xi(s)?c=Ar(s):p?(f=!1,c=br(u,!0)):d?(f=!1,c=xr(u,!0)):c=[]:ro(u)||Gs(u)?(c=s,Gs(s)?c=fo(s):(!to(s)||r&&Ji(s))&&(c=ui(u))):f=!1}f&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Ue(t,n,c)}}(t,e,a,n,Hn,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):N;s===N&&(s=o),Ue(t,a,s)}},_o)}function Kn(t,e){var n=t.length;if(n)return e+=e<0?n:0,ci(e,n)?t[e]:N}function Xn(t,e,n){var r=-1;return e=f(e.length?e:[To],E(ri())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Gn(t,function(t,n,i){return{criteria:f(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Sr(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function Qn(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=un(t,a);n(s,a)&&nr(o,vr(a,t),s)}return o}function Jn(t,e,n,r){var i=r?function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}:_,o=-1,a=e.length,s=t;for(t===e&&(e=Ar(e)),n&&(s=f(t,E(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&oa.call(s,u,1),oa.call(t,u,1);return t}function Zn(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;ci(i)?oa.call(t,i,1):cr(t,i)}}return t}function $n(t,e){return t+da(Ta()*(e-t+1))}function tr(t,e){var n="";if(!t||e<1||e>pt)return n;do{e%2&&(n+=t),(e=da(e/2))&&(t+=t)}while(e);return n}function er(t,e){return os(_i(t,e,To),t+"")}function nr(t,e,n,r){if(!to(t))return t;for(var i=-1,o=(e=vr(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=xi(e[i]),l=n;if(i!=a){var c=s[u];(l=r?r(c,u,s):N)===N&&(l=to(c)?c:ci(e[i+1])?[]:{})}Ve(s,u,l),s=s[u]}return t}function rr(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Co(i);++r<i;)o[r]=t[r+e];return o}function ir(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=vt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!oo(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return or(t,e,To,n)}function or(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!=e,s=null===e,u=oo(e),l=e===N;i<o;){var c=da((i+o)/2),f=n(t[c]),h=f!==N,p=null===f,d=f==f,m=oo(f);if(a)var y=r||d;else y=l?d&&(r||h):s?d&&h&&(r||!p):u?d&&h&&!p&&(r||!m):!p&&!m&&(r?f<=e:f<e);y?i=c+1:o=c}return wa(o,_t)}function ar(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Hi(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function sr(t){return"number"==typeof t?t:oo(t)?mt:+t}function ur(t){if("string"==typeof t)return t;if(Ws(t))return f(t,ur)+"";if(oo(t))return za?za.call(t):"";var e=t+"";return"0"==e&&1/t==-ht?"-0":e}function lr(t,e,n){var r=-1,i=l,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=c;else if(o>=I){var f=e?null:Ja(t);if(f)return L(f);a=!1,i=k,u=new Ne}else u=e?[]:s;t:for(;++r<o;){var h=t[r],p=e?e(h):h;if(h=n||0!==h?h:0,a&&p==p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(h)}else i(u,p,n)||(u!==s&&u.push(p),s.push(h))}return s}function cr(t,e){return e=vr(e,t),null==(t=vi(t,e))||delete t[xi(Mi(e))]}function fr(t,e,n,r){return nr(t,e,n(un(t,e)),r)}function hr(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?rr(t,r?0:o,r?o+1:i):rr(t,r?o+1:0,r?i:o)}function pr(t,e){var n=t;return n instanceof Fe&&(n=n.value()),p(e,function(t,e){return e.func.apply(e.thisArg,h([t],e.args))},n)}function dr(t,e,n){var r=t.length;if(r<2)return r?lr(t[0]):[];for(var i=-1,o=Co(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Ze(o[i]||a,t[s],e,n));return lr(en(o,1),e,n)}function mr(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:N;n(a,t[r],s)}return a}function yr(t){return Xi(t)?t:[]}function _r(t){return"function"==typeof t?t:To}function vr(t,e){return Ws(t)?t:hi(t,e)?[t]:as(ho(t))}function gr(t,e,n){var r=t.length;return n=n===N?r:n,!e&&n>=r?t:rr(t,e,n)}function br(t,e){if(e)return t.slice();var n=t.length,r=ea?ea(n):new t.constructor(n);return t.copy(r),r}function wr(t){var e=new t.constructor(t.byteLength);return new ta(e).set(new ta(t)),e}function xr(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Sr(t,e){if(t!==e){var n=t!==N,r=null===t,i=t==t,o=oo(t),a=e!==N,s=null===e,u=e==e,l=oo(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Tr(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=ba(o-a,0),c=Co(u+l),f=!r;++s<u;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function Er(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=ba(o-s,0),f=Co(c+l),h=!r;++i<c;)f[i]=t[i];for(var p=i;++u<l;)f[p+u]=e[u];for(;++a<s;)(h||i<o)&&(f[p+n[a]]=t[i++]);return f}function Ar(t,e){var n=-1,r=t.length;for(e||(e=Co(r));++n<r;)e[n]=t[n];return e}function kr(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):N;u===N&&(u=t[s]),i?Ye(n,s,u):Ve(n,s,u)}return n}function Or(t,e){return function(n,r){var i=Ws(n)?function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}:function(t,e,n,r){return Va(t,function(t,i,o){e(r,t,n(t),o)}),r},o=e?e():{};return i(n,t,ri(r,2),o)}}function Mr(t){return er(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:N,a=i>2?n[2]:N;for(o=t.length>3&&"function"==typeof o?(i--,o):N,a&&fi(n[0],n[1],a)&&(o=i<3?N:o,i=1),e=qo(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Pr(t,e){return function(n,r){if(null==n)return n;if(!Ki(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=qo(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Cr(t){return function(e,n,r){for(var i=-1,o=qo(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function jr(t){return function(e){var n=C(e=ho(e))?D(e):N,r=n?n[0]:e.charAt(0),i=n?gr(n,1).join(""):e.slice(1);return r[t]()+i}}function Rr(t){return function(e){return p(xo(wo(e).replace(an,"")),t,"")}}function Fr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ua(t.prototype),r=t.apply(n,e);return to(r)?r:n}}function Lr(t){return function(e,n,r){var i=qo(e);if(!Ki(e)){var o=ri(n,3);e=yo(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:N}}function qr(t){return Zr(function(e){var n=e.length,r=n,i=Re.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new Io(z);if(i&&!a&&"wrapper"==ei(o))var a=new Re([],!0)}for(r=a?r:n;++r<n;){var s=ei(o=e[r]),u="wrapper"==s?Za(o):N;a=u&&pi(u[0])&&u[1]==(rt|$|et|it)&&!u[4].length&&1==u[9]?a[ei(u[0])].apply(a,u[3]):1==o.length&&pi(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Ws(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Dr(t,e,n,r,i,o,a,s,u,l){function c(){for(var _=arguments.length,v=Co(_),g=_;g--;)v[g]=arguments[g];if(d)var b=ni(c),w=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(v,b);if(r&&(v=Tr(v,r,i,d)),o&&(v=Er(v,o,a,d)),_-=w,d&&_<l){var x=F(v,b);return Gr(t,e,Dr,c.placeholder,n,v,x,s,u,l-_)}var S=h?n:this,T=p?S[t]:t;return _=v.length,s?v=function(t,e){for(var n=t.length,r=wa(e.length,n),i=Ar(t);r--;){var o=e[r];t[r]=ci(o,n)?i[o]:N}return t}(v,s):m&&_>1&&v.reverse(),f&&u<_&&(v.length=u),this&&this!==wn&&this instanceof c&&(T=y||Fr(T)),T.apply(S,v)}var f=e&rt,h=e&Q,p=e&J,d=e&($|tt),m=e&ot,y=p?N:Fr(t);return c}function Nr(t,e){return function(n,r){return function(t,e,n,r){return nn(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Ir(t,e){return function(n,r){var i;if(n===N&&r===N)return e;if(n!==N&&(i=n),r!==N){if(i===N)return r;"string"==typeof n||"string"==typeof r?(n=ur(n),r=ur(r)):(n=sr(n),r=sr(r)),i=t(n,r)}return i}}function Br(t){return Zr(function(e){return e=f(e,E(ri())),er(function(n){var r=this;return t(e,function(t){return o(t,r,n)})})})}function zr(t,e){var n=(e=e===N?" ":ur(e)).length;if(n<2)return n?tr(e,t):e;var r=tr(e,pa(t/q(e)));return C(e)?gr(D(r),0,t).join(""):r.slice(0,t)}function Ur(t){return function(e,n,r){return r&&"number"!=typeof r&&fi(e,n,r)&&(n=r=N),e=so(e),n===N?(n=e,e=0):n=so(n),r=r===N?e<n?1:-1:so(r),function(t,e,n,r){for(var i=-1,o=ba(pa((e-t)/(n||1)),0),a=Co(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r,t)}}function Vr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=co(e),n=co(n)),t(e,n)}}function Gr(t,e,n,r,i,o,a,s,u,l){var c=e&$;e|=c?et:nt,(e&=~(c?nt:et))&Z||(e&=~(Q|J));var f=[t,e,i,c?o:N,c?a:N,c?N:o,c?N:a,s,u,l],h=n.apply(N,f);return pi(t)&&rs(h,f),h.placeholder=r,gi(h,t,e)}function Wr(t){var e=Lo[t];return function(t,n){if(t=co(t),n=null==n?0:wa(uo(n),292)){var r=(ho(t)+"e").split("e");return+((r=(ho(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}function Yr(t){return function(e){var n=es(e);return n==Mt?j(e):n==qt?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return f(e,function(e){return[e,t[e]]})}(e,t(e))}}function Hr(t,e,n,r,i,a,s,u){var l=e&J;if(!l&&"function"!=typeof t)throw new Io(z);var c=r?r.length:0;if(c||(e&=~(et|nt),r=i=N),s=s===N?s:ba(uo(s),0),u=u===N?u:uo(u),c-=i?i.length:0,e&nt){var f=r,h=i;r=i=N}var p=l?N:Za(t),d=[t,e,n,r,i,f,h,a,s,u];if(p&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(Q|J|rt),a=r==rt&&n==$||r==rt&&n==it&&t[7].length<=e[8]||r==(rt|it)&&e[7].length<=e[8]&&n==$;if(!o&&!a)return t;r&Q&&(t[2]=e[2],i|=n&Q?0:Z);var s=e[3];if(s){var u=t[3];t[3]=u?Tr(u,s,e[4]):s,t[4]=u?F(t[3],G):e[4]}(s=e[5])&&(u=t[5],t[5]=u?Er(u,s,e[6]):s,t[6]=u?F(t[5],G):e[6]),(s=e[7])&&(t[7]=s),r&rt&&(t[8]=null==t[8]?e[8]:wa(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(d,p),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],!(u=d[9]=d[9]===N?l?0:t.length:ba(d[9]-c,0))&&e&($|tt)&&(e&=~($|tt)),e&&e!=Q)m=e==$||e==tt?function(t,e,n){function r(){for(var a=arguments.length,s=Co(a),u=a,l=ni(r);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:F(s,l);return(a-=c.length)<n?Gr(t,e,Dr,r.placeholder,N,s,c,N,N,n-a):o(this&&this!==wn&&this instanceof r?i:t,this,s)}var i=Fr(t);return r}(t,e,u):e!=et&&e!=(Q|et)||i.length?Dr.apply(N,d):function(t,e,n,r){function i(){for(var e=-1,u=arguments.length,l=-1,c=r.length,f=Co(c+u),h=this&&this!==wn&&this instanceof i?s:t;++l<c;)f[l]=r[l];for(;u--;)f[l++]=arguments[++e];return o(h,a?n:this,f)}var a=e&Q,s=Fr(t);return i}(t,e,n,r);else var m=function(t,e,n){function r(){return(this&&this!==wn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&Q,o=Fr(t);return r}(t,e,n);return gi((p?Ha:rs)(m,d),t,e)}function Kr(t,e,n,r){return t===N||Hi(t,Uo[n])&&!Wo.call(r,n)?e:t}function Xr(t,e,n,r,i,o){return to(t)&&to(e)&&(o.set(e,t),Hn(t,e,N,Xr,o),o.delete(e)),t}function Qr(t){return ro(t)?N:t}function Jr(t,e,n,r,i,o){var a=n&K,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,f=!0,h=n&X?new Ne:N;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],m=e[c];if(r)var y=a?r(m,p,c,e,t,o):r(p,m,c,t,e,o);if(y!==N){if(y)continue;f=!1;break}if(h){if(!d(e,function(t,e){if(!k(h,e)&&(p===t||i(p,t,n,r,o)))return h.push(e)})){f=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Zr(t){return os(_i(t,N,ki),t+"")}function $r(t){return cn(t,yo,$a)}function ti(t){return cn(t,_o,ts)}function ei(t){for(var e=t.name+"",n=Ra[e],r=Wo.call(Ra,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function ni(t){return(Wo.call(n,"placeholder")?n:t).placeholder}function ri(){var t=n.iteratee||Eo;return t=t===Eo?Bn:t,arguments.length?t(arguments[0],arguments[1]):t}function ii(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function oi(t){for(var e=yo(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,mi(i)]}return e}function ai(t,e){var n=function(t,e){return null==t?N:t[e]}(t,e);return In(n)?n:N}function si(t,e,n){for(var r=-1,i=(e=vr(e,t)).length,o=!1;++r<i;){var a=xi(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&$i(i)&&ci(a,i)&&(Ws(t)||Gs(t))}function ui(t){return"function"!=typeof t.constructor||di(t)?{}:Ua(na(t))}function li(t){return Ws(t)||Gs(t)||!!(aa&&t&&t[aa])}function ci(t,e){return!!(e=null==e?pt:e)&&("number"==typeof t||Me.test(t))&&t>-1&&t%1==0&&t<e}function fi(t,e,n){if(!to(n))return!1;var r=typeof e;return!!("number"==r?Ki(n)&&ci(e,n.length):"string"==r&&e in n)&&Hi(n[e],t)}function hi(t,e){if(Ws(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!oo(t))||ce.test(t)||!le.test(t)||null!=e&&t in qo(e)}function pi(t){var e=ei(t),r=n[e];if("function"!=typeof r||!(e in Fe.prototype))return!1;if(t===r)return!0;var i=Za(r);return!!i&&t===i[0]}function di(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Uo)}function mi(t){return t==t&&!to(t)}function yi(t,e){return function(n){return null!=n&&n[t]===e&&(e!==N||t in qo(n))}}function _i(t,e,n){return e=ba(e===N?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=ba(r.length-e,0),s=Co(a);++i<a;)s[i]=r[e+i];i=-1;for(var u=Co(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),o(t,this,u)}}function vi(t,e){return e.length<2?t:un(t,rr(e,0,-1))}function gi(t,e,n){var r=e+"";return os(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ve,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return a(gt,function(n){var r="_."+n[0];e&n[1]&&!l(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(ge);return e?e[1].split(be):[]}(r),n)))}function bi(t){var e=0,n=0;return function(){var r=xa(),i=lt-(r-n);if(n=r,i>0){if(++e>=ut)return arguments[0]}else e=0;return t.apply(N,arguments)}}function wi(t,e){var n=-1,r=t.length,i=r-1;for(e=e===N?r:e;++n<e;){var o=$n(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function xi(t){if("string"==typeof t||oo(t))return t;var e=t+"";return"0"==e&&1/t==-ht?"-0":e}function Si(t){if(null!=t){try{return Go.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ti(t){if(t instanceof Fe)return t.clone();var e=new Re(t.__wrapped__,t.__chain__);return e.__actions__=Ar(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Ei(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:uo(n);return i<0&&(i=ba(r+i,0)),y(t,ri(e,3),i)}function Ai(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==N&&(i=uo(n),i=n<0?ba(r+i,0):wa(i,r-1)),y(t,ri(e,3),i,!0)}function ki(t){return null!=t&&t.length?en(t,1):[]}function Oi(t){return t&&t.length?t[0]:N}function Mi(t){var e=null==t?0:t.length;return e?t[e-1]:N}function Pi(t,e){return t&&t.length&&e&&e.length?Jn(t,e):t}function Ci(t){return null==t?t:Ea.call(t)}function ji(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(Xi(t))return e=ba(t.length,e),!0}),T(e,function(e){return f(t,b(e))})}function Ri(t,e){if(!t||!t.length)return[];var n=ji(t);return null==e?n:f(n,function(t){return o(e,N,t)})}function Fi(t){var e=n(t);return e.__chain__=!0,e}function Li(t,e){return e(t)}function qi(){return this}function Di(t,e){return(Ws(t)?a:Va)(t,ri(e,3))}function Ni(t,e){return(Ws(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:Ga)(t,ri(e,3))}function Ii(t,e){return(Ws(t)?f:Gn)(t,ri(e,3))}function Bi(t,e,n){return e=n?N:e,e=t&&null==e?t.length:e,Hr(t,rt,N,N,N,N,e)}function zi(t,e){var n;if("function"!=typeof e)throw new Io(z);return t=uo(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=N),n}}function Ui(t,e,n){var r=Hr(t,$,N,N,N,N,N,e=n?N:e);return r.placeholder=Ui.placeholder,r}function Vi(t,e,n){var r=Hr(t,tt,N,N,N,N,N,e=n?N:e);return r.placeholder=Vi.placeholder,r}function Gi(t,e,n){function r(e){var n=u,r=l;return u=l=N,d=e,f=t.apply(r,n)}function i(t){var n=t-p;return p===N||n>=e||n<0||y&&t-d>=c}function o(){var t=Rs();if(i(t))return a(t);h=is(o,function(t){var n=e-(t-p);return y?wa(n,c-(t-d)):n}(t))}function a(t){return h=N,_&&u?r(t):(u=l=N,f)}function s(){var t=Rs(),n=i(t);if(u=arguments,l=this,p=t,n){if(h===N)return function(t){return d=t,h=is(o,e),m?r(t):f}(p);if(y)return h=is(o,e),r(p)}return h===N&&(h=is(o,e)),f}var u,l,c,f,h,p,d=0,m=!1,y=!1,_=!0;if("function"!=typeof t)throw new Io(z);return e=co(e)||0,to(n)&&(m=!!n.leading,c=(y="maxWait"in n)?ba(co(n.maxWait)||0,e):c,_="trailing"in n?!!n.trailing:_),s.cancel=function(){h!==N&&Qa(h),d=0,u=p=l=h=N},s.flush=function(){return h===N?f:a(Rs())},s}function Wi(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Io(z);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wi.Cache||De),n}function Yi(t){if("function"!=typeof t)throw new Io(z);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Hi(t,e){return t===e||t!=t&&e!=e}function Ki(t){return null!=t&&$i(t.length)&&!Ji(t)}function Xi(t){return eo(t)&&Ki(t)}function Qi(t){if(!eo(t))return!1;var e=yn(t);return e==At||e==Et||"string"==typeof t.message&&"string"==typeof t.name&&!ro(t)}function Ji(t){if(!to(t))return!1;var e=yn(t);return e==kt||e==Ot||e==xt||e==Ft}function Zi(t){return"number"==typeof t&&t==uo(t)}function $i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=pt}function to(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function eo(t){return null!=t&&"object"==typeof t}function no(t){return"number"==typeof t||eo(t)&&yn(t)==Pt}function ro(t){if(!eo(t)||yn(t)!=jt)return!1;var e=na(t);if(null===e)return!0;var n=Wo.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Go.call(n)==Xo}function io(t){return"string"==typeof t||!Ws(t)&&eo(t)&&yn(t)==Dt}function oo(t){return"symbol"==typeof t||eo(t)&&yn(t)==Nt}function ao(t){if(!t)return[];if(Ki(t))return io(t)?D(t):Ar(t);if(sa&&t[sa])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[sa]());var e=es(t);return(e==Mt?j:e==qt?L:go)(t)}function so(t){return t?(t=co(t))===ht||t===-ht?(t<0?-1:1)*dt:t==t?t:0:0===t?t:0}function uo(t){var e=so(t),n=e%1;return e==e?n?e-n:e:0}function lo(t){return t?Ke(uo(t),0,yt):0}function co(t){if("number"==typeof t)return t;if(oo(t))return mt;if(to(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=to(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(me,"");var n=Ae.test(t);return n||Oe.test(t)?vn(t.slice(2),n?2:8):Ee.test(t)?mt:+t}function fo(t){return kr(t,_o(t))}function ho(t){return null==t?"":ur(t)}function po(t,e,n){var r=null==t?N:un(t,e);return r===N?n:r}function mo(t,e){return null!=t&&si(t,e,xn)}function yo(t){return Ki(t)?Be(t):zn(t)}function _o(t){return Ki(t)?Be(t,!0):Un(t)}function vo(t,e){if(null==t)return{};var n=f(ti(t),function(t){return[t]});return e=ri(e),Qn(t,n,function(t,n){return e(t,n[0])})}function go(t){return null==t?[]:A(t,yo(t))}function bo(t){return Tu(ho(t).toLowerCase())}function wo(t){return(t=ho(t))&&t.replace(Pe,Fn).replace(sn,"")}function xo(t,e,n){return t=ho(t),(e=n?N:e)===N?function(t){return fn.test(t)}(t)?function(t){return t.match(ln)||[]}(t):function(t){return t.match(we)||[]}(t):t.match(e)||[]}function So(t){return function(){return t}}function To(t){return t}function Eo(t){return Bn("function"==typeof t?t:Xe(t,W))}function Ao(t,e,n){var r=yo(e),i=on(e,r);null!=n||to(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=on(e,yo(e)));var o=!(to(n)&&"chain"in n&&!n.chain),s=Ji(t);return a(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ar(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,h([this.value()],arguments))})}),t}function ko(){}function Oo(t){return hi(t)?b(xi(t)):function(t){return function(e){return un(e,t)}}(t)}function Mo(){return[]}function Po(){return!1}var Co=(e=null==e?wn:Dn.defaults(wn.Object(),e,Dn.pick(wn,hn))).Array,jo=e.Date,Ro=e.Error,Fo=e.Function,Lo=e.Math,qo=e.Object,Do=e.RegExp,No=e.String,Io=e.TypeError,Bo=Co.prototype,zo=Fo.prototype,Uo=qo.prototype,Vo=e["__core-js_shared__"],Go=zo.toString,Wo=Uo.hasOwnProperty,Yo=0,Ho=function(){var t=/[^.]+$/.exec(Vo&&Vo.keys&&Vo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ko=Uo.toString,Xo=Go.call(qo),Qo=wn._,Jo=Do("^"+Go.call(Wo).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zo=Tn?e.Buffer:N,$o=e.Symbol,ta=e.Uint8Array,ea=Zo?Zo.allocUnsafe:N,na=R(qo.getPrototypeOf,qo),ra=qo.create,ia=Uo.propertyIsEnumerable,oa=Bo.splice,aa=$o?$o.isConcatSpreadable:N,sa=$o?$o.iterator:N,ua=$o?$o.toStringTag:N,la=function(){try{var t=ai(qo,"defineProperty");return t({},"",{}),t}catch(t){}}(),ca=e.clearTimeout!==wn.clearTimeout&&e.clearTimeout,fa=jo&&jo.now!==wn.Date.now&&jo.now,ha=e.setTimeout!==wn.setTimeout&&e.setTimeout,pa=Lo.ceil,da=Lo.floor,ma=qo.getOwnPropertySymbols,ya=Zo?Zo.isBuffer:N,_a=e.isFinite,va=Bo.join,ga=R(qo.keys,qo),ba=Lo.max,wa=Lo.min,xa=jo.now,Sa=e.parseInt,Ta=Lo.random,Ea=Bo.reverse,Aa=ai(e,"DataView"),ka=ai(e,"Map"),Oa=ai(e,"Promise"),Ma=ai(e,"Set"),Pa=ai(e,"WeakMap"),Ca=ai(qo,"create"),ja=Pa&&new Pa,Ra={},Fa=Si(Aa),La=Si(ka),qa=Si(Oa),Da=Si(Ma),Na=Si(Pa),Ia=$o?$o.prototype:N,Ba=Ia?Ia.valueOf:N,za=Ia?Ia.toString:N,Ua=function(){function t(){}return function(e){if(!to(e))return{};if(ra)return ra(e);t.prototype=e;var n=new t;return t.prototype=N,n}}();n.templateSettings={escape:ae,evaluate:se,interpolate:ue,variable:"",imports:{_:n}},(n.prototype=w.prototype).constructor=n,(Re.prototype=Ua(w.prototype)).constructor=Re,(Fe.prototype=Ua(w.prototype)).constructor=Fe,Le.prototype.clear=function(){this.__data__=Ca?Ca(null):{},this.size=0},Le.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Le.prototype.get=function(t){var e=this.__data__;if(Ca){var n=e[t];return n===U?N:n}return Wo.call(e,t)?e[t]:N},Le.prototype.has=function(t){var e=this.__data__;return Ca?e[t]!==N:Wo.call(e,t)},Le.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ca&&e===N?U:e,this},qe.prototype.clear=function(){this.__data__=[],this.size=0},qe.prototype.delete=function(t){var e=this.__data__,n=Ge(e,t);return!(n<0||(n==e.length-1?e.pop():oa.call(e,n,1),--this.size,0))},qe.prototype.get=function(t){var e=this.__data__,n=Ge(e,t);return n<0?N:e[n][1]},qe.prototype.has=function(t){return Ge(this.__data__,t)>-1},qe.prototype.set=function(t,e){var n=this.__data__,r=Ge(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},De.prototype.clear=function(){this.size=0,this.__data__={hash:new Le,map:new(ka||qe),string:new Le}},De.prototype.delete=function(t){var e=ii(this,t).delete(t);return this.size-=e?1:0,e},De.prototype.get=function(t){return ii(this,t).get(t)},De.prototype.has=function(t){return ii(this,t).has(t)},De.prototype.set=function(t,e){var n=ii(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ne.prototype.add=Ne.prototype.push=function(t){return this.__data__.set(t,U),this},Ne.prototype.has=function(t){return this.__data__.has(t)},Ie.prototype.clear=function(){this.__data__=new qe,this.size=0},Ie.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ie.prototype.get=function(t){return this.__data__.get(t)},Ie.prototype.has=function(t){return this.__data__.has(t)},Ie.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qe){var r=n.__data__;if(!ka||r.length<I-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new De(r)}return n.set(t,e),this.size=n.size,this};var Va=Pr(nn),Ga=Pr(rn,!0),Wa=Cr(),Ya=Cr(!0),Ha=ja?function(t,e){return ja.set(t,e),t}:To,Ka=la?function(t,e){return la(t,"toString",{configurable:!0,enumerable:!1,value:So(e),writable:!0})}:To,Xa=er,Qa=ca||function(t){return wn.clearTimeout(t)},Ja=Ma&&1/L(new Ma([,-0]))[1]==ht?function(t){return new Ma(t)}:ko,Za=ja?function(t){return ja.get(t)}:ko,$a=ma?function(t){return null==t?[]:(t=qo(t),u(ma(t),function(e){return ia.call(t,e)}))}:Mo,ts=ma?function(t){for(var e=[];t;)h(e,$a(t)),t=na(t);return e}:Mo,es=yn;(Aa&&es(new Aa(new ArrayBuffer(1)))!=Vt||ka&&es(new ka)!=Mt||Oa&&es(Oa.resolve())!=Rt||Ma&&es(new Ma)!=qt||Pa&&es(new Pa)!=Bt)&&(es=function(t){var e=yn(t),n=e==jt?t.constructor:N,r=n?Si(n):"";if(r)switch(r){case Fa:return Vt;case La:return Mt;case qa:return Rt;case Da:return qt;case Na:return Bt}return e});var ns=Vo?Ji:Po,rs=bi(Ha),is=ha||function(t,e){return wn.setTimeout(t,e)},os=bi(Ka),as=function(t){var e=Wi(t,function(t){return n.size===V&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return fe.test(t)&&e.push(""),t.replace(he,function(t,n,r,i){e.push(r?i.replace(xe,"$1"):n||t)}),e}),ss=er(function(t,e){return Xi(t)?Ze(t,en(e,1,Xi,!0)):[]}),us=er(function(t,e){var n=Mi(e);return Xi(n)&&(n=N),Xi(t)?Ze(t,en(e,1,Xi,!0),ri(n,2)):[]}),ls=er(function(t,e){var n=Mi(e);return Xi(n)&&(n=N),Xi(t)?Ze(t,en(e,1,Xi,!0),N,n):[]}),cs=er(function(t){var e=f(t,yr);return e.length&&e[0]===t[0]?Sn(e):[]}),fs=er(function(t){var e=Mi(t),n=f(t,yr);return e===Mi(n)?e=N:n.pop(),n.length&&n[0]===t[0]?Sn(n,ri(e,2)):[]}),hs=er(function(t){var e=Mi(t),n=f(t,yr);return(e="function"==typeof e?e:N)&&n.pop(),n.length&&n[0]===t[0]?Sn(n,N,e):[]}),ps=er(Pi),ds=Zr(function(t,e){var n=null==t?0:t.length,r=He(t,e);return Zn(t,f(e,function(t){return ci(t,n)?+t:t}).sort(Sr)),r}),ms=er(function(t){return lr(en(t,1,Xi,!0))}),ys=er(function(t){var e=Mi(t);return Xi(e)&&(e=N),lr(en(t,1,Xi,!0),ri(e,2))}),_s=er(function(t){var e=Mi(t);return e="function"==typeof e?e:N,lr(en(t,1,Xi,!0),N,e)}),vs=er(function(t,e){return Xi(t)?Ze(t,e):[]}),gs=er(function(t){return dr(u(t,Xi))}),bs=er(function(t){var e=Mi(t);return Xi(e)&&(e=N),dr(u(t,Xi),ri(e,2))}),ws=er(function(t){var e=Mi(t);return e="function"==typeof e?e:N,dr(u(t,Xi),N,e)}),xs=er(ji),Ss=er(function(t){var e=t.length,n=e>1?t[e-1]:N;return n="function"==typeof n?(t.pop(),n):N,Ri(t,n)}),Ts=Zr(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return He(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Fe&&ci(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Li,args:[i],thisArg:N}),new Re(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(N),t})):this.thru(i)}),Es=Or(function(t,e,n){Wo.call(t,n)?++t[n]:Ye(t,n,1)}),As=Lr(Ei),ks=Lr(Ai),Os=Or(function(t,e,n){Wo.call(t,n)?t[n].push(e):Ye(t,n,[e])}),Ms=er(function(t,e,n){var r=-1,i="function"==typeof e,a=Ki(t)?Co(t.length):[];return Va(t,function(t){a[++r]=i?o(e,t,n):En(t,e,n)}),a}),Ps=Or(function(t,e,n){Ye(t,n,e)}),Cs=Or(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),js=er(function(t,e){if(null==t)return[];var n=e.length;return n>1&&fi(t,e[0],e[1])?e=[]:n>2&&fi(e[0],e[1],e[2])&&(e=[e[0]]),Xn(t,en(e,1),[])}),Rs=fa||function(){return wn.Date.now()},Fs=er(function(t,e,n){var r=Q;if(n.length){var i=F(n,ni(Fs));r|=et}return Hr(t,r,e,n,i)}),Ls=er(function(t,e,n){var r=Q|J;if(n.length){var i=F(n,ni(Ls));r|=et}return Hr(e,r,t,n,i)}),qs=er(function(t,e){return Je(t,1,e)}),Ds=er(function(t,e,n){return Je(t,co(e)||0,n)});Wi.Cache=De;var Ns=Xa(function(t,e){var n=(e=1==e.length&&Ws(e[0])?f(e[0],E(ri())):f(en(e,1),E(ri()))).length;return er(function(r){for(var i=-1,a=wa(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)})}),Is=er(function(t,e){var n=F(e,ni(Is));return Hr(t,et,N,e,n)}),Bs=er(function(t,e){var n=F(e,ni(Bs));return Hr(t,nt,N,e,n)}),zs=Zr(function(t,e){return Hr(t,it,N,N,N,e)}),Us=Vr(gn),Vs=Vr(function(t,e){return t>=e}),Gs=An(function(){return arguments}())?An:function(t){return eo(t)&&Wo.call(t,"callee")&&!ia.call(t,"callee")},Ws=Co.isArray,Ys=kn?E(kn):function(t){return eo(t)&&yn(t)==Ut},Hs=ya||Po,Ks=On?E(On):function(t){return eo(t)&&yn(t)==Tt},Xs=Mn?E(Mn):function(t){return eo(t)&&es(t)==Mt},Qs=Pn?E(Pn):function(t){return eo(t)&&yn(t)==Lt},Js=Cn?E(Cn):function(t){return eo(t)&&es(t)==qt},Zs=jn?E(jn):function(t){return eo(t)&&$i(t.length)&&!!dn[yn(t)]},$s=Vr(Vn),tu=Vr(function(t,e){return t<=e}),eu=Mr(function(t,e){if(di(e)||Ki(e))kr(e,yo(e),t);else for(var n in e)Wo.call(e,n)&&Ve(t,n,e[n])}),nu=Mr(function(t,e){kr(e,_o(e),t)}),ru=Mr(function(t,e,n,r){kr(e,_o(e),t,r)}),iu=Mr(function(t,e,n,r){kr(e,yo(e),t,r)}),ou=Zr(He),au=er(function(t){return t.push(N,Kr),o(ru,N,t)}),su=er(function(t){return t.push(N,Xr),o(hu,N,t)}),uu=Nr(function(t,e,n){t[e]=n},So(To)),lu=Nr(function(t,e,n){Wo.call(t,e)?t[e].push(n):t[e]=[n]},ri),cu=er(En),fu=Mr(function(t,e,n){Hn(t,e,n)}),hu=Mr(function(t,e,n,r){Hn(t,e,n,r)}),pu=Zr(function(t,e){var n={};if(null==t)return n;var r=!1;e=f(e,function(e){return e=vr(e,t),r||(r=e.length>1),e}),kr(t,ti(t),n),r&&(n=Xe(n,W|Y|H,Qr));for(var i=e.length;i--;)cr(n,e[i]);return n}),du=Zr(function(t,e){return null==t?{}:function(t,e){return Qn(t,e,function(e,n){return mo(t,n)})}(t,e)}),mu=Yr(yo),yu=Yr(_o),_u=Rr(function(t,e,n){return e=e.toLowerCase(),t+(n?bo(e):e)}),vu=Rr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),gu=Rr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),bu=jr("toLowerCase"),wu=Rr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),xu=Rr(function(t,e,n){return t+(n?" ":"")+Tu(e)}),Su=Rr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Tu=jr("toUpperCase"),Eu=er(function(t,e){try{return o(t,N,e)}catch(t){return Qi(t)?t:new Ro(t)}}),Au=Zr(function(t,e){return a(e,function(e){e=xi(e),Ye(t,e,Fs(t[e],t))}),t}),ku=qr(),Ou=qr(!0),Mu=er(function(t,e){return function(n){return En(n,t,e)}}),Pu=er(function(t,e){return function(n){return En(t,n,e)}}),Cu=Br(f),ju=Br(s),Ru=Br(d),Fu=Ur(),Lu=Ur(!0),qu=Ir(function(t,e){return t+e},0),Du=Wr("ceil"),Nu=Ir(function(t,e){return t/e},1),Iu=Wr("floor"),Bu=Ir(function(t,e){return t*e},1),zu=Wr("round"),Uu=Ir(function(t,e){return t-e},0);return n.after=function(t,e){if("function"!=typeof e)throw new Io(z);return t=uo(t),function(){if(--t<1)return e.apply(this,arguments)}},n.ary=Bi,n.assign=eu,n.assignIn=nu,n.assignInWith=ru,n.assignWith=iu,n.at=ou,n.before=zi,n.bind=Fs,n.bindAll=Au,n.bindKey=Ls,n.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ws(t)?t:[t]},n.chain=Fi,n.chunk=function(t,e,n){e=(n?fi(t,e,n):e===N)?1:ba(uo(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Co(pa(r/e));i<r;)a[o++]=rr(t,i,i+=e);return a},n.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},n.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Co(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return h(Ws(n)?Ar(n):[n],en(e,1))},n.cond=function(t){var e=null==t?0:t.length,n=ri();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new Io(z);return[n(t[0]),t[1]]}):[],er(function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}})},n.conforms=function(t){return function(t){var e=yo(t);return function(n){return Qe(n,t,e)}}(Xe(t,W))},n.constant=So,n.countBy=Es,n.create=function(t,e){var n=Ua(t);return null==e?n:We(n,e)},n.curry=Ui,n.curryRight=Vi,n.debounce=Gi,n.defaults=au,n.defaultsDeep=su,n.defer=qs,n.delay=Ds,n.difference=ss,n.differenceBy=us,n.differenceWith=ls,n.drop=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===N?1:uo(e),rr(t,e<0?0:e,r)):[]},n.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===N?1:uo(e),e=r-e,rr(t,0,e<0?0:e)):[]},n.dropRightWhile=function(t,e){return t&&t.length?hr(t,ri(e,3),!0,!0):[]},n.dropWhile=function(t,e){return t&&t.length?hr(t,ri(e,3),!0):[]},n.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&fi(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=uo(n))<0&&(n=-n>i?0:i+n),(r=r===N||r>i?i:uo(r))<0&&(r+=i),r=n>r?0:lo(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},n.filter=function(t,e){return(Ws(t)?u:tn)(t,ri(e,3))},n.flatMap=function(t,e){return en(Ii(t,e),1)},n.flatMapDeep=function(t,e){return en(Ii(t,e),ht)},n.flatMapDepth=function(t,e,n){return n=n===N?1:uo(n),en(Ii(t,e),n)},n.flatten=ki,n.flattenDeep=function(t){return null!=t&&t.length?en(t,ht):[]},n.flattenDepth=function(t,e){return null!=t&&t.length?(e=e===N?1:uo(e),en(t,e)):[]},n.flip=function(t){return Hr(t,ot)},n.flow=ku,n.flowRight=Ou,n.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},n.functions=function(t){return null==t?[]:on(t,yo(t))},n.functionsIn=function(t){return null==t?[]:on(t,_o(t))},n.groupBy=Os,n.initial=function(t){return null!=t&&t.length?rr(t,0,-1):[]},n.intersection=cs,n.intersectionBy=fs,n.intersectionWith=hs,n.invert=uu,n.invertBy=lu,n.invokeMap=Ms,n.iteratee=Eo,n.keyBy=Ps,n.keys=yo,n.keysIn=_o,n.map=Ii,n.mapKeys=function(t,e){var n={};return e=ri(e,3),nn(t,function(t,r,i){Ye(n,e(t,r,i),t)}),n},n.mapValues=function(t,e){var n={};return e=ri(e,3),nn(t,function(t,r,i){Ye(n,r,e(t,r,i))}),n},n.matches=function(t){return Wn(Xe(t,W))},n.matchesProperty=function(t,e){return Yn(t,Xe(e,W))},n.memoize=Wi,n.merge=fu,n.mergeWith=hu,n.method=Mu,n.methodOf=Pu,n.mixin=Ao,n.negate=Yi,n.nthArg=function(t){return t=uo(t),er(function(e){return Kn(e,t)})},n.omit=pu,n.omitBy=function(t,e){return vo(t,Yi(ri(e)))},n.once=function(t){return zi(2,t)},n.orderBy=function(t,e,n,r){return null==t?[]:(Ws(e)||(e=null==e?[]:[e]),n=r?N:n,Ws(n)||(n=null==n?[]:[n]),Xn(t,e,n))},n.over=Cu,n.overArgs=Ns,n.overEvery=ju,n.overSome=Ru,n.partial=Is,n.partialRight=Bs,n.partition=Cs,n.pick=du,n.pickBy=vo,n.property=Oo,n.propertyOf=function(t){return function(e){return null==t?N:un(t,e)}},n.pull=ps,n.pullAll=Pi,n.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Jn(t,e,ri(n,2)):t},n.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Jn(t,e,N,n):t},n.pullAt=ds,n.range=Fu,n.rangeRight=Lu,n.rearg=zs,n.reject=function(t,e){return(Ws(t)?u:tn)(t,Yi(ri(e,3)))},n.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=ri(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Zn(t,i),n},n.rest=function(t,e){if("function"!=typeof t)throw new Io(z);return e=e===N?e:uo(e),er(t,e)},n.reverse=Ci,n.sampleSize=function(t,e,n){return e=(n?fi(t,e,n):e===N)?1:uo(e),(Ws(t)?function(t,e){return wi(Ar(t),Ke(e,0,t.length))}:function(t,e){var n=go(t);return wi(n,Ke(e,0,n.length))})(t,e)},n.set=function(t,e,n){return null==t?t:nr(t,e,n)},n.setWith=function(t,e,n,r){return r="function"==typeof r?r:N,null==t?t:nr(t,e,n,r)},n.shuffle=function(t){return(Ws(t)?function(t){return wi(Ar(t))}:function(t){return wi(go(t))})(t)},n.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&fi(t,e,n)?(e=0,n=r):(e=null==e?0:uo(e),n=n===N?r:uo(n)),rr(t,e,n)):[]},n.sortBy=js,n.sortedUniq=function(t){return t&&t.length?ar(t):[]},n.sortedUniqBy=function(t,e){return t&&t.length?ar(t,ri(e,2)):[]},n.split=function(t,e,n){return n&&"number"!=typeof n&&fi(t,e,n)&&(e=n=N),(n=n===N?yt:n>>>0)?(t=ho(t))&&("string"==typeof e||null!=e&&!Qs(e))&&!(e=ur(e))&&C(t)?gr(D(t),0,n):t.split(e,n):[]},n.spread=function(t,e){if("function"!=typeof t)throw new Io(z);return e=null==e?0:ba(uo(e),0),er(function(n){var r=n[e],i=gr(n,0,e);return r&&h(i,r),o(t,this,i)})},n.tail=function(t){var e=null==t?0:t.length;return e?rr(t,1,e):[]},n.take=function(t,e,n){return t&&t.length?(e=n||e===N?1:uo(e),rr(t,0,e<0?0:e)):[]},n.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===N?1:uo(e),e=r-e,rr(t,e<0?0:e,r)):[]},n.takeRightWhile=function(t,e){return t&&t.length?hr(t,ri(e,3),!1,!0):[]},n.takeWhile=function(t,e){return t&&t.length?hr(t,ri(e,3)):[]},n.tap=function(t,e){return e(t),t},n.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Io(z);return to(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Gi(t,e,{leading:r,maxWait:e,trailing:i})},n.thru=Li,n.toArray=ao,n.toPairs=mu,n.toPairsIn=yu,n.toPath=function(t){return Ws(t)?f(t,xi):oo(t)?[t]:Ar(as(ho(t)))},n.toPlainObject=fo,n.transform=function(t,e,n){var r=Ws(t),i=r||Hs(t)||Zs(t);if(e=ri(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:to(t)&&Ji(o)?Ua(na(t)):{}}return(i?a:nn)(t,function(t,r,i){return e(n,t,r,i)}),n},n.unary=function(t){return Bi(t,1)},n.union=ms,n.unionBy=ys,n.unionWith=_s,n.uniq=function(t){return t&&t.length?lr(t):[]},n.uniqBy=function(t,e){return t&&t.length?lr(t,ri(e,2)):[]},n.uniqWith=function(t,e){return e="function"==typeof e?e:N,t&&t.length?lr(t,N,e):[]},n.unset=function(t,e){return null==t||cr(t,e)},n.unzip=ji,n.unzipWith=Ri,n.update=function(t,e,n){return null==t?t:fr(t,e,_r(n))},n.updateWith=function(t,e,n,r){return r="function"==typeof r?r:N,null==t?t:fr(t,e,_r(n),r)},n.values=go,n.valuesIn=function(t){return null==t?[]:A(t,_o(t))},n.without=vs,n.words=xo,n.wrap=function(t,e){return Is(_r(e),t)},n.xor=gs,n.xorBy=bs,n.xorWith=ws,n.zip=xs,n.zipObject=function(t,e){return mr(t||[],e||[],Ve)},n.zipObjectDeep=function(t,e){return mr(t||[],e||[],nr)},n.zipWith=Ss,n.entries=mu,n.entriesIn=yu,n.extend=nu,n.extendWith=ru,Ao(n,n),n.add=qu,n.attempt=Eu,n.camelCase=_u,n.capitalize=bo,n.ceil=Du,n.clamp=function(t,e,n){return n===N&&(n=e,e=N),n!==N&&(n=(n=co(n))==n?n:0),e!==N&&(e=(e=co(e))==e?e:0),Ke(co(t),e,n)},n.clone=function(t){return Xe(t,H)},n.cloneDeep=function(t){return Xe(t,W|H)},n.cloneDeepWith=function(t,e){return e="function"==typeof e?e:N,Xe(t,W|H,e)},n.cloneWith=function(t,e){return e="function"==typeof e?e:N,Xe(t,H,e)},n.conformsTo=function(t,e){return null==e||Qe(t,e,yo(e))},n.deburr=wo,n.defaultTo=function(t,e){return null==t||t!=t?e:t},n.divide=Nu,n.endsWith=function(t,e,n){t=ho(t),e=ur(e);var r=t.length,i=n=n===N?r:Ke(uo(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},n.eq=Hi,n.escape=function(t){return(t=ho(t))&&oe.test(t)?t.replace(re,Ln):t},n.escapeRegExp=function(t){return(t=ho(t))&&de.test(t)?t.replace(pe,"\\$&"):t},n.every=function(t,e,n){var r=Ws(t)?s:function(t,e){var n=!0;return Va(t,function(t,r,i){return n=!!e(t,r,i)}),n};return n&&fi(t,e,n)&&(e=N),r(t,ri(e,3))},n.find=As,n.findIndex=Ei,n.findKey=function(t,e){return m(t,ri(e,3),nn)},n.findLast=ks,n.findLastIndex=Ai,n.findLastKey=function(t,e){return m(t,ri(e,3),rn)},n.floor=Iu,n.forEach=Di,n.forEachRight=Ni,n.forIn=function(t,e){return null==t?t:Wa(t,ri(e,3),_o)},n.forInRight=function(t,e){return null==t?t:Ya(t,ri(e,3),_o)},n.forOwn=function(t,e){return t&&nn(t,ri(e,3))},n.forOwnRight=function(t,e){return t&&rn(t,ri(e,3))},n.get=po,n.gt=Us,n.gte=Vs,n.has=function(t,e){return null!=t&&si(t,e,bn)},n.hasIn=mo,n.head=Oi,n.identity=To,n.includes=function(t,e,n,r){t=Ki(t)?t:go(t),n=n&&!r?uo(n):0;var i=t.length;return n<0&&(n=ba(i+n,0)),io(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&_(t,e,n)>-1},n.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:uo(n);return i<0&&(i=ba(r+i,0)),_(t,e,i)},n.inRange=function(t,e,n){return e=so(e),n===N?(n=e,e=0):n=so(n),t=co(t),function(t,e,n){return t>=wa(e,n)&&t<ba(e,n)}(t,e,n)},n.invoke=cu,n.isArguments=Gs,n.isArray=Ws,n.isArrayBuffer=Ys,n.isArrayLike=Ki,n.isArrayLikeObject=Xi,n.isBoolean=function(t){return!0===t||!1===t||eo(t)&&yn(t)==St},n.isBuffer=Hs,n.isDate=Ks,n.isElement=function(t){return eo(t)&&1===t.nodeType&&!ro(t)},n.isEmpty=function(t){if(null==t)return!0;if(Ki(t)&&(Ws(t)||"string"==typeof t||"function"==typeof t.splice||Hs(t)||Zs(t)||Gs(t)))return!t.length;var e=es(t);if(e==Mt||e==qt)return!t.size;if(di(t))return!zn(t).length;for(var n in t)if(Wo.call(t,n))return!1;return!0},n.isEqual=function(t,e){return Rn(t,e)},n.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:N)?n(t,e):N;return r===N?Rn(t,e,N,n):!!r},n.isError=Qi,n.isFinite=function(t){return"number"==typeof t&&_a(t)},n.isFunction=Ji,n.isInteger=Zi,n.isLength=$i,n.isMap=Xs,n.isMatch=function(t,e){return t===e||Nn(t,e,oi(e))},n.isMatchWith=function(t,e,n){return n="function"==typeof n?n:N,Nn(t,e,oi(e),n)},n.isNaN=function(t){return no(t)&&t!=+t},n.isNative=function(t){if(ns(t))throw new Ro(B);return In(t)},n.isNil=function(t){return null==t},n.isNull=function(t){return null===t},n.isNumber=no,n.isObject=to,n.isObjectLike=eo,n.isPlainObject=ro,n.isRegExp=Qs,n.isSafeInteger=function(t){return Zi(t)&&t>=-pt&&t<=pt},n.isSet=Js,n.isString=io,n.isSymbol=oo,n.isTypedArray=Zs,n.isUndefined=function(t){return t===N},n.isWeakMap=function(t){return eo(t)&&es(t)==Bt},n.isWeakSet=function(t){return eo(t)&&yn(t)==zt},n.join=function(t,e){return null==t?"":va.call(t,e)},n.kebabCase=vu,n.last=Mi,n.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==N&&(i=(i=uo(n))<0?ba(r+i,0):wa(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):y(t,v,i,!0)},n.lowerCase=gu,n.lowerFirst=bu,n.lt=$s,n.lte=tu,n.max=function(t){return t&&t.length?$e(t,To,gn):N},n.maxBy=function(t,e){return t&&t.length?$e(t,ri(e,2),gn):N},n.mean=function(t){return g(t,To)},n.meanBy=function(t,e){return g(t,ri(e,2))},n.min=function(t){return t&&t.length?$e(t,To,Vn):N},n.minBy=function(t,e){return t&&t.length?$e(t,ri(e,2),Vn):N},n.stubArray=Mo,n.stubFalse=Po,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=Bu,n.nth=function(t,e){return t&&t.length?Kn(t,uo(e)):N},n.noConflict=function(){return wn._===this&&(wn._=Qo),this},n.noop=ko,n.now=Rs,n.pad=function(t,e,n){t=ho(t);var r=(e=uo(e))?q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return zr(da(i),n)+t+zr(pa(i),n)},n.padEnd=function(t,e,n){t=ho(t);var r=(e=uo(e))?q(t):0;return e&&r<e?t+zr(e-r,n):t},n.padStart=function(t,e,n){t=ho(t);var r=(e=uo(e))?q(t):0;return e&&r<e?zr(e-r,n)+t:t},n.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Sa(ho(t).replace(ye,""),e||0)},n.random=function(t,e,n){if(n&&"boolean"!=typeof n&&fi(t,e,n)&&(e=n=N),n===N&&("boolean"==typeof e?(n=e,e=N):"boolean"==typeof t&&(n=t,t=N)),t===N&&e===N?(t=0,e=1):(t=so(t),e===N?(e=t,t=0):e=so(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Ta();return wa(t+i*(e-t+_n("1e-"+((i+"").length-1))),e)}return $n(t,e)},n.reduce=function(t,e,n){var r=Ws(t)?p:x,i=arguments.length<3;return r(t,ri(e,4),n,i,Va)},n.reduceRight=function(t,e,n){var r=Ws(t)?function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}:x,i=arguments.length<3;return r(t,ri(e,4),n,i,Ga)},n.repeat=function(t,e,n){return e=(n?fi(t,e,n):e===N)?1:uo(e),tr(ho(t),e)},n.replace=function(){var t=arguments,e=ho(t[0]);return t.length<3?e:e.replace(t[1],t[2])},n.result=function(t,e,n){var r=-1,i=(e=vr(e,t)).length;for(i||(i=1,t=N);++r<i;){var o=null==t?N:t[xi(e[r])];o===N&&(r=i,o=n),t=Ji(o)?o.call(t):o}return t},n.round=zu,n.runInContext=t,n.sample=function(t){return(Ws(t)?ze:function(t){return ze(go(t))})(t)},n.size=function(t){if(null==t)return 0;if(Ki(t))return io(t)?q(t):t.length;var e=es(t);return e==Mt||e==qt?t.size:zn(t).length},n.snakeCase=wu,n.some=function(t,e,n){var r=Ws(t)?d:function(t,e){var n;return Va(t,function(t,r,i){return!(n=e(t,r,i))}),!!n};return n&&fi(t,e,n)&&(e=N),r(t,ri(e,3))},n.sortedIndex=function(t,e){return ir(t,e)},n.sortedIndexBy=function(t,e,n){return or(t,e,ri(n,2))},n.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ir(t,e);if(r<n&&Hi(t[r],e))return r}return-1},n.sortedLastIndex=function(t,e){return ir(t,e,!0)},n.sortedLastIndexBy=function(t,e,n){return or(t,e,ri(n,2),!0)},n.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ir(t,e,!0)-1;if(Hi(t[n],e))return n}return-1},n.startCase=xu,n.startsWith=function(t,e,n){return t=ho(t),n=null==n?0:Ke(uo(n),0,t.length),e=ur(e),t.slice(n,n+e.length)==e},n.subtract=Uu,n.sum=function(t){return t&&t.length?S(t,To):0},n.sumBy=function(t,e){return t&&t.length?S(t,ri(e,2)):0},n.template=function(t,e,r){var i=n.templateSettings;r&&fi(t,e,r)&&(e=N),t=ho(t),e=ru({},e,i,Kr);var o,a,s=ru({},e.imports,i.imports,Kr),u=yo(s),l=A(s,u),c=0,f=e.interpolate||Ce,h="__p += '",p=Do((e.escape||Ce).source+"|"+f.source+"|"+(f===ue?Se:Ce).source+"|"+(e.evaluate||Ce).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++pn+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),h+=t.slice(c,u).replace(je,P),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var m=e.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace($t,""):h).replace(te,"$1").replace(ee,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Eu(function(){return Fo(u,d+"return "+h).apply(N,l)});if(y.source=h,Qi(y))throw y;return y},n.times=function(t,e){if((t=uo(t))<1||t>pt)return[];var n=yt,r=wa(t,yt);e=ri(e),t-=yt;for(var i=T(r,e);++n<t;)e(n);return i},n.toFinite=so,n.toInteger=uo,n.toLength=lo,n.toLower=function(t){return ho(t).toLowerCase()},n.toNumber=co,n.toSafeInteger=function(t){return t?Ke(uo(t),-pt,pt):0===t?t:0},n.toString=ho,n.toUpper=function(t){return ho(t).toUpperCase()},n.trim=function(t,e,n){if((t=ho(t))&&(n||e===N))return t.replace(me,"");if(!t||!(e=ur(e)))return t;var r=D(t),i=D(e);return gr(r,O(r,i),M(r,i)+1).join("")},n.trimEnd=function(t,e,n){if((t=ho(t))&&(n||e===N))return t.replace(_e,"");if(!t||!(e=ur(e)))return t;var r=D(t);return gr(r,0,M(r,D(e))+1).join("")},n.trimStart=function(t,e,n){if((t=ho(t))&&(n||e===N))return t.replace(ye,"");if(!t||!(e=ur(e)))return t;var r=D(t);return gr(r,O(r,D(e))).join("")},n.truncate=function(t,e){var n=at,r=st;if(to(e)){var i="separator"in e?e.separator:i;n="length"in e?uo(e.length):n,r="omission"in e?ur(e.omission):r}var o=(t=ho(t)).length;if(C(t)){var a=D(t);o=a.length}if(n>=o)return t;var s=n-q(r);if(s<1)return r;var u=a?gr(a,0,s).join(""):t.slice(0,s);if(i===N)return u+r;if(a&&(s+=u.length-s),Qs(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=Do(i.source,ho(Te.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;u=u.slice(0,f===N?s:f)}}else if(t.indexOf(ur(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},n.unescape=function(t){return(t=ho(t))&&ie.test(t)?t.replace(ne,qn):t},n.uniqueId=function(t){var e=++Yo;return ho(t)+e},n.upperCase=Su,n.upperFirst=Tu,n.each=Di,n.eachRight=Ni,n.first=Oi,Ao(n,function(){var t={};return nn(n,function(e,r){Wo.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.4",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),a(["drop","take"],function(t,e){Fe.prototype[t]=function(n){n=n===N?1:ba(uo(n),0);var r=this.__filtered__&&!e?new Fe(this):this.clone();return r.__filtered__?r.__takeCount__=wa(n,r.__takeCount__):r.__views__.push({size:wa(n,yt),type:t+(r.__dir__<0?"Right":"")}),r},Fe.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==ct||3==n;Fe.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ri(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),a(["head","last"],function(t,e){var n="take"+(e?"Right":"");Fe.prototype[t]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Fe.prototype[t]=function(){return this.__filtered__?new Fe(this):this[n](1)}}),Fe.prototype.compact=function(){return this.filter(To)},Fe.prototype.find=function(t){return this.filter(t).head()},Fe.prototype.findLast=function(t){return this.reverse().find(t)},Fe.prototype.invokeMap=er(function(t,e){return"function"==typeof t?new Fe(this):this.map(function(n){return En(n,t,e)})}),Fe.prototype.reject=function(t){return this.filter(Yi(ri(t)))},Fe.prototype.slice=function(t,e){t=uo(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Fe(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==N&&(n=(e=uo(e))<0?n.dropRight(-e):n.take(e-t)),n)},Fe.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Fe.prototype.toArray=function(){return this.take(yt)},nn(Fe.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=n[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(n.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,u=e instanceof Fe,l=s[0],c=u||Ws(e),f=function(t){var e=o.apply(n,h([t],s));return i&&p?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var p=this.__chain__,d=!!this.__actions__.length,m=a&&!p,y=u&&!d;if(!a&&c){e=y?e:new Fe(this);var _=t.apply(e,s);return _.__actions__.push({func:Li,args:[f],thisArg:N}),new Re(_,p)}return m&&y?t.apply(this,s):(_=this.thru(f),m?i?_.value()[0]:_.value():_)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var e=Bo[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(Ws(n)?n:[],t)}return this[r](function(n){return e.apply(Ws(n)?n:[],t)})}}),nn(Fe.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(Ra[i]||(Ra[i]=[])).push({name:e,func:r})}}),Ra[Dr(N,J).name]=[{name:"wrapper",func:N}],Fe.prototype.clone=function(){var t=new Fe(this.__wrapped__);return t.__actions__=Ar(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ar(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ar(this.__views__),t},Fe.prototype.reverse=function(){if(this.__filtered__){var t=new Fe(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Fe.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ws(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wa(e,t+a);break;case"takeRight":t=ba(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,h=0,p=wa(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return pr(t,this.__actions__);var d=[];t:for(;u--&&h<p;){for(var m=-1,y=t[l+=e];++m<f;){var _=c[m],v=_.iteratee,g=_.type,b=v(y);if(g==ft)y=b;else if(!b){if(g==ct)continue t;break t}}d[h++]=y}return d},n.prototype.at=Ts,n.prototype.chain=function(){return Fi(this)},n.prototype.commit=function(){return new Re(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===N&&(this.__values__=ao(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?N:this.__values__[this.__index__++]}},n.prototype.plant=function(t){for(var e,n=this;n instanceof w;){var r=Ti(n);r.__index__=0,r.__values__=N,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},n.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Fe){var e=t;return this.__actions__.length&&(e=new Fe(this)),(e=e.reverse()).__actions__.push({func:Li,args:[Ci],thisArg:N}),new Re(e,this.__chain__)}return this.thru(Ci)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return pr(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,sa&&(n.prototype[sa]=qi),n}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(wn._=Dn,define(function(){return Dn})):Sn?((Sn.exports=Dn)._=Dn,xn._=Dn):wn._=Dn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],194:[function(t,e,n){e.exports=[["#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["#ecd078","#d95b43","#c02942","#542437","#53777a"],["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["#e8ddcb","#cdb380","#036564","#033649","#031634"],["#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["#d9ceb2","#948c75","#d5ded9","#7a6a53","#99b2b7"],["#ffffff","#cbe86b","#f2e9e1","#1c140d","#cbe86b"],["#efffcd","#dce9be","#555152","#2e2633","#99173c"],["#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["#00a8c6","#40c0cb","#f9f2e7","#aee239","#8fbe00"],["#351330","#424254","#64908a","#e8caa4","#cc2a41"],["#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["#ff9900","#424242","#e9e9e9","#bcbcbc","#3299bb"],["#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["#ff4242","#f4fad2","#d4ee5e","#e1edb9","#f0f2eb"],["#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["#1b676b","#519548","#88c425","#bef202","#eafde6"],["#bcbdac","#cfbe27","#f27435","#f02475","#3b2d38"],["#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["#f0d8a8","#3d1c00","#86b8b1","#f2d694","#fa2a00"],["#f04155","#ff823a","#f2f26f","#fff7bd","#95cfb7"],["#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["#bbbb88","#ccc68d","#eedd99","#eec290","#eeaa88"],["#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["#a3a948","#edb92e","#f85931","#ce1836","#009989"],["#67917a","#170409","#b8af03","#ccbf82","#e33258"],["#e8d5b7","#0e2430","#fc3a51","#f5b349","#e8d5b9"],["#aab3ab","#c4cbb7","#ebefc9","#eee0b7","#e8caaf"],["#300030","#480048","#601848","#c04848","#f07241"],["#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["#607848","#789048","#c0d860","#f0f0d8","#604848"],["#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["#3e4147","#fffedf","#dfba69","#5a2e2e","#2a2c31"],["#b6d8c0","#c8d9bf","#dadabd","#ecdbbc","#fedcba"],["#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["#000000","#9f111b","#b11623","#292c37","#cccccc"],["#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["#f6f6f6","#e8e8e8","#333333","#990100","#b90504"],["#1b325f","#9cc4e4","#e9f2f9","#3a89c9","#f26c4f"],["#5e9fa3","#dcd1b4","#fab87f","#f87e7b","#b05574"],["#951f2b","#f5f4d7","#e0dfb1","#a5a36c","#535233"],["#413d3d","#040004","#c8ff00","#fa023c","#4b000f"],["#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["#4e395d","#827085","#8ebe94","#ccfc8e","#dc5b3e"],["#9dc9ac","#fffec7","#f56218","#ff9d2e","#919167"],["#a1dbb2","#fee5ad","#faca66","#f7a541","#f45d4c"],["#ffefd3","#fffee4","#d0ecea","#9fd6d2","#8b7a5e"],["#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["#ffedbf","#f7803c","#f54828","#2e0d23","#f8e4c1"],["#f8edd1","#d88a8a","#474843","#9d9d93","#c5cfc6"],["#f38a8a","#55443d","#a0cab5","#cde9ca","#f1edd0"],["#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["#a70267","#f10c49","#fb6b41","#f6d86b","#339194"],["#9d7e79","#ccac95","#9a947c","#748b83","#5b756c"],["#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["#046d8b","#309292","#2fb8ac","#93a42a","#ecbe13"],["#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["#ff003c","#ff8a00","#fabe28","#88c100","#00c176"],["#fcfef5","#e9ffe1","#cdcfb7","#d6e6c3","#fafbe3"],["#9cddc8","#bfd8ad","#ddd9ab","#f7af63","#633d2e"],["#30261c","#403831","#36544f","#1f5f61","#0b8185"],["#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["#ffe181","#eee9e5","#fad3b2","#ffba7f","#ff9c97"],["#aaff00","#ffaa00","#ff00aa","#aa00ff","#00aaff"],["#c2412d","#d1aa34","#a7a844","#a46583","#5a1e4a"]]},{}],195:[function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)i.call(n,l)&&(s[l]=n[l]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},{}],196:[function(t,e,n){var r=t("trim"),i=t("for-each");e.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),function(t){var n=t.indexOf(":"),i=r(t.slice(0,n)).toLowerCase(),o=r(t.slice(n+1));void 0===e[i]?e[i]=o:!function(t){return"[object Array]"===Object.prototype.toString.call(t)}(e[i])?e[i]=[e[i],o]:e[i].push(o)}),e}},{"for-each":168,trim:255}],197:[function(t,e,n){(function(t){"use strict";var n="win32"===t.platform,r=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,i=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,o={};o.parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=function(t){var e=r.exec(t),n=(e[1]||"")+(e[2]||""),o=e[3]||"",a=i.exec(o);return[n,a[1],a[2],a[3]]}(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}};var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s={};s.parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=function(t){return a.exec(t).slice(1)}(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},e.exports=n?o.parse:s.parse,e.exports.posix=s.parse,e.exports.win32=o.parse}).call(this,t("_process"))},{_process:17}],198:[function(t,e,n){"use strict";function r(t){return i[t]?i[t]:("string"==typeof t&&(t=i[t]=t.split(/\s*,\s*|\s+/)),t)}e.exports=function(t,e,n){var i,o,a={};if("string"==typeof e&&(e=r(e)),Array.isArray(e)){var s={};for(o=0;o<e.length;o++)s[e[o]]=!0;e=s}for(i in e)e[i]=r(e[i]);var u={};for(i in e){var l=e[i];if(Array.isArray(l))for(o=0;o<l.length;o++){var c=l[o];if(n&&(u[c]=!0),c in t){if(a[i]=t[c],n)for(var f=o;f<l.length;f++)u[l[f]]=!0;break}}else i in t&&(e[i]&&(a[i]=t[i]),n&&(u[i]=!0))}if(n)for(i in t)u[i]||(a[i]=t[i]);return a};var i={}},{}],199:[function(t,e,n){e.exports=function(t,e,n,r){function i(n,r,i,u){for(var l=1/(n-1),c=0;c<n;c++){var f=-Math.cos(2*Math.PI*c*l)*r,h=Math.sin(2*Math.PI*c*l)*r;o.push([t*f,t*i+e*u,t*h]),a.push([f,i,h]);var p=c*l,d=.5-(t*i+e*u)/(2*t+e);s.push([p,1-d])}}void 0===t&&(t=.5),void 0===e&&(e=2*t),void 0===n&&(n=12),void 0===r&&(r=12);for(var o=[],a=[],s=[],u=[],l=n+1,c=n+l,f=1/(l-1),h=1/(n-1),p=0;p<n/2;p++)i(r,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),-.5);for(p=0;p<l;p++)i(r,1,0,p*f-.5);for(p=n/2;p<n;p++)i(r,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),.5);for(p=0;p<c-1;p++)for(var d=0;d<r-1;d++)u.push([p*r+(d+0),p*r+(d+1),(p+1)*r+(d+1)]),u.push([p*r+d,(p+1)*r+(d+1),(p+1)*r+(d+0)]);return{positions:o,normals:a,uvs:s,cells:u}}},{}],200:[function(t,e,n){e.exports=function(t,e,n,r,i,o){function a(t,e,n,r,i,o,a,h,p,d){for(var m=s,y=0;y<=a;y++)for(var _=0;_<=o;_++){var v=u[s]=[0,0,0];v[t]=(-r/2+_*r/o)*p,v[e]=(-i/2+y*i/a)*d,v[n]=h;var g=l[s]=[0,0,0];g[t]=0,g[e]=0,g[n]=h/Math.abs(h);var b=c[s]=[0,0];b[0]=_/o,b[1]=1-y/a,++s}for(y=0;y<a;y++)for(_=0;_<o;_++){var w=m+y*(o+1)+_;f.push([w,w+o+1,w+o+2]),f.push([w,w+o+2,w+1])}}void 0===t&&(t=1),void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=1),void 0===i&&(i=r),void 0===o&&(o=r);var s=0,u=[],l=[],c=[],f=[];return a(0,1,2,t,e,r,i,n/2,1,-1),a(0,1,2,t,e,r,i,-n/2,-1,-1),a(2,1,0,n,e,o,i,-t/2,1,-1),a(2,1,0,n,e,o,i,t/2,-1,-1),a(0,2,1,t,n,r,o,e/2,1,1),a(0,2,1,t,n,r,o,-e/2,1,-1),{positions:u,normals:l,uvs:c,cells:f}}},{}],201:[function(t,e,n){e.exports=function(t,e,n,r,i,o){var a=0,s=0,u=[];r=Math.min(r,o.length-2);for(var l=(i+1)*(r+1)+0*(i+2),c=i*r*2+0*i,f=new Array(l),h=new Array(l),p=new Array(l),d=new Array(c),m=(e-t)/n,y=2*Math.PI,_=0;_<=r;_++){for(var v=_*Math.floor((o.length-1)/r),g=[],b=_/r*n,w=o[v][1],x=b*(e-t)+t,S=0;S<=i;S++){var T=S/i,E=T*y,A=Math.sin(E),k=Math.cos(E);h[a]=[x*A+w,-b*n+n/2,x*k+w],f[a]=[A,m,k],p[a]=[T,1-b],g.push(a),a++}u.push(g)}for(S=0;S<i;S++)for(_=0;_<r;_++){var O=u[_][S],M=u[_+1][S],P=u[_+1][S+1],C=u[_][S+1];d[s]=[O,M,C],d[++s]=[M,P,C],s++}return{uvs:p,cells:d,normals:f,positions:h}}},{}],202:[function(t,e,n){var r=t("icosphere"),i=t("gl-vec3/normalize"),o=t("gl-vec3/scale"),a=t("./lib/fix-wrapped-uvs"),s=t("./lib/fix-pole-uvs");e.exports=function(t,e){e=e||{},t=void 0!==t?t:1;var n,u,l=void 0!==e.subdivisions?e.subdivisions:2,c=r(l),f=[],h=[];for(n=0;n<c.positions.length;n++){u=c.positions[n];var p=.5*(-Math.atan2(u[2],-u[0])/Math.PI+1),d=.5+Math.asin(u[1])/Math.PI;h.push([1-p,1-d])}var m={positions:c.positions,cells:c.cells,uvs:h,normals:f};for(s(m),a(m),n=0;n<m.positions.length;n++){u=m.positions[n];var y=i([0,0,0],u);f.push(y),o(u,u,t)}return m}},{"./lib/fix-pole-uvs":203,"./lib/fix-wrapped-uvs":204,"gl-vec3/normalize":175,"gl-vec3/scale":176,icosphere:186}],203:[function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}e.exports=function(t){function e(t,e,r,i){var a=o[r],s=o[i];o[e][0]=(a[0]+s[0])/2,c++,u.push(n[e].slice()),l.push(o[e].slice()),t[0]=c}var n=t.positions,i=t.cells,o=t.uvs,a=r(n,1),s=r(n,-1);if(-1!==a&&-1!==s){for(var u=n.slice(),l=o.slice(),c=u.length-1,f=0;f<i.length;f++){var h=i[f],p=h[0],d=h[1],m=h[2];p===a?e(h,a,d,m):p===s&&e(h,s,d,m)}t.positions=u,t.uvs=l}}},{}],204:[function(t,e,n){var r=t("./is-uv-seam"),i=.25,o=.75;e.exports=function(t){function e(t,e,n,r){if(e in t)return t[e];u.push(r.slice()),l.push(n.slice());var i=u.length-1;return t[e]=i,i}for(var n=t.positions,a=t.cells,s=t.uvs,u=n.slice(),l=s.slice(),c={},f=0;f<a.length;f++){var h=a[f],p=h[0],d=h[1],m=h[2];if(r(s,p,d,m)){var y=n[p],_=n[d],v=n[m],g=s[p],b=s[d],w=s[m];g[0]<i&&(p=e(c,p,g,y)),b[0]<i&&(d=e(c,d,b,_)),w[0]<i&&(m=e(c,m,w,v)),h[0]=p,h[1]=d,h[2]=m}}!function(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=e[r[0]],s=e[r[1]],u=e[r[2]],l=Math.max(a[0],s[0],u[0]),c=Math.min(a[0],s[0],u[0]);l>o&&c<i&&(a[0]<i&&(a[0]+=1),s[0]<i&&(s[0]+=1),u[0]<i&&(u[0]+=1))}}(a,l),t.positions=u,t.uvs=l}},{"./is-uv-seam":205}],205:[function(t,e,n){var r=t("gl-vec2/cross"),i=t("gl-vec2/subtract"),o=[0,0,0],a=[0,0,0];e.exports=function(t,e,n,s){var u=t[e],l=t[n],c=t[s];return i(o,l,u),i(a,c,u),r(o,o,a),o[2]<0}},{"gl-vec2/cross":171,"gl-vec2/subtract":172}],206:[function(t,e,n){e.exports=function(t){t=void 0!==t?t:1,Array.isArray(t)||(t=[t,t]);var e=[0,0,-1];return{positions:[[-t[0],-t[1],0],[t[0],-t[1],0],[t[0],t[1],0],[-t[0],t[1],0]],cells:[[0,1,2],[2,3,0]],uvs:[[0,0],[1,0],[1,1],[0,1]],normals:[e.slice(),e.slice(),e.slice(),e.slice()]}}},{}],207:[function(t,e,n){var r=t("defined"),i=t("gl-vec3/subtract"),o=t("gl-vec3/normalize");e.exports=function(t){for(var e=r((t=t||{}).majorRadius,1),n=r(t.minorRadius,.25),a=r(t.minorSegments,32),s=r(t.majorSegments,64),u=r(t.arc,2*Math.PI),l=2*Math.PI,c=[0,0,0],f=[],h=[],p=[],d=[0,0,0],m=[],y=0;y<=a;y++)for(var _=0;_<=s;_++){var v=_/s*u,g=y/a*l;c[0]=e*Math.cos(v),c[1]=e*Math.sin(v);var b=[(e+n*Math.cos(g))*Math.cos(v),(e+n*Math.cos(g))*Math.sin(v),n*Math.sin(g)];h.push(b),i(d,b,c),o(d,d),m.push(d.slice()),f.push([_/s,y/a])}for(y=1;y<=a;y++)for(_=1;_<=s;_++){var w=(s+1)*y+_-1,x=(s+1)*(y-1)+_-1,S=(s+1)*(y-1)+_,T=(s+1)*y+_;p.push([w,x,T]),p.push([x,S,T])}return{uvs:f,cells:p,normals:m,positions:h}}},{defined:208,"gl-vec3/normalize":175,"gl-vec3/subtract":180}],208:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],209:[function(t,e,n){(function(t,e){"use strict";!function(t){function e(t){return!!t&&("object"==typeof t||"function"==typeof t)}if(t.Proxy)return;let n=null;t.Proxy=function(t,r){if(!e(t)||!e(r))throw new TypeError("Cannot create proxy with a non-object as target or handler");let i=function(){};n=function(){i=function(t){throw new TypeError(`Cannot perform '${t}' on a proxy that has been revoked`)}};const o=r;r={get:null,set:null,apply:null,construct:null};for(let t in o){if(!(t in r))throw new TypeError(`Proxy polyfill does not support trap '${t}'`);r[t]=o[t]}"function"==typeof o&&(r.apply=o.apply.bind(o));let a=this,s=!1;const u="function"==typeof t;(r.apply||r.construct||u)&&(a=function(){const e=this&&this.constructor===a,n=Array.prototype.slice.call(arguments);if(i(e?"construct":"apply"),e&&r.construct)return r.construct.call(this,t,n);if(!e&&r.apply)return r.apply(t,this,n);if(u){if(e){n.unshift(t);return new(t.bind.apply(t,n))}return t.apply(this,n)}throw new TypeError(e?"not a constructor":"not a function")},s=!0);const l=r.get?function(t){return i("get"),r.get(this,t,a)}:function(t){return i("get"),this[t]},c=r.set?function(t,e){i("set");r.set(this,t,e,a)}:function(t,e){i("set"),this[t]=e},f={};Object.getOwnPropertyNames(t).forEach(function(e){if(s&&e in a)return;const n={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:l.bind(t,e),set:c.bind(t,e)};Object.defineProperty(a,e,n),f[e]=!0});let h=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(a,Object.getPrototypeOf(t)):a.__proto__?a.__proto__=t.__proto__:h=!1,r.get||!h)for(let e in t)f[e]||Object.defineProperty(a,e,{get:l.bind(t,e)});return Object.seal(t),Object.seal(a),a},t.Proxy.revocable=function(e,r){return{proxy:new t.Proxy(e,r),revoke:n}},t.Proxy.revocable=t.Proxy.revocable,t.Proxy=t.Proxy}(void 0!==t&&"[object process]"=={}.toString.call(t)?e:self)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:17}],210:[function(t,e,n){"use strict";var r=t("strict-uri-encode");n.extract=function(t){return t.split("?")[1]||""},n.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""))?t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),i=n.length>0?n.join("="):void 0;return r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),t.hasOwnProperty(r)?Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i,t},{}):{}},n.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var n=t[e];return Array.isArray(n)?n.sort().map(function(t){return r(e)+"="+r(t)}).join("&"):r(e)+"="+r(n)}).filter(function(t){return t.length>0}).join("&"):""}},{"strict-uri-encode":253}],211:[function(t,e,n){var r=t("gl-vec3/squaredDistance"),i=t("gl-vec3/dot"),o=t("gl-vec3/subtract"),a=t("gl-vec3/scaleAndAdd"),s=t("gl-vec3/scale"),u=t("gl-vec3/add"),l=[0,0,0];e.exports=function(t,e,n,c,f){o(l,c,e);var h=i(n,l);if(h<0)return null;a(l,e,n,h);var p=r(c,l),d=f*f;return p>d?null:(s(t,n,h-Math.sqrt(d-p)),u(t,t,e))}},{"gl-vec3/add":173,"gl-vec3/dot":174,"gl-vec3/scale":176,"gl-vec3/scaleAndAdd":177,"gl-vec3/squaredDistance":179,"gl-vec3/subtract":180}],212:[function(t,e,n){"use strict";function r(t){var e=new Float32Array(t.length);e.set(t);for(var n=0,r=e.length;n<r;n++)e[n]=t[n]-e[n];return e}var i=t("color-normalize"),o=t("array-bounds"),a=t("object-assign"),s=t("glslify"),u=t("pick-by-alias"),l=t("update-diff"),c=t("flatten-vertex-data"),f=t("earcut"),h=t("array-normalize");e.exports=function(t,e){function n(t){t?m(t):null===t&&y(),p()}function p(t){if("number"==typeof t)return d(t);t&&!Array.isArray(t)&&(t=[t]),k.forEach(function(e,n){t&&(t[n]?e.draw=!0:e.draw=!1),e.draw?d(n):e.draw=!0})}function d(e){"number"==typeof e&&(e=k[e]),e&&e.count&&e.opacity&&e.positions&&e.positions.length>2&&(t._refresh(),e.fill&&e.triangles&&e.triangles.length>2&&g(e),e.thickness&&e.color&&(e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height],e.scaleRatio[0]>M||e.scaleRatio[1]>M?v(e):"rect"===e.join||!e.join&&(e.thickness<=2||e.positions.length>=P)?v(e):_(e),e.after&&e.after(e)))}function m(t){if(t){null!=t.length?"number"==typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var e=0;if(k=t.map(function(t,n){var s=k[n];return t?("function"==typeof t?t={after:t}:"number"==typeof t[0]&&(t={positions:t}),t=u(t,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color stroke colors stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",after:"after callback done pass"}),s||(k[n]=s={id:n,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,offset:0,dashLength:0,draw:!0},t=a({},A,t)),l(s,t,[{thickness:parseFloat,opacity:parseFloat,miterLimit:parseFloat,overlay:Boolean,join:function(t){return t},after:function(t){return t},positions:function(t,n,r){t=c(t,"float64");var i=Math.floor(t.length/2),a=o(t,2);return n.range||r.range||(r.range=a),n.count=i,n.bounds=a,e+=i,t},fill:function(t){return t?i(t,"uint8"):null},dashes:function(t,e,n){var r,i=e.dashLength;if(!t||t.length<2)i=1,r=new Uint8Array([255,255,255,255,255,255,255,255]);else{i=0;for(var o=0;o<t.length;++o)i+=t[o];r=new Uint8Array(i*O);for(var a=0,s=255,u=0;u<2;u++)for(var l=0;l<t.length;++l){for(var c=0,f=t[l]*O*.5;c<f;++c)r[a++]=s;s^=255}}return T.subimage({data:r,width:r.length,height:1},0,e.id),e.dashLength=i,r}},{close:function(t,e,n){return null!=t?t:e.positions.length>=4&&e.positions[0]===e.positions[e.positions.length-2]&&e.positions[1]===e.positions[e.positions.length-1]},positions:function(t,e,n){if(e.fill&&t.length){for(var r=[],i={},o=0,a=0,s=0,u=e.count;a<u;a++){var l=e.positions[2*a],c=e.positions[2*a+1];Number.isNaN(l)||Number.isNaN(c)?(l=e.positions[2*o],c=e.positions[2*o+1],i[a]=o):o=a,r[s++]=l,r[s++]=c}for(var h=f(r),p=0,d=h.length;p<d;p++)null!=i[h[p]]&&(h[p]=i[h[p]]);e.triangles=h}return e.positions},color:function(t,e,n){var r=e.count;if(t||(t="transparent"),Array.isArray(t)&&"number"!=typeof t[0]||(t=Array(r).fill(t)),t.length<r)throw Error("Not enough colors");for(var o=new Uint8Array(4*r+4),a=0;a<r;a++){var s=i(t[a],"uint8");o.set(s,4*a)}return o},range:function(t,e,n){if(!e.count)return null;var i=e.bounds;t||(t=i);var o=h(t.slice(),2,i);return e.scale=[1/(o[2]-o[0]),1/(o[3]-o[1])],e.translate=[-o[0],-o[1]],e.scaleFract=r(e.scale),e.translateFract=r(e.translate),t},viewport:function(t){var e;return Array.isArray(t)?e={x:t[0],y:t[1],width:t[2]-t[0],height:t[3]-t[1]}:t?(e={x:t.x||t.left||0,y:t.y||t.top||0},t.right?e.width=t.right-e.x:e.width=t.w||t.width||0,t.bottom?e.height=t.bottom-e.y:e.height=t.h||t.height||0):e={x:0,y:0,width:E.drawingBufferWidth,height:E.drawingBufferHeight},e}}]),s):s}),e){var s=2*e+6*k.length,p=new Float64Array(s),d=0,m=new Uint8Array(2*s);k.forEach(function(t,e){if(t){var n=t.positions,r=t.count,i=t.color;if(t.offset=d,r){var o=new Float64Array(n.length);o.set(n),h(o,2,t.bounds),t.close?n[0]===n[2*r-2]&&n[1]===n[2*r-1]?(p[2*d+0]=o[2*r-4],p[2*d+1]=o[2*r-3]):(p[2*d+0]=o[2*r-2],p[2*d+1]=o[2*r-1]):(p[2*d+0]=o[0],p[2*d+1]=o[1]),m[4*d+0]=i[0],m[4*d+1]=i[1],m[4*d+2]=i[2],m[4*d+3]=i[3],p.set(o,2*d+2),m.set(i,4*d+4),t.close?n[0]===n[2*r-2]&&n[1]===n[2*r-1]?(p[2*d+2*r+2]=o[2],p[2*d+2*r+3]=o[3],d+=r+2,t.count-=1):(p[2*d+2*r+2]=o[0],p[2*d+2*r+3]=o[1],p[2*d+2*r+4]=o[2],p[2*d+2*r+5]=o[3],d+=r+3):(p[2*d+2*r+2]=o[2*r-2],p[2*d+2*r+3]=o[2*r-1],p[2*d+2*r+4]=o[2*r-2],p[2*d+2*r+5]=o[2*r-1],d+=r+3)}}}),b(m),x(function(t){if(t instanceof Float32Array)return t;var e=new Float32Array(t);return e.set(t),e}(p)),S(r(p))}return n}}function y(){k.length=0,b.destroy(),w.destroy(),x.destroy(),T.destroy()}if("function"==typeof t?(e||(e={}),e.regl=t):e=t,e.length&&(e.positions=e),!(t=e.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var _,v,g,b,w,x,S,T,E=t._gl,A={positions:[],dashes:null,join:null,miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:null,fill:null},k=[],O=2,M=3e6,P=1e4;b=t.buffer({usage:"dynamic",type:"uint8",data:null}),w=t.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x=t.buffer({usage:"dynamic",type:"float",data:null}),S=t.buffer({usage:"dynamic",type:"float",data:null}),T=t.texture({channels:1,width:256,height:2048,mag:"linear",min:"linear"}),m(e);var C={primitive:"triangle strip",instances:t.prop("count"),count:4,offset:0,uniforms:{miterMode:function(t,e){return"round"===e.join?2:1},miterLimit:t.prop("miterLimit"),scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),thickness:t.prop("thickness"),dashPattern:T,dashLength:t.prop("dashLength"),dashShape:[256,2048],opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),scaleRatio:t.prop("scaleRatio"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(t,e){return!e.overlay}},scissor:{enable:!0,box:t.prop("viewport")},stencil:!1,viewport:t.prop("viewport")};return _=t(a({cull:{enable:!0,face:"back"},vert:s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\nuniform float miterLimit, dashLength, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float MAX_LINES = 256.;\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIST = 1.;\n\n//TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n//TODO: precalculate dot products, normalize things beforehead etc.\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\tfloat depth = (MAX_LINES - 1. - id) / MAX_LINES;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevDirection = normalize(prevDiff);\n\tvec2 currDirection = normalize(currDiff);\n\tvec2 nextDirection = normalize(nextDiff);\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t//collapsed/unidirectional segment cases\n\tif (prevDirection == currDirection) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (nextDirection == currDirection) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord + translate) * scale;\n\tvec2 aBotPosition = (aBotCoord + translate) * scale;\n\n\tvec2 bTopPosition = (bTopCoord + translate) * scale;\n\tvec2 bBotPosition = (bBotCoord + translate) * scale;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = (aCoord + translate) * scaleRatio + viewport.xy;\n\tendCoord = (bCoord + translate) * scaleRatio + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = (startCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = (endCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = (startCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = (endCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:s(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aColor:{buffer:b,stride:4,offset:function(t,e){return 4*e.offset},divisor:1},bColor:{buffer:b,stride:4,offset:function(t,e){return 4*e.offset+4},divisor:1},prevCoord:{buffer:x,stride:8,offset:function(t,e){return 8*e.offset},divisor:1},aCoord:{buffer:x,stride:8,offset:function(t,e){return 8+8*e.offset},divisor:1},bCoord:{buffer:x,stride:8,offset:function(t,e){return 16+8*e.offset},divisor:1},nextCoord:{buffer:x,stride:8,offset:function(t,e){return 24+8*e.offset},divisor:1}}},C)),v=t(a({vert:s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nconst float MAX_LINES = 256.;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n  return (position + translate) * scale\n       + (positionFract + translateFract) * scale\n       + (position + translate) * scaleFract\n       + (positionFract + translateFract) * scaleFract;\n}\n\nvoid main() {\n\t// vec2 scaleRatio = scale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\tfloat depth = (MAX_LINES - 1. - id) / (MAX_LINES);\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scaleRatio);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:s(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aCoord:{buffer:x,stride:8,offset:function(t,e){return 8+8*e.offset},divisor:1},bCoord:{buffer:x,stride:8,offset:function(t,e){return 16+8*e.offset},divisor:1},aCoordFract:{buffer:S,stride:8,offset:function(t,e){return 8+8*e.offset},divisor:1},bCoordFract:{buffer:S,stride:8,offset:function(t,e){return 16+8*e.offset},divisor:1},color:{buffer:b,stride:4,offset:function(t,e){return 4*e.offset},divisor:1}}},C)),g=t({primitive:"triangle",elements:function(t,e){return e.triangles},offset:0,vert:s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = (position + translate) * scale\n       + (positionFract + translateFract) * scale\n       + (position + translate) * scaleFract\n       + (positionFract + translateFract) * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:s(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= opacity;\n}\n"]),uniforms:{scale:t.prop("scale"),color:t.prop("fill"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},attributes:{position:{buffer:x,stride:8,offset:function(t,e){return 8+8*e.offset}},positionFract:{buffer:S,stride:8,offset:function(t,e){return 8+8*e.offset}}},blend:C.blend,depth:{enable:!1},scissor:C.scissor,stencil:C.stencil,viewport:C.viewport}),a(n,{update:m,draw:p,destroy:y,regl:t,gl:E,canvas:E.canvas,lines:k}),n}},{"array-bounds":2,"array-normalize":3,"color-normalize":27,earcut:165,"flatten-vertex-data":167,glslify:182,"object-assign":195,"pick-by-alias":198,"update-diff":256}],213:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.createREGL=r()}(this,function(){"use strict";function t(t){return"undefined"!=typeof btoa?btoa(t):"base64:"+t}function e(t){var e=new Error("(regl) "+t);throw e}function n(t,n){t||e(n)}function r(t){return t?": "+t:""}function i(t,n,i){n.indexOf(t)<0&&e("invalid value"+r(i)+". must be one of: "+n)}function o(t,e){for(t+="";t.length<e;)t=" "+t;return t}function a(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function s(t,e){this.number=t,this.line=e,this.errors=[]}function u(t,e,n){this.file=t,this.line=e,this.message=n}function l(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function c(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function f(e,n){var r=e.split("\n"),i=1,o=0,u={unknown:new a,0:new a};u.unknown.name=u[0].name=n||l(),u.unknown.lines.push(new s(0,""));for(var c=0;c<r.length;++c){var f=r[c],h=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(f);if(h)switch(h[1]){case"line":var p=/(\d+)(\s+\d+)?/.exec(h[2]);p&&(i=0|p[1],p[2]&&((o=0|p[2])in u||(u[o]=new a)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(h[2]);d&&(u[o].name=d[1]?t(d[2]):d[2])}u[o].lines.push(new s(i++,f))}return Object.keys(u).forEach(function(t){var e=u[t];e.lines.forEach(function(t){e.index[t.number]=t})}),u}function h(t){t._commandRef=l()}function p(t,n){var r=c();e(t+" in command "+(n||l())+("unknown"===r?"":" called from "+r))}function d(t,e,n,i){typeof t!==e&&p("invalid parameter type"+r(n)+". expected "+e+", got "+typeof t,i||l())}function m(t,e){return t===gt||t===vt||t===bt?2:t===wt?4:xt[t]*e}function y(t){return!(t&t-1||!t)}function _(t,e){this.id=Tt++,this.type=t,this.data=e}function v(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function g(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+v(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return g(t.substr(0,r.index)).concat(g(r[1])).concat(g(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+v(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(g(i[a]));return o}function b(t){return"["+g(t).join("][")+"]"}function w(t){return"string"==typeof t?t.split():(St(Array.isArray(t),"invalid extension array"),t)}function x(t){return"string"==typeof t?(St("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function S(t){var e,n,r,i,o=t||{},a={},s=[],u=[],l="undefined"==typeof window?1:window.devicePixelRatio,c=!1,f=function(t){t&&St.raise(t)},h=function(){};if("string"==typeof o?(St("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),St(e,"invalid query string for element")):"object"==typeof o?!function(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}(o)?!function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(o)?(St.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=x(o.canvas):"container"in o&&(n=x(o.container)),"attributes"in o&&(a=o.attributes,St.type(a,"object","invalid context attributes")),"extensions"in o&&(s=w(o.extensions)),"optionalExtensions"in o&&(u=w(o.optionalExtensions)),"onDone"in o&&(St.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&St((l=+o.pixelRatio)>0,"invalid pixel ratio")):r=(i=o).canvas:e=o:St.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){St("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=function(t,e,n){function r(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var o=t.getBoundingClientRect();e=o.right-o.left,r=o.bottom-o.top}i.width=n*e,i.height=n*r,lt(i.style,{width:e+"px",height:r+"px"})}var i=document.createElement("canvas");return lt(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",lt(t.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",r),t.removeChild(i)}}}(n||document.body,0,l);if(!p)return null;r=p.canvas,h=p.onDestroy}i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:l,profile:c,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function T(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||ut(t.data))}function E(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function A(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1}function k(t){var e=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(t),n=Nt[A(e)>>2];return n.length>0?n.pop():new ArrayBuffer(e)}function O(t){Nt[A(t.byteLength)>>2].push(t)}function M(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],l=0;l<n;++l)for(var c=u[l],f=0;f<r;++f)i[a++]=c[f]}function P(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n==4){var u=e[n+1],l=e[n+2],c=e[n+3];for(a=0;a<s;++a)M(t[a],u,l,c,r,i),i+=o}else for(a=0;a<s;++a)P(t[a],e,n+1,r,i),i+=o}function C(t){return 0|st[Object.prototype.toString.call(t)]}function j(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function R(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var l=0;l<r;++l)t[s++]=e[i*u+o*l+a]}function F(t){for(var e=It.allocType(fe,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{le[0]=t[n];var r=ce[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function L(t){return Array.isArray(t)||ut(t)}function q(t){return"[object "+t+"]"}function D(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function N(t){if(!Array.isArray(t))return!1;return!(0===t.length||!L(t[0]))}function I(t){return Object.prototype.toString.call(t)}function B(t){return I(t)===Sn}function z(t){if(!t)return!1;var e=I(t);return kn.indexOf(e)>=0||(D(t)||N(t)||T(t))}function U(t){return 0|st[Object.prototype.toString.call(t)]}function V(t,e){return It.allocType(t.type===je?Ke:t.type,e)}function G(t,e){t.type===je?(t.data=F(e),It.freeType(e)):t.data=e}function W(t,e,n,r,i,o){var a;if(a=void 0!==Mn[t]?Mn[t]:xn[t]*On[e],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function Y(t,e,n,r,i,o,a){function s(){this.internalformat=ye,this.format=ye,this.type=We,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function u(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function l(t,r){if("object"==typeof r&&r){if("premultiplyAlpha"in r&&(St.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(St.type(r.flipY,"boolean","invalid texture flip"),t.flipY=r.flipY),"alignment"in r&&(St.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=r.alignment),"colorSpace"in r&&(St.parameter(r.colorSpace,q,"invalid colorSpace"),t.colorSpace=q[r.colorSpace]),"type"in r){var i=r.type;St(e.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),St(e.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),St(e.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),St.parameter(i,Y,"invalid texture type"),t.type=Y[i]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in r?(St(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),o=r.shape[0],a=r.shape[1],3===r.shape.length&&(s=r.shape[2],St(s>0&&s<=4,"invalid number of channels"),u=!0),St(o>=0&&o<=n.maxTextureSize,"invalid width"),St(a>=0&&a<=n.maxTextureSize,"invalid height")):("radius"in r&&(o=a=r.radius,St(o>=0&&o<=n.maxTextureSize,"invalid radius")),"width"in r&&(o=r.width,St(o>=0&&o<=n.maxTextureSize,"invalid width")),"height"in r&&(a=r.height,St(a>=0&&a<=n.maxTextureSize,"invalid height")),"channels"in r&&(s=r.channels,St(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var l=!1;if("format"in r){var c=r.format;St(e.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),St.parameter(c,H,"invalid texture format");var f=t.internalformat=H[c];t.format=nt[f],c in Y&&("type"in r||(t.type=Y[c])),c in K&&(t.compressed=!0),l=!0}!u&&l?t.channels=xn[t.format]:u&&!l?t.channels!==wn[t.format]&&(t.format=t.internalformat=wn[t.channels]):l&&u&&St(t.channels===xn[t.format],"number of channels inconsistent with specified format")}}function c(e){t.pixelStorei(mn,e.flipY),t.pixelStorei(yn,e.premultiplyAlpha),t.pixelStorei(_n,e.colorSpace),t.pixelStorei(dn,e.unpackAlignment)}function f(){s.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(t,e){var r=null;if(z(e)?r=e:e&&(St.type(e,"object","invalid pixel data type"),l(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),z(e.data)&&(r=e.data)),St(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){St(!r,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||a-t.yOffset,t.needsCopy=!0,St(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<a&&t.width>0&&t.width<=o&&t.height>0&&t.height<=a,"copy texture read out of bounds")}else if(r){if(ut(r))t.channels=t.channels||4,t.data=r,"type"in e||t.type!==We||(t.type=U(r));else if(D(r))t.channels=t.channels||4,function(t,e){var n=e.length;switch(t.type){case We:case Ye:case He:case Ke:var r=It.allocType(t.type,n);r.set(e),t.data=r;break;case je:t.data=F(e);break;default:St.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(T(r)){var s=r.data;Array.isArray(s)||t.type!==We||(t.type=U(s));var u,c,f,h,p,d,m=r.shape,y=r.stride;3===m.length?(f=m[2],d=y[2]):(St(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),u=m[0],c=m[1],h=y[0],p=y[1],t.alignment=1,t.width=u,t.height=c,t.channels=f,t.format=t.internalformat=wn[f],t.needsFree=!0,function(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,l=V(t,a*s*u),c=0,f=0;f<s;++f)for(var h=0;h<a;++h)for(var p=0;p<u;++p)l[c++]=e[n*h+r*f+i*p+o];G(t,l)}(t,s,h,p,d,r.offset)}else if(B(r)||function(t){return I(t)===Tn}(r))B(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(t){return I(t)===En}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(t){return I(t)===An}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(N(r)){var _=t.width||r[0].length,v=t.height||r.length,g=t.channels;g=L(r[0][0])?g||r[0][0].length:g||1;for(var b=Bt.shape(r),w=1,x=0;x<b.length;++x)w*=b[x];var S=V(t,w);Bt.flatten(r,b,"",S),G(t,S),t.alignment=1,t.width=_,t.height=v,t.channels=g,t.format=t.internalformat=wn[g],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Ke?St(n.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===je&&St(n.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(e,n,i){var o=e.element,a=e.data,s=e.internalformat,u=e.format,l=e.type,f=e.width,h=e.height;c(e),o?t.texImage2D(n,i,u,u,l,o):e.compressed?t.compressedTexImage2D(n,i,s,f,h,0,a):e.needsCopy?(r(),t.copyTexImage2D(n,i,u,e.xOffset,e.yOffset,f,h,0)):t.texImage2D(n,i,u,f,h,0,u,l,a)}function d(e,n,i,o,a){var s=e.element,u=e.data,l=e.internalformat,f=e.format,h=e.type,p=e.width,d=e.height;c(e),s?t.texSubImage2D(n,a,i,o,f,h,s):e.compressed?t.compressedTexSubImage2D(n,a,i,o,l,p,d,u):e.needsCopy?(r(),t.copyTexSubImage2D(n,a,i,o,e.xOffset,e.yOffset,p,d)):t.texSubImage2D(n,a,i,o,p,d,f,h,u)}function m(){return rt.pop()||new f}function y(t){t.needsFree&&It.freeType(t.data),f.call(t),rt.push(t)}function _(t,e,n){var r=t.images[0]=m();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function v(t,e){var n=null;if(z(e))u(n=t.images[0]=m(),t),h(n,e),t.mipmask=1;else if(l(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)u(n=t.images[i]=m(),t),n.width>>=i,n.height>>=i,h(n,r[i]),t.mipmask|=1<<i;else u(n=t.images[0]=m(),t),h(n,e),t.mipmask=1;u(t,t.images[0]),(t.compressed&&t.internalformat===Re||t.internalformat===Fe||t.internalformat===Le||t.internalformat===qe)&&St(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function g(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;p(n[r],e,r)}}function b(){var t=it.pop()||new function(){s.call(this),this.genMipmaps=!1,this.mipmapHint=cn,this.mipmask=0,this.images=Array(16)};s.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function w(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&y(e[n]),e[n]=null;it.push(t)}function x(){this.minFilter=nn,this.magFilter=nn,this.wrapS=Ze,this.wrapT=Ze,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=cn}function S(t,e){if("min"in e){var r=e.min;St.parameter(r,R),t.minFilter=R[r],bn.indexOf(t.minFilter)>=0&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;St.parameter(i,j),t.magFilter=j[i]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(St.parameter(s,C),o=a=C[s]):Array.isArray(s)&&(St.parameter(s[0],C),St.parameter(s[1],C),o=C[s[0]],a=C[s[1]])}else{if("wrapS"in e){var u=e.wrapS;St.parameter(u,C),o=C[u]}if("wrapT"in e){var l=e.wrapT;St.parameter(l,C),a=C[l]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var c=e.anisotropic;St("number"==typeof c&&c>=1&&c<=n.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var f=!1;switch(typeof e.mipmap){case"string":St.parameter(e.mipmap,P,"invalid mipmap hint"),t.mipmapHint=P[e.mipmap],t.genMipmaps=!0,f=!0;break;case"boolean":f=t.genMipmaps=e.mipmap;break;case"object":St(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,f=!0;break;default:St.raise("invalid mipmap type")}!f||"min"in e||(t.minFilter=on)}}function E(n,r){t.texParameteri(r,en,n.minFilter),t.texParameteri(r,tn,n.magFilter),t.texParameteri(r,Xe,n.wrapS),t.texParameteri(r,Qe,n.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,pn,n.anisotropic),n.genMipmaps&&(t.hint(ln,n.mipmapHint),t.generateMipmap(r))}function A(e){s.call(this),this.mipmask=0,this.internalformat=ye,this.id=ot++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new x,a.profile&&(this.stats={size:0})}function k(e){t.activeTexture(gn),t.bindTexture(e.target,e.texture)}function O(){var e=ct[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(pe,null)}function M(e){var n=e.texture;St(n,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(t.activeTexture(gn+r),t.bindTexture(i,null),ct[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete at[e.id],o.textureCount--}var P={"don't care":cn,"dont care":cn,nice:hn,fast:fn},C={repeat:Je,clamp:Ze,mirror:$e},j={nearest:nn,linear:rn},R=lt({mipmap:un,"nearest mipmap nearest":on,"linear mipmap nearest":an,"nearest mipmap linear":sn,"linear mipmap linear":un},j),q={none:0,browser:vn},Y={uint8:We,rgba4:Te,rgb565:Ae,"rgb5 a1":Ee},H={alpha:_e,luminance:ge,"luminance alpha":be,rgb:ve,rgba:ye,rgba4:we,"rgb5 a1":xe,rgb565:Se},K={};e.ext_srgb&&(H.srgb=Pe,H.srgba=Ce),e.oes_texture_float&&(Y.float32=Y.float=Ke),e.oes_texture_half_float&&(Y.float16=Y["half float"]=je),e.webgl_depth_texture&&(lt(H,{depth:Oe,"depth stencil":Me}),lt(Y,{uint16:Ye,uint32:He,"depth stencil":ke})),e.webgl_compressed_texture_s3tc&&lt(K,{"rgb s3tc dxt1":Re,"rgba s3tc dxt1":Fe,"rgba s3tc dxt3":Le,"rgba s3tc dxt5":qe}),e.webgl_compressed_texture_atc&&lt(K,{"rgb atc":De,"rgba atc explicit alpha":Ne,"rgba atc interpolated alpha":Ie}),e.webgl_compressed_texture_pvrtc&&lt(K,{"rgb pvrtc 4bppv1":Be,"rgb pvrtc 2bppv1":ze,"rgba pvrtc 4bppv1":Ue,"rgba pvrtc 2bppv1":Ve}),e.webgl_compressed_texture_etc1&&(K["rgb etc1"]=Ge);var X=Array.prototype.slice.call(t.getParameter(he));Object.keys(K).forEach(function(t){var e=K[t];X.indexOf(e)>=0&&(H[t]=e)});var Q=Object.keys(H);n.textureFormats=Q;var J=[];Object.keys(H).forEach(function(t){var e=H[t];J[e]=t});var Z=[];Object.keys(Y).forEach(function(t){var e=Y[t];Z[e]=t});var $=[];Object.keys(j).forEach(function(t){var e=j[t];$[e]=t});var tt=[];Object.keys(R).forEach(function(t){var e=R[t];tt[e]=t});var et=[];Object.keys(C).forEach(function(t){var e=C[t];et[e]=t});var nt=Q.reduce(function(t,e){var n=H[e];return n===ge||n===_e||n===ge||n===be||n===Oe||n===Me?t[n]=n:n===xe||e.indexOf("rgba")>=0?t[n]=ye:t[n]=ve,t},{}),rt=[],it=[],ot=0,at={},st=n.maxTextureUnits,ct=Array(st).map(function(){return null});return lt(A.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var n=0;n<st;++n){var r=ct[n];if(r){if(r.bindCount>0)continue;r.unit=-1}ct[n]=this,e=n;break}e>=st&&St.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<e+1&&(o.maxTextureUnits=e+1),this.unit=e,t.activeTexture(gn+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&M(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(at).forEach(function(e){t+=at[e].stats.size}),t}),{create2D:function(e,r){function i(t,e){var r=s.texInfo;x.call(r);var o=b();return"number"==typeof t?"number"==typeof e?_(o,0|t,0|e):_(o,0|t,0|t):t?(St.type(t,"object","invalid arguments to regl.texture"),S(r,t),v(o,t)):_(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),s.mipmask=o.mipmask,u(s,o),St.texture2D(r,o,n),s.internalformat=o.internalformat,i.width=o.width,i.height=o.height,k(s),g(o,pe),E(r,pe),O(),w(o),a.profile&&(s.stats.size=W(s.internalformat,s.type,o.width,o.height,r.genMipmaps,!1)),i.format=J[s.internalformat],i.type=Z[s.type],i.mag=$[r.magFilter],i.min=tt[r.minFilter],i.wrapS=et[r.wrapS],i.wrapT=et[r.wrapT],i}var s=new A(pe);return at[s.id]=s,o.textureCount++,i(e,r),i.subimage=function(t,e,n,r){St(!!t,"must specify image data");var o=0|e,a=0|n,l=0|r,c=m();return u(c,s),c.width=0,c.height=0,h(c,t),c.width=c.width||(s.width>>l)-o,c.height=c.height||(s.height>>l)-a,St(s.type===c.type&&s.format===c.format&&s.internalformat===c.internalformat,"incompatible format for texture.subimage"),St(o>=0&&a>=0&&o+c.width<=s.width&&a+c.height<=s.height,"texture.subimage write out of bounds"),St(s.mipmask&1<<l,"missing mipmap data"),St(c.data||c.element||c.needsCopy,"missing image data"),k(s),d(c,pe,o,a,l),O(),y(c),i},i.resize=function(e,n){var r=0|e,o=0|n||r;if(r===s.width&&o===s.height)return i;i.width=s.width=r,i.height=s.height=o,k(s);for(var u=0;s.mipmask>>u;++u)t.texImage2D(pe,u,s.format,r>>u,o>>u,0,s.format,s.type,null);return O(),a.profile&&(s.stats.size=W(s.internalformat,s.type,r,o,!1,!1)),i},i._reglType="texture2d",i._texture=s,a.profile&&(i.stats=s.stats),i.destroy=function(){s.decRef()},i},createCube:function(e,r,i,s,c,f){function p(t,e,r,i,o,s){var c,f=T.texInfo;for(x.call(f),c=0;c<6;++c)M[c]=b();if("number"!=typeof t&&t)if("object"==typeof t)if(e)v(M[0],t),v(M[1],e),v(M[2],r),v(M[3],i),v(M[4],o),v(M[5],s);else if(S(f,t),l(T,t),"faces"in t){var h=t.faces;for(St(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),c=0;c<6;++c)St("object"==typeof h[c]&&!!h[c],"invalid input for cube map face"),u(M[c],T),v(M[c],h[c])}else for(c=0;c<6;++c)v(M[c],t);else St.raise("invalid arguments to cube map");else{var d=0|t||1;for(c=0;c<6;++c)_(M[c],d,d)}for(u(T,M[0]),f.genMipmaps?T.mipmask=(M[0].width<<1)-1:T.mipmask=M[0].mipmask,St.textureCube(T,f,M,n),T.internalformat=M[0].internalformat,p.width=M[0].width,p.height=M[0].height,k(T),c=0;c<6;++c)g(M[c],me+c);for(E(f,de),O(),a.profile&&(T.stats.size=W(T.internalformat,T.type,p.width,p.height,f.genMipmaps,!0)),p.format=J[T.internalformat],p.type=Z[T.type],p.mag=$[f.magFilter],p.min=tt[f.minFilter],p.wrapS=et[f.wrapS],p.wrapT=et[f.wrapT],c=0;c<6;++c)w(M[c]);return p}var T=new A(de);at[T.id]=T,o.cubeCount++;var M=new Array(6);return p(e,r,i,s,c,f),p.subimage=function(t,e,n,r,i){St(!!e,"must specify image data"),St("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,l=m();return u(l,T),l.width=0,l.height=0,h(l,e),l.width=l.width||(T.width>>s)-o,l.height=l.height||(T.height>>s)-a,St(T.type===l.type&&T.format===l.format&&T.internalformat===l.internalformat,"incompatible format for texture.subimage"),St(o>=0&&a>=0&&o+l.width<=T.width&&a+l.height<=T.height,"texture.subimage write out of bounds"),St(T.mipmask&1<<s,"missing mipmap data"),St(l.data||l.element||l.needsCopy,"missing image data"),k(T),d(l,me+t,o,a,s),O(),y(l),p},p.resize=function(e){var n=0|e;if(n!==T.width){p.width=T.width=n,p.height=T.height=n,k(T);for(var r=0;r<6;++r)for(var i=0;T.mipmask>>i;++i)t.texImage2D(me+r,i,T.format,n>>i,n>>i,0,T.format,T.type,null);return O(),a.profile&&(T.stats.size=W(T.internalformat,T.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=T,a.profile&&(p.stats=T.stats),p.destroy=function(){T.decRef()},p},clear:function(){for(var e=0;e<st;++e)t.activeTexture(gn+e),t.bindTexture(pe,null),ct[e]=null;Pt(at).forEach(M),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){Pt(at).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(0!=(e.mipmask&1<<n))if(e.target===pe)t.texImage2D(pe,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(me+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);E(e.texInfo,e.target)})}}}function H(t,e,n){return jn[t]*e*n}function K(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Zn,this.offset=0,this.stride=0,this.divisor=0}function X(t,e,n,r){function i(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function a(n,r,i){var o=n===$n?u:l,a=o[r];if(!a){var s=e.str(r);a=t.createShader(n),t.shaderSource(a,s),t.compileShader(a),St.shaderError(t,a,s,n,i),o[r]=a}return a}function s(n,s){var u,l,c=a($n,n.fragId),f=a(tr,n.vertId),h=n.program=t.createProgram();t.attachShader(h,c),t.attachShader(h,f),t.linkProgram(h),St.linkError(t,h,e.str(n.fragId),e.str(n.vertId),s);var p=t.getProgramParameter(h,er);r.profile&&(n.stats.uniformsCount=p);var d=n.uniforms;for(u=0;u<p;++u)if(l=t.getActiveUniform(h,u))if(l.size>1)for(var m=0;m<l.size;++m){var y=l.name.replace("[0]","["+m+"]");o(d,new i(y,e.id(y),t.getUniformLocation(h,y),l))}else o(d,new i(l.name,e.id(l.name),t.getUniformLocation(h,l.name),l));var _=t.getProgramParameter(h,nr);r.profile&&(n.stats.attributesCount=_);var v=n.attributes;for(u=0;u<_;++u)(l=t.getActiveAttrib(h,u))&&o(v,new i(l.name,e.id(l.name),t.getAttribLocation(h,l.name),l))}var u={},l={},c={},f=[],h=0;return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return f.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return f.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);Pt(u).forEach(e),u={},Pt(l).forEach(e),l={},f.forEach(function(e){t.deleteProgram(e.program)}),f.length=0,c={},n.shaderCount=0},program:function(t,e,i){St.command(t>=0,"missing vertex shader",i),St.command(e>=0,"missing fragment shader",i);var o=c[e];o||(o=c[e]={});var a=o[t];return a||(a=new function(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}(e,t),n.shaderCount++,s(a,i),o[t]=a,f.push(a)),a},restore:function(){u={},l={};for(var t=0;t<f.length;++t)s(f[t])},shader:a,frag:-1,vert:-1}}function Q(t,e,n,r,i,o){function a(a){var s;null===e.next?(St(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),s=ir):(St(null!==e.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),s=e.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?St(s===ir||s===ar,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):St(s===ir,"Reading from a framebuffer is only allowed for the type 'uint8'"));var u=0,l=0,c=r.framebufferWidth,f=r.framebufferHeight,h=null;ut(a)?h=a:a&&(St.type(a,"object","invalid arguments to regl.read()"),u=0|a.x,l=0|a.y,St(u>=0&&u<r.framebufferWidth,"invalid x offset for regl.read"),St(l>=0&&l<r.framebufferHeight,"invalid y offset for regl.read"),c=0|(a.width||r.framebufferWidth-u),f=0|(a.height||r.framebufferHeight-l),h=a.data||null),h&&(s===ir?St(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):s===ar&&St(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),St(c>0&&c+u<=r.framebufferWidth,"invalid width for read pixels"),St(f>0&&f+l<=r.framebufferHeight,"invalid height for read pixels"),n();var p=c*f*4;return h||(s===ir?h=new Uint8Array(p):s===ar&&(h=h||new Float32Array(p))),St.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),St(h.byteLength>=p,"data buffer for regl.read() too small"),t.pixelStorei(or,4),t.readPixels(u,l,c,f,rr,s,h),h}return function(t){return t&&"framebuffer"in t?function(t){var n;return e.setFBO({framebuffer:t.framebuffer},function(){n=a(t)}),n}(t):a(t)}}function J(t){return Array.prototype.slice.call(t)}function Z(t){return J(t).join("")}function $(t){return Array.isArray(t)||ut(t)||T(t)}function tt(t){return t.sort(function(t,e){return t===Ur?-1:e===Ur?1:t<e?-1:1})}function et(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function nt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function rt(t){return new et(!1,!1,!1,t)}function it(t,e){var n=t.type;if(n===fr){var r=t.data.length;return new et(!0,r>=1,r>=2,e)}if(n===mr){var i=t.data;return new et(i.thisDep,i.contextDep,i.propDep,e)}return new et(n===dr,n===pr,n===hr,e)}function ot(t,e,n,r,i,o,a,s,u,l,c,f,h,p,d){function m(t){return t.replace(".","_")}function y(t,e,n){var r=m(t);U.push(t),z[r]=B[r]=!!n,V[r]=e}function _(t,e,n){var r=m(t);U.push(t),Array.isArray(n)?(B[r]=n.slice(),z[r]=n.slice()):B[r]=z[r]=n,G[r]=e}function v(){var t=function(){function t(){var t=[],e=[];return lt(function(){t.push.apply(t,J(arguments))},{def:function(){var r="v"+n++;return e.push(r),arguments.length>0&&(t.push(r,"="),t.push.apply(t,J(arguments)),t.push(";")),r},toString:function(){return Z([e.length>0?"var "+e+";":"",Z(t)])}})}function e(){function e(t,e){r(t,e,"=",n.def(t,e),";")}var n=t(),r=t(),i=n.toString,o=r.toString;return lt(function(){n.apply(n,J(arguments))},{def:n.def,entry:n,exit:r,save:e,set:function(t,r,i){e(t,r),n(t,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=t(),a={};return{global:o,link:function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return r[e];var o="g"+n++;return r.push(o),i.push(t),o},block:t,proc:function(t,n){function r(){var t="a"+i.length;return i.push(t),t}var i=[];n=n||0;for(var o=0;o<n;++o)r();var s=e(),u=s.toString;return a[t]=lt(s,{arg:r,toString:function(){return Z(["function(",i.join(),"){",u(),"}"])}})},scope:e,cond:function(){var t=Z(arguments),n=e(),r=e(),i=n.toString,o=r.toString;return lt(n,{then:function(){return n.apply(n,J(arguments)),this},else:function(){return r.apply(r,J(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Z(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',o,"return {"];Object.keys(a).forEach(function(e){t.push('"',e,'":',a[e].toString(),",")}),t.push("}");var e=Z(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(e)).apply(null,i)}}}(),n=t.link,r=t.global;t.id=H++,t.batchId="0";var i=n(W),o=t.shared={props:"a0"};Object.keys(W).forEach(function(t){o[t]=r.def(i,".",t)}),St.optional(function(){t.CHECK=n(St),t.commandStr=St.guessCommand(),t.command=n(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},Y.invalidBlendCombinations=Ji});var a=t.next={},s=t.current={};Object.keys(G).forEach(function(t){Array.isArray(B[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))});var u=t.constants={};Object.keys(Y).forEach(function(t){u[t]=r.def(JSON.stringify(Y[t]))}),t.invoke=function(e,r){switch(r.type){case fr:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case hr:return e.def(o.props,r.data);case pr:return e.def(o.context,r.data);case dr:return e.def("this",r.data);case mr:return r.data.append(t,e),r.data.ref}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var r=e.id(t);if(r in c)return c[r];var i=l.scope[r];i||(i=l.scope[r]=new q);return c[r]=n(i)},t}function g(t,n,a,u,l){function f(t){var e=y[t];e&&(v[t]=e)}var h=t.static,p=t.dynamic;St.optional(function(){function t(t){Object.keys(t).forEach(function(t){St.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',l.commandStr)})}var e=[Gr,Wr,Yr,Hr,Kr,Qr,Xr,Jr,Vr].concat(U);t(h),t(p)});var d=function(t,e){var n=t.static,r=t.dynamic;if(Gr in n){var i=n[Gr];return i?(i=s.getFramebuffer(i),St.command(i,"invalid framebuffer object"),rt(function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+Zr,n+".width"),e.set(o,"."+$r,n+".height"),n})):rt(function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Zr,r+"."+ni),e.set(r,"."+$r,r+"."+ri),"null"})}if(Gr in r){var o=r[Gr];return it(o,function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");St.optional(function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")}),e.set(i,".next",a);var s=r.context;return e.set(s,"."+Zr,a+"?"+a+".width:"+s+"."+ni),e.set(s,"."+$r,a+"?"+a+".height:"+s+"."+ri),a})}return null}(t),y=function(t,e,n){function r(t){if(t in i){var r=i[t];St.commandType(r,"object","invalid "+t,n.commandStr);var a,s,u=!0,l=0|r.x,c=0|r.y;return"width"in r?(a=0|r.width,St.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in r?(s=0|r.height,St.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new et(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,function(t,e){var n=t.shared.context,i=a;"width"in r||(i=e.def(n,".",Zr,"-",l));var o=s;return"height"in r||(o=e.def(n,".",$r,"-",c)),[l,c,i,o]})}if(t in o){var f=o[t],h=it(f,function(e,n){var r=e.invoke(n,f);St.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)});var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Zr,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",$r,"-",a,")");return St.optional(function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)}),[o,a,s,u]});return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new et(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Zr),e.def(n,".",$r)]}):null}var i=t.static,o=t.dynamic,a=r(Ur);if(a){var s=a;a=new et(a.thisDep,a.contextDep,a.propDep,function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+ti,n[2]),e.set(r,"."+ei,n[3]),n})}return{viewport:a,scissor_box:r(zr)}}(t,d,l),_=function(t,e){function n(t,n){if(t in r){var o=0|r[t];return St.command(!n||o>=0,"invalid "+t,e.commandStr),rt(function(t,e){return n&&(t.OFFSET=o),o})}if(t in i){var s=i[t];return it(s,function(e,r){var i=e.invoke(r,s);return n&&(e.OFFSET=i,St.optional(function(){e.assert(r,i+">=0","invalid "+t)})),i})}return n&&a?rt(function(t,e){return t.OFFSET="0",0}):null}var r=t.static,i=t.dynamic,a=function(){if(Hr in r){var t=r[Hr];$(t)?t=o.getElements(o.create(t,!0)):t&&(t=o.getElements(t),St.command(t,"invalid elements",e.commandStr));var n=rt(function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null});return n.value=t,n}if(Hr in i){var a=i[Hr];return it(a,function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,o=t.invoke(e,a),s=e.def("null"),u=e.def(r,"(",o,")"),l=t.cond(u).then(s,"=",i,".createStream(",o,");").else(s,"=",i,".getElements(",o,");");return St.optional(function(){t.assert(l.else,"!"+o+"||"+s,"invalid elements")}),e.entry(l),e.exit(t.cond(u).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s})}return null}(),s=n(Qr,!0);return{elements:a,primitive:function(){if(Kr in r){var t=r[Kr];return St.commandParameter(t,Qt,"invalid primitve",e.commandStr),rt(function(e,n){return Qt[t]})}if(Kr in i){var n=i[Kr];return it(n,function(t,e){var r=t.constants.primTypes,i=t.invoke(e,n);return St.optional(function(){t.assert(e,i+" in "+r,"invalid primitive, must be one of "+Object.keys(Qt))}),e.def(r,"[",i,"]")})}return a?nt(a)?rt(a.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return Li}):new et(a.thisDep,a.contextDep,a.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Li)}):null}(),count:function(){if(Xr in r){var t=0|r[Xr];return St.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),rt(function(){return t})}if(Xr in i){var n=i[Xr];return it(n,function(t,e){var r=t.invoke(e,n);return St.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(a){if(nt(a)){if(a)return s?new et(s.thisDep,s.contextDep,s.propDep,function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return St.optional(function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")}),n}):rt(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var o=rt(function(){return-1});return St.optional(function(){o.MISSING=!0}),o}var u=new et(a.thisDep||s.thisDep,a.contextDep||s.contextDep,a.propDep||s.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")});return St.optional(function(){u.DYNAMIC=!0}),u}return null}(),instances:n(Jr,!1),offset:s}}(t,l),v=function(t,e){var n=t.static,i=t.dynamic,o={};return U.forEach(function(t){function a(e,r){if(t in n){var a=e(n[t]);o[s]=rt(function(){return a})}else if(t in i){var u=i[t];o[s]=it(u,function(t,e){return r(t,e,t.invoke(e,u))})}}var s=m(t);switch(t){case Ar:case _r:case yr:case Lr:case wr:case Br:case Pr:case jr:case Rr:case Tr:return a(function(n){return St.commandType(n,"boolean",t,e.commandStr),n},function(e,n,r){return St.optional(function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)}),r});case xr:return a(function(n){return St.commandParameter(n,Zi,"invalid "+t,e.commandStr),Zi[n]},function(e,n,r){var i=e.constants.compareFuncs;return St.optional(function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Zi))}),n.def(i,"[",r,"]")});case Sr:return a(function(t){return St.command(L(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,n){return St.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]});case br:return a(function(t){St.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return St.commandParameter(n,Qi,s+".srcRGB",e.commandStr),St.commandParameter(r,Qi,s+".srcAlpha",e.commandStr),St.commandParameter(i,Qi,s+".dstRGB",e.commandStr),St.commandParameter(o,Qi,s+".dstAlpha",e.commandStr),St.command(-1===Ji.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Qi[n],Qi[i],Qi[r],Qi[o]]},function(e,n,r){function i(i,a){var s=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return St.optional(function(){e.assert(n,s+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qi))}),s}var o=e.constants.blendFuncs;St.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),s=i("dst","RGB");St.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=n.def(o,"[",a,"]"),l=n.def(o,"[",i("src","Alpha"),"]");return[u,n.def(o,"[",s,"]"),l,n.def(o,"[",i("dst","Alpha"),"]")]});case gr:return a(function(n){return"string"==typeof n?(St.commandParameter(n,D,"invalid "+t,e.commandStr),[D[n],D[n]]):"object"==typeof n?(St.commandParameter(n.rgb,D,t+".rgb",e.commandStr),St.commandParameter(n.alpha,D,t+".alpha",e.commandStr),[D[n.rgb],D[n.alpha]]):void St.commandRaise("invalid blend.equation",e.commandStr)},function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return St.optional(function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(D))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")}),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]});case vr:return a(function(t){return St.command(L(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),E(4,function(e){return+t[e]})},function(t,e,n){return St.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),E(4,function(t){return e.def("+",n,"[",t,"]")})});case qr:return a(function(t){return St.commandType(t,"number",s,e.commandStr),0|t},function(t,e,n){return St.optional(function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")}),e.def(n,"|0")});case Dr:return a(function(n){St.commandType(n,"object",s,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return St.commandParameter(r,Zi,t+".cmp",e.commandStr),St.commandType(i,"number",t+".ref",e.commandStr),St.commandType(o,"number",t+".mask",e.commandStr),[Zi[r],i,o]},function(t,e,n){var r=t.constants.compareFuncs;return St.optional(function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Vi),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case Nr:case Ir:return a(function(n){St.commandType(n,"object",s,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return St.commandParameter(r,$i,t+".fail",e.commandStr),St.commandParameter(i,$i,t+".zfail",e.commandStr),St.commandParameter(o,$i,t+".zpass",e.commandStr),[t===Ir?Di:qi,$i[r],$i[i],$i[o]]},function(e,n,r){function i(i){return St.optional(function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys($i))}),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",Vi)}var o=e.constants.stencilOps;return St.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[t===Ir?Di:qi,i("fail"),i("zfail"),i("zpass")]});case Cr:return a(function(t){St.commandType(t,"object",s,e.commandStr);var n=0|t.factor,r=0|t.units;return St.commandType(n,"number",s+".factor",e.commandStr),St.commandType(r,"number",s+".units",e.commandStr),[n,r]},function(e,n,r){return St.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case kr:return a(function(t){var n=0;return"front"===t?n=qi:"back"===t&&(n=Di),St.command(!!n,s,e.commandStr),n},function(t,e,n){return St.optional(function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),e.def(n,'==="front"?',qi,":",Di)});case Mr:return a(function(t){return St.command("number"==typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t},function(t,e,n){return St.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")}),n});case Or:return a(function(t){return St.commandParameter(t,eo,s,e.commandStr),eo[t]},function(t,e,n){return St.optional(function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(n+'==="cw"?'+Ni+":"+Ii)});case Er:return a(function(t){return St.command(L(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,n){return St.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),E(4,function(t){return"!!"+n+"["+t+"]"})});case Fr:return a(function(t){St.command("object"==typeof t&&t,s,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return St.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]},function(t,e,n){return St.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]})}}),o}(t,l),g=function(t){function n(t){if(t in i){var n=e.id(i[t]);St.optional(function(){c.shader(to[t],n,St.guessCommand())});var r=rt(function(){return n});return r.id=n,r}if(t in o){var a=o[t];return it(a,function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return St.optional(function(){n(e.shared.shader,".shader(",to[t],",",i,",",e.command,");")}),i})}return null}var r,i=t.static,o=t.dynamic,a=n(Yr),s=n(Wr),u=null;return nt(a)&&nt(s)?(u=c.program(s.id,a.id),r=rt(function(t,e){return t.link(u)})):r=new et(a&&a.thisDep||s&&s.thisDep,a&&a.contextDep||s&&s.contextDep,a&&a.propDep||s&&s.propDep,function(t,e){var n,r=t.shared.shader;n=a?a.append(t,e):e.def(r,".",Yr);var i=r+".program("+(s?s.append(t,e):e.def(r,".",Wr))+","+n;return St.optional(function(){i+=","+t.command}),e.def(i+")")}),{frag:a,vert:s,progVar:r,program:u}}(t);f(Ur),f(m(zr));var b=Object.keys(v).length>0,w={framebuffer:d,draw:_,shader:g,state:v,dirty:b};return w.profile=function(t){var e,n=t.static,r=t.dynamic;if(Vr in n){var i=!!n[Vr];(e=rt(function(t,e){return i})).enable=i}else if(Vr in r){var o=r[Vr];e=it(o,function(t,e){return t.invoke(e,o)})}return e}(t),w.uniforms=function(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach(function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=rt(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=rt(function(t){return t.link(o)}):"framebuffer"===a||"framebufferCube"===a?(St.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=rt(function(t){return t.link(o.color[0])})):St.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else L(o)?r=rt(function(e){return e.global.def("[",E(o.length,function(n){return St.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]}),"]")}):St.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r}),Object.keys(r).forEach(function(t){var e=r[t];i[t]=it(e,function(t,n){return t.invoke(n,e)})}),i}(a,l),w.attributes=function(t,n){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach(function(t){var o=r[t],s=e.id(t),u=new q;if($(o))u.state=lr,u.buffer=i.getBuffer(i.create(o,oi,!1,!0)),u.type=0;else{var l=i.getBuffer(o);if(l)u.state=lr,u.buffer=l,u.type=0;else if(St.command("object"==typeof o&&o,"invalid data for attribute "+t,n.commandStr),o.constant){var c=o.constant;u.buffer="null",u.state=cr,"number"==typeof c?u.x=c:(St.command(L(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,n.commandStr),sr.forEach(function(t,e){e<c.length&&(u[t]=c[e])}))}else{l=$(o.buffer)?i.getBuffer(i.create(o.buffer,oi,!1,!0)):i.getBuffer(o.buffer),St.command(!!l,'missing buffer for attribute "'+t+'"',n.commandStr);var f=0|o.offset;St.command(f>=0,'invalid offset for attribute "'+t+'"',n.commandStr);var h=0|o.stride;St.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',n.commandStr);var p=0|o.size;St.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',n.commandStr);var d=!!o.normalized,m=0;"type"in o&&(St.commandParameter(o.type,zt,"invalid type for attribute "+t,n.commandStr),m=zt[o.type]);var y=0|o.divisor;"divisor"in o&&(St.command(0===y||N,'cannot specify divisor for attribute "'+t+'", instancing not supported',n.commandStr),St.command(y>=0,'invalid divisor for attribute "'+t+'"',n.commandStr)),St.optional(function(){var e=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach(function(n){St.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",e)})}),u.buffer=l,u.state=lr,u.size=p,u.normalized=d,u.type=m||l.dtype,u.offset=f,u.stride=h,u.divisor=y}}a[t]=rt(function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach(function(t){r[t]=u[t]}),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r})}),Object.keys(o).forEach(function(t){var e=o[t];a[t]=it(e,function(n,r){function i(t){r(l[t],"=",o,".",t,"|0;")}var o=n.invoke(r,e),a=n.shared,s=a.isBufferArgs,u=a.buffer;St.optional(function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+s+"("+o+")||"+u+".getBuffer("+o+")||"+u+".getBuffer("+o+".buffer)||"+s+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var l={isStream:r.def(!1)},c=new q;c.state=lr,Object.keys(c).forEach(function(t){l[t]=r.def(""+c[t])});var f=l.buffer,h=l.type;return r("if(",s,"(",o,")){",l.isStream,"=true;",f,"=",u,".createStream(",oi,",",o,");",h,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",o,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',o,"){",l.state,"=",cr,";","if(typeof "+o+'.constant === "number"){',l[sr[0]],"=",o,".constant;",sr.slice(1).map(function(t){return l[t]}).join("="),"=0;","}else{",sr.map(function(t,e){return l[t]+"="+o+".constant.length>="+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",s,"(",o,".buffer)){",f,"=",u,".createStream(",oi,",",o,".buffer);","}else{",f,"=",u,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",f,".dtype;",l.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),r("}}"),r.exit("if(",l.isStream,"){",u,".destroyStream(",f,");","}"),l})}),a}(n,l),w.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach(function(t){var n=e[t];r[t]=rt(function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)})}),Object.keys(n).forEach(function(t){var e=n[t];r[t]=it(e,function(t,n){return t.invoke(n,e)})}),r}(u),w}function b(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach(function(o){e.save(r,"."+o);var a=n[o];i(r,".",o,"=",a.append(t,e),";")}),e(i)}function w(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;I&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,l=t.constants,c=l.drawBuffer,f=l.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",Ki,",",u,".framebuffer);"),I&&e(i,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",Ki,",null);"),I&&e(i,".drawBuffersWEBGL(",f,");"),e("}",s,".cur=",u,";"),r||e("}")}function x(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,l=t.cond(s,".dirty");U.forEach(function(e){var r=m(e);if(!(r in n.state)){var c,f;if(r in a){c=a[r],f=o[r];var h=E(B[r].length,function(t){return l.def(c,"[",t,"]")});l(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(i,".",G[r],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else{c=l.def(u,".",r);var p=t.cond(c,"!==",s,".",r);l(p),r in V?p(t.cond(c).then(i,".enable(",V[r],");").else(i,".disable(",V[r],");"),s,".",r,"=",c,";"):p(i,".",G[r],"(",c,");",s,".",r,"=",c,";")}}}),0===Object.keys(n.state).length&&l(s,".dirty=false;"),e(l)}function S(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;tt(Object.keys(n)).forEach(function(i){var u=n[i];if(!r||r(u)){var l=u.append(t,e);if(V[i]){var c=V[i];nt(u)?l?e(s,".enable(",c,");"):e(s,".disable(",c,");"):e(t.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",i,"=",l,";")}else if(L(l)){var f=o[i];e(s,".",G[i],"(",l,");",l.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(s,".",G[i],"(",l,");",a,".",i,"=",l,";")}})}function T(t,e){N&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function A(t,e,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){t(l=e.def(),"=",o(),";"),"string"==typeof i?t(d,".count+=",i,";"):t(d,".count++;"),p&&(r?t(c=e.def(),"=",y,".getNumPendingQueries();"):t(y,".beginQuery(",d,");"))}function s(t){t(d,".cpuTime+=",o(),"-",l,";"),p&&(r?t(y,".pushScopeStats(",c,",",y,".getNumPendingQueries(),",d,");"):t(y,".endQuery();"))}function u(t){var n=e.def(m,".profile");e(m,".profile=",t,";"),e.exit(m,".profile=",n,";")}var l,c,f,h=t.shared,d=t.stats,m=h.current,y=h.timer,_=n.profile;if(_){if(nt(_))return void(_.enable?(a(e),s(e.exit),u("true")):u("false"));u(f=_.append(t,e))}else f=e.def(m,".profile");var v=t.block();a(v),e("if(",f,"){",v,"}");var g=t.block();s(g),e.exit("if(",f,"){",g,"}")}function k(t,e,n,r,i){var o=t.shared;r.forEach(function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!i(u))return;a=u.append(t,e)}else{if(!i(no))return;var l=t.scopeAttrib(s);St.optional(function(){t.assert(e,l+".state","missing attribute "+s)}),a={},Object.keys(new q).forEach(function(t){a[t]=e.def(l,".",t)})}!function(n,r,i){function a(){e("if(!",c,".buffer){",u,".enableVertexAttribArray(",l,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",c,".type!==",o,"||",c,".size!==",n,"||",d.map(function(t){return c+"."+t+"!=="+i[t]}).join("||"),"){",u,".bindBuffer(",oi,",",h,".buffer);",u,".vertexAttribPointer(",[l,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",d.map(function(t){return c+"."+t+"="+i[t]+";"}).join(""),"}"),N){var a=i.divisor;e("if(",c,".divisor!==",a,"){",t.instancing,".vertexAttribDivisorANGLE(",[l,a],");",c,".divisor=",a,";}")}}function s(){e("if(",c,".buffer){",u,".disableVertexAttribArray(",l,");","}if(",sr.map(function(t,e){return c+"."+t+"!=="+p[e]}).join("||"),"){",u,".vertexAttrib4f(",l,",",p,");",sr.map(function(t,e){return c+"."+t+"="+p[e]+";"}).join(""),"}")}var u=o.gl,l=e.def(n,".location"),c=e.def(o.attributes,"[",l,"]"),f=i.state,h=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];f===lr?a():f===cr?s():(e("if(",f,"===",lr,"){"),a(),e("}else{"),s(),e("}"))}(t.link(r),function(t){switch(t){case gi:case Si:case ki:return 2;case bi:case Ti:case Oi:return 3;case wi:case Ei:case Mi:return 4;default:return 1}}(r.info.type),a)})}function O(t,n,r,i,o){for(var a,s=t.shared,u=s.gl,l=0;l<i.length;++l){var c,f=i[l],h=f.name,p=f.info.type,d=r.uniforms[h],m=t.link(f)+".location";if(d){if(!o(d))continue;if(nt(d)){var y=d.value;if(St.command(null!==y&&void 0!==y,'missing uniform "'+h+'"',t.commandStr),p===Ri||p===Fi){St.command("function"==typeof y&&(p===Ri&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||p===Fi&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,t.commandStr);var _=t.link(y._texture||y.color[0]._texture);n(u,".uniform1i(",m,",",_+".bind());"),n.exit(_,".unbind();")}else if(p===Pi||p===Ci||p===ji){St.optional(function(){St.command(L(y),"invalid matrix for uniform "+h,t.commandStr),St.command(p===Pi&&4===y.length||p===Ci&&9===y.length||p===ji&&16===y.length,"invalid length for matrix uniform "+h,t.commandStr)});var v=t.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),g=2;p===Ci?g=3:p===ji&&(g=4),n(u,".uniformMatrix",g,"fv(",m,",false,",v,");")}else{switch(p){case vi:St.commandType(y,"number","uniform "+h,t.commandStr),a="1f";break;case gi:St.command(L(y)&&2===y.length,"uniform "+h,t.commandStr),a="2f";break;case bi:St.command(L(y)&&3===y.length,"uniform "+h,t.commandStr),a="3f";break;case wi:St.command(L(y)&&4===y.length,"uniform "+h,t.commandStr),a="4f";break;case Ai:St.commandType(y,"boolean","uniform "+h,t.commandStr),a="1i";break;case xi:St.commandType(y,"number","uniform "+h,t.commandStr),a="1i";break;case ki:case Si:St.command(L(y)&&2===y.length,"uniform "+h,t.commandStr),a="2i";break;case Oi:case Ti:St.command(L(y)&&3===y.length,"uniform "+h,t.commandStr),a="3i";break;case Mi:case Ei:St.command(L(y)&&4===y.length,"uniform "+h,t.commandStr),a="4i"}n(u,".uniform",a,"(",m,",",L(y)?Array.prototype.slice.call(y):y,");")}continue}c=d.append(t,n)}else{if(!o(no))continue;c=n.def(s.uniforms,"[",e.id(h),"]")}p===Ri?n("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):p===Fi&&n("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),St.optional(function(){function e(e,r){t.assert(n,e,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){e("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(n,r){e(s.isArrayLike+"("+c+")&&"+c+".length==="+n,"invalid vector, should have length "+n,t.commandStr)}function o(n){e("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(n===si?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case xi:r("number");break;case Si:i(2);break;case Ti:i(3);break;case Ei:i(4);break;case vi:r("number");break;case gi:i(2);break;case bi:i(3);break;case wi:i(4);break;case Ai:r("boolean");break;case ki:i(2);break;case Oi:i(3);break;case Mi:case Pi:i(4);break;case Ci:i(9);break;case ji:i(16);break;case Ri:o(si);break;case Fi:o(ui)}});var b=1;switch(p){case Ri:case Fi:var w=n.def(c,"._texture");n(u,".uniform1i(",m,",",w,".bind());"),n.exit(w,".unbind();");continue;case xi:case Ai:a="1i";break;case Si:case ki:a="2i",b=2;break;case Ti:case Oi:a="3i",b=3;break;case Ei:case Mi:a="4i",b=4;break;case vi:a="1f";break;case gi:a="2f",b=2;break;case bi:a="3f",b=3;break;case wi:a="4f",b=4;break;case Pi:a="Matrix2fv";break;case Ci:a="Matrix3fv";break;case ji:a="Matrix4fv"}if(n(u,".uniform",a,"(",m,","),"M"===a.charAt(0)){var x=Math.pow(p-Pi+2,2),S=t.global.def("new Float32Array(",x,")");n("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",E(x,function(t){return S+"["+t+"]="+c+"["+t+"]"}),",",S,")")}else n(b>1?E(b,function(t){return c+"["+t+"]"}):c);n(");")}}function M(t,e,n,r){function i(i){var o=c[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(l,".",i)}function o(){function t(){n(y,".drawElementsInstancedANGLE(",[h,d,_,p+"<<(("+_+"-"+ur+")>>1)",m],");")}function e(){n(y,".drawArraysInstancedANGLE(",[h,p,d,m],");")}f?v?t():(n("if(",f,"){"),t(),n("}else{"),e(),n("}")):e()}function a(){function t(){n(u+".drawElements("+[h,d,_,p+"<<(("+_+"-"+ur+")>>1)"]+");")}function e(){n(u+".drawArrays("+[h,p,d]+");")}f?v?t():(n("if(",f,"){"),t(),n("}else{"),e(),n("}")):e()}var s=t.shared,u=s.gl,l=s.draw,c=r.draw,f=function(){var i,o=c.elements,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a)):i=a.def(l,".",Hr),i&&a("if("+i+")"+u+".bindBuffer("+ai+","+i+".buffer.buffer);"),i}(),h=i(Kr),p=i(Qr),d=function(){var i,o=c.count,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a),St.optional(function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(a,i+">=0","missing vertex count")})):(i=a.def(l,".",Xr),St.optional(function(){t.assert(a,i+">=0","missing vertex count")})),i}();if("number"==typeof d){if(0===d)return}else n("if(",d,"){"),n.exit("}");var m,y;N&&(m=i(Jr),y=t.instancing);var _=f+".type",v=c.elements&&nt(c.elements);N&&("number"!=typeof m||m>=0)?"string"==typeof m?(n("if(",m,">0){"),o(),n("}else if(",m,"<0){"),a(),n("}")):o():a()}function P(t,e,n,r,i){var o=v(),a=o.proc("body",i);return St.optional(function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)}),N&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function C(t,e,n,r){T(t,e),k(t,e,n,r.attributes,function(){return!0}),O(t,e,n,r.uniforms,function(){return!0}),M(t,e,e,n)}function j(t,e,n,r){function i(){return!0}t.batchId="a1",T(t,e),k(t,e,n,r.attributes,i),O(t,e,n,r.uniforms,i),M(t,e,e,n)}function R(t,e,n,r){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}T(t,e);var a=n.contextDep,s=e.def(),u=e.def();t.shared.props=u,t.batchId=s;var l=t.scope(),c=t.scope();if(e(l.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",u,"=","a0","[",s,"];",c,"}",l.exit),n.needsContext&&b(t,c,n.context),n.needsFramebuffer&&w(t,c,n.framebuffer),S(t,c,n.state,i),n.profile&&i(n.profile)&&A(t,c,n,!1,!0),r)k(t,l,n,r.attributes,o),k(t,c,n,r.attributes,i),O(t,l,n,r.uniforms,o),O(t,c,n,r.uniforms,i),M(t,l,c,n);else{var f=t.global.def("{}"),h=n.shader.progVar.append(t,c),p=c.def(h,".id"),d=c.def(f,"[",p,"]");c(t.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",t.link(function(e){return P(j,t,n,e,2)}),"(",h,");}",d,".call(this,a0[",s,"],",s,");")}}function F(t,e,n){var r=e.static[n];if(r&&function(t){if("object"==typeof t&&!L(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(At.isDynamic(t[e[n]]))return!0;return!1}}(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,l=t.global.def("{}");o.forEach(function(e){var n=r[e];if(At.isDynamic(n)){"function"==typeof n&&(n=r[e]=At.unbox(n));var o=it(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(l,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}}),e.dynamic[n]=new At.DynamicVariable(mr,{thisDep:a,contextDep:s,propDep:u,ref:l,append:function(t,e){o.forEach(function(n){var i=r[n];if(At.isDynamic(i)){var o=t.invoke(e,i);e(l,".",n,"=",o,";")}})}}),delete e.static[n]}}var q=l.Record,D={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(D.min=Bi,D.max=zi);var N=n.angle_instanced_arrays,I=n.webgl_draw_buffers,B={dirty:!0,profile:d.profile},z={},U=[],V={},G={};y(yr,fi),y(_r,ci),_(vr,"blendColor",[0,0,0,0]),_(gr,"blendEquationSeparate",[Yi,Yi]),_(br,"blendFuncSeparate",[Wi,Gi,Wi,Gi]),y(wr,pi,!0),_(xr,"depthFunc",Hi),_(Sr,"depthRange",[0,1]),_(Tr,"depthMask",!0),_(Er,Er,[!0,!0,!0,!0]),y(Ar,li),_(kr,"cullFace",Di),_(Or,Or,Ii),_(Mr,Mr,1),y(Pr,mi),_(Cr,"polygonOffset",[0,0]),y(jr,yi),y(Rr,_i),_(Fr,"sampleCoverage",[1,!1]),y(Lr,hi),_(qr,"stencilMask",-1),_(Dr,"stencilFunc",[Ui,0,-1]),_(Nr,"stencilOpSeparate",[qi,Vi,Vi,Vi]),_(Ir,"stencilOpSeparate",[Di,Vi,Vi,Vi]),y(Br,di),_(zr,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),_(Ur,Ur,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var W={gl:t,context:h,strings:e,next:z,current:B,draw:f,elements:o,buffer:i,shader:c,attributes:l.state,uniforms:u,framebuffer:s,extensions:n,timer:p,isBufferArgs:$},Y={primTypes:Qt,compareFuncs:Zi,blendFuncs:Qi,blendEquations:D,stencilOps:$i,glTypes:zt,orientationType:eo};St.optional(function(){W.isArrayLike=L}),I&&(Y.backBuffer=[Di],Y.drawBuffer=E(r.maxDrawbuffers,function(t){return 0===t?[0]:E(t,function(t){return Xi+t})}));var H=0;return{next:z,current:B,procs:function(){var e=v(),n=e.proc("poll"),i=e.proc("refresh"),o=e.block();n(o),i(o);var a=e.shared,s=a.gl,u=a.next,l=a.current;o(l,".dirty=false;"),w(e,n),w(e,i,null,!0);var c,f=t.getExtension("angle_instanced_arrays");f&&(c=e.link(f));for(var h=0;h<r.maxAttributes;++h){var p=i.def(a.attributes,"[",h,"]"),d=e.cond(p,".buffer");d.then(s,".enableVertexAttribArray(",h,");",s,".bindBuffer(",oi,",",p,".buffer.buffer);",s,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(s,".disableVertexAttribArray(",h,");",s,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),i(d),f&&i(c,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return Object.keys(V).forEach(function(t){var r=V[t],a=o.def(u,".",t),c=e.block();c("if(",a,"){",s,".enable(",r,")}else{",s,".disable(",r,")}",l,".",t,"=",a,";"),i(c),n("if(",a,"!==",l,".",t,"){",c,"}")}),Object.keys(G).forEach(function(t){var r,a,c=G[t],f=B[t],h=e.block();if(h(s,".",c,"("),L(f)){var p=f.length;r=e.global.def(u,".",t),a=e.global.def(l,".",t),h(E(p,function(t){return r+"["+t+"]"}),");",E(p,function(t){return a+"["+t+"]="+r+"["+t+"];"}).join("")),n("if(",E(p,function(t){return r+"["+t+"]!=="+a+"["+t+"]"}).join("||"),"){",h,"}")}else r=o.def(u,".",t),a=o.def(l,".",t),h(r,");",l,".",t,"=",r,";"),n("if(",r,"!==",a,"){",h,"}");i(h)}),e.compile()}(),compile:function(t,n,r,i,o){var a=v();a.stats=a.link(o),Object.keys(n.static).forEach(function(t){F(a,n,t)}),ii.forEach(function(e){F(a,t,e)});var s=g(t,n,r,i,a);return function(t,e){var n=t.proc("draw",1);T(t,n),b(t,n,e.context),w(t,n,e.framebuffer),x(t,n,e),S(t,n,e.state),A(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)C(t,n,e,e.shader.program);else{var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(n){return P(C,t,e,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(a,s),function(t,n){function r(e){var r=n.shader[e];r&&i.set(o.shader,"."+e,r.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;b(t,i,n.context),n.framebuffer&&n.framebuffer.append(t,i),tt(Object.keys(n.state)).forEach(function(e){var r=n.state[e].append(t,i);L(r)?r.forEach(function(n,r){i.set(t.next[e],"["+r+"]",n)}):i.set(o.next,"."+e,r)}),A(t,i,n,!0,!0),[Hr,Qr,Xr,Jr,Kr].forEach(function(e){var r=n.draw[e];r&&i.set(o.draw,"."+e,""+r.append(t,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(o.uniforms,"["+e.id(r)+"]",n.uniforms[r].append(t,i))}),Object.keys(n.attributes).forEach(function(e){var r=n.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new q).forEach(function(t){i.set(o,"."+t,r[t])})}),r(Wr),r(Yr),Object.keys(n.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}(a,s),function(t,e){function n(t){return t.contextDep&&i||t.propDep}var r=t.proc("batch",2);t.batchId="0",T(t,r);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(b(t,r,e.context),o=!1);var a=e.framebuffer,s=!1;a?(a.propDep?i=s=!0:a.contextDep&&i&&(s=!0),s||w(t,r,a)):w(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),x(t,r,e),S(t,r,e.state,function(t){return!n(t)}),e.profile&&n(e.profile)||A(t,r,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=s;var u=e.shader.progVar;if(u.contextDep&&i||u.propDep)R(t,r,e,null);else{var l=u.append(t,r);if(r(t.shared.gl,".useProgram(",l,".program);"),e.shader.program)R(t,r,e,e.shader.program);else{var c=t.global.def("{}"),f=r.def(l,".id"),h=r.def(c,"[",f,"]");r(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",f,"]=",t.link(function(n){return P(R,t,e,n,2)}),"(",l,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}(a,s),a.compile()}}}function at(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var st={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ut=function(t){return Object.prototype.toString.call(t)in st},lt=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},ct=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],ft=33071,ht=9728,pt=9984,dt=9985,mt=9986,yt=9987,_t=5126,vt=32819,gt=32820,bt=33635,wt=34042,xt={};xt[5120]=xt[5121]=1,xt[5122]=xt[5123]=xt[36193]=xt[bt]=xt[vt]=xt[gt]=2,xt[5124]=xt[5125]=xt[_t]=xt[wt]=4;var St=lt(n,{optional:function(t){t()},raise:e,commandRaise:p,command:function(t,e,n){t||p(e,n||l())},parameter:function(t,n,i){t in n||e("unknown parameter ("+t+")"+r(i)+". possible values: "+Object.keys(n).join())},commandParameter:function(t,e,n,i){t in e||p("unknown parameter ("+t+")"+r(n)+". possible values: "+Object.keys(e).join(),i||l())},constructor:function(t){Object.keys(t).forEach(function(t){ct.indexOf(t)<0&&e('invalid regl constructor argument "'+t+'". must be one of '+ct)})},type:function(t,n,i){typeof t!==n&&e("invalid parameter type"+r(i)+". expected "+n+", got "+typeof t)},commandType:d,isTypedArray:function(t,n){ut(t)||e("invalid parameter type"+r(n)+". must be a typed array")},nni:function(t,n){t>=0&&(0|t)===t||e("invalid parameter type, ("+t+")"+r(n)+". must be a nonnegative integer")},oneOf:i,shaderError:function(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),l=i===t.FRAGMENT_SHADER?"fragment":"vertex";d(r,"string",l+" shader source must be a string",a);var c=f(r,a),h=function(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(t);n?e.push(new u(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new u("unknown",0,t))}}),e}(s);!function(t,e){e.forEach(function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}(c,h),Object.keys(c).forEach(function(t){function e(t,e){r.push(t),i.push(e||"")}var n=c[t];if(n.hasErrors){var r=[""],i=[""];e("file number "+t+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(t){if(t.errors.length>0){e(o(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),e(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var n=0;t.errors.forEach(function(r){var i=r.message,a=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="="}n=Math.max(t.line.indexOf(s,n),0)}else n=0;e(o("| ",6)),e(o("^^^",n+3)+"\n","font-weight:bold"),e(o("| ",6)),e(i+"\n","font-weight:bold")}),e(o("| ",6)+"\n")}else e(o(t.number,4)+"|  "),e(t.line+"\n","color:red")}),"undefined"!=typeof document&&(i[0]=r.join("%c"))}}),n.raise("Error compiling "+l+" shader, "+c[0].name)}},linkError:function(t,e,r,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){t.getProgramInfoLog(e);var a=f(r,o),s='Error linking program with vertex shader, "'+f(i,o)[0].name+'", and fragment shader "'+a[0].name+'"';n.raise(s)}},callSite:c,saveCommandRef:h,saveDrawInfo:function(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach(function(e){t[r.id(e)]=!0})}h(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?i(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):i(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:l,texture2D:function(t,e,r){var i,o=e.width,a=e.height,s=e.channels;n(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),t.wrapS===ft&&t.wrapT===ft||n(y(o)&&y(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&n(t.minFilter!==pt&&t.minFilter!==mt&&t.minFilter!==dt&&t.minFilter!==yt,"min filter requires mipmap"):(n(y(o)&&y(a),"texture must be a square power of 2 to support mipmapping"),n(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),e.type===_t&&(r.extensions.indexOf("oes_texture_float_linear")<0&&n(t.minFilter===ht&&t.magFilter===ht,"filter not supported, must enable oes_texture_float_linear"),n(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(i=0;i<16;++i)if(u[i]){var l=o>>i,c=a>>i;n(e.mipmask&1<<i,"missing mipmap data");var f=u[i];if(n(f.width===l&&f.height===c,"invalid shape for mip images"),n(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(m(f.type,s)*l/f.unpackAlignment)*f.unpackAlignment;n(f.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||n(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&n(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,r,i){var o=t.width,a=t.height,s=t.channels;n(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),n(o===a,"cube map must be square"),n(e.wrapS===ft&&e.wrapT===ft,"wrap mode not supported by cube map");for(var u=0;u<r.length;++u){var l=r[u];n(l.width===o&&l.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(n(!l.compressed,"can not generate mipmap for compressed textures"),n(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,f=0;f<16;++f){var h=c[f];if(h){var p=o>>f,d=a>>f;n(l.mipmask&1<<f,"missing mipmap data"),n(h.width===p&&h.height===d,"invalid shape for mip images"),n(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?n(h.data.byteLength===p*d*Math.max(m(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),Tt=0,Et=0,At={DynamicVariable:_,define:function(t,e){return new _(t,b(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof _},unbox:function(t,e){return"function"==typeof t?new _(Et,t):t},accessor:b},kt={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},Ot="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Mt=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;return e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063)),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938)}},Pt=function(t){return Object.keys(t).map(function(e){return t[e]})},Ct=5120,jt=5121,Rt=5122,Ft=5123,Lt=5124,qt=5125,Dt=5126,Nt=E(8,function(){return[]}),It={alloc:k,free:O,allocType:function(t,e){var n=null;switch(t){case Ct:n=new Int8Array(k(e),0,e);break;case jt:n=new Uint8Array(k(e),0,e);break;case Rt:n=new Int16Array(k(2*e),0,e);break;case Ft:n=new Uint16Array(k(2*e),0,e);break;case Lt:n=new Int32Array(k(4*e),0,e);break;case qt:n=new Uint32Array(k(4*e),0,e);break;case Dt:n=new Float32Array(k(4*e),0,e);break;default:return null}return n.length!==e?n.subarray(0,e):n},freeType:function(t){O(t.buffer)}},Bt={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||It.allocType(n,i);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}(t,e[0],e[1],a);break;case 3:M(t,e[0],e[1],e[2],a,0);break;default:P(t,e,0,a,0)}return a}},zt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ut={dynamic:35048,stream:35040,static:35044},Vt=Bt.flatten,Gt=Bt.shape,Wt=35044,Yt=35040,Ht=5121,Kt=5126,Xt=[];Xt[5120]=1,Xt[5122]=2,Xt[5124]=4,Xt[5121]=1,Xt[5123]=2,Xt[5125]=4,Xt[5126]=4;var Qt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Jt=0,Zt=1,$t=4,te=5120,ee=5121,ne=5122,re=5123,ie=5124,oe=5125,ae=34963,se=35040,ue=35044,le=new Float32Array(1),ce=new Uint32Array(le.buffer),fe=5123,he=34467,pe=3553,de=34067,me=34069,ye=6408,_e=6406,ve=6407,ge=6409,be=6410,we=32854,xe=32855,Se=36194,Te=32819,Ee=32820,Ae=33635,ke=34042,Oe=6402,Me=34041,Pe=35904,Ce=35906,je=36193,Re=33776,Fe=33777,Le=33778,qe=33779,De=35986,Ne=35987,Ie=34798,Be=35840,ze=35841,Ue=35842,Ve=35843,Ge=36196,We=5121,Ye=5123,He=5125,Ke=5126,Xe=10242,Qe=10243,Je=10497,Ze=33071,$e=33648,tn=10240,en=10241,nn=9728,rn=9729,on=9984,an=9985,sn=9986,un=9987,ln=33170,cn=4352,fn=4353,hn=4354,pn=34046,dn=3317,mn=37440,yn=37441,_n=37443,vn=37444,gn=33984,bn=[on,sn,an,un],wn=[0,ge,be,ve,ye],xn={};xn[ge]=xn[_e]=xn[Oe]=1,xn[Me]=xn[be]=2,xn[ve]=xn[Pe]=3,xn[ye]=xn[Ce]=4;var Sn=q("HTMLCanvasElement"),Tn=q("CanvasRenderingContext2D"),En=q("HTMLImageElement"),An=q("HTMLVideoElement"),kn=Object.keys(st).concat([Sn,Tn,En,An]),On=[];On[We]=1,On[Ke]=4,On[je]=2,On[Ye]=2,On[He]=4;var Mn=[];Mn[we]=2,Mn[xe]=2,Mn[Se]=2,Mn[Me]=4,Mn[Re]=.5,Mn[Fe]=.5,Mn[Le]=1,Mn[qe]=1,Mn[De]=.5,Mn[Ne]=1,Mn[Ie]=1,Mn[Be]=.5,Mn[ze]=.25,Mn[Ue]=.5,Mn[Ve]=.25,Mn[Ge]=.5;var Pn=36161,Cn=32854,jn=[];jn[Cn]=2,jn[32855]=2,jn[36194]=2,jn[33189]=2,jn[36168]=1,jn[34041]=4,jn[35907]=4,jn[34836]=16,jn[34842]=8,jn[34843]=6;var Rn=function(t,e,n,r,i){function o(t){this.id=l++,this.refCount=1,this.renderbuffer=t,this.format=Cn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(e){var n=e.renderbuffer;St(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Pn,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}var s={rgba4:Cn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(s.srgba=35907),e.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),e.webgl_color_buffer_float&&(s.rgba32f=34836);var u=[];Object.keys(s).forEach(function(t){var e=s[t];u[e]=t});var l=0,c={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach(function(e){t+=c[e].stats.size}),t}),{create:function(e,a){function l(e,r){var o=0,a=0,c=Cn;if("object"==typeof e&&e){var h=e;if("shape"in h){var p=h.shape;St(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),o=0|p[0],a=0|p[1]}else"radius"in h&&(o=a=0|h.radius),"width"in h&&(o=0|h.width),"height"in h&&(a=0|h.height);"format"in h&&(St.parameter(h.format,s,"invalid renderbuffer format"),c=s[h.format])}else"number"==typeof e?(o=0|e,a="number"==typeof r?0|r:o):e?St.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(St(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),o!==f.width||a!==f.height||c!==f.format)return l.width=f.width=o,l.height=f.height=a,f.format=c,t.bindRenderbuffer(Pn,f.renderbuffer),t.renderbufferStorage(Pn,c,o,a),i.profile&&(f.stats.size=H(f.format,f.width,f.height)),l.format=u[f.format],l}var f=new o(t.createRenderbuffer());return c[f.id]=f,r.renderbufferCount++,l(e,a),l.resize=function(e,r){var o=0|e,a=0|r||o;return o===f.width&&a===f.height?l:(St(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),l.width=f.width=o,l.height=f.height=a,t.bindRenderbuffer(Pn,f.renderbuffer),t.renderbufferStorage(Pn,f.format,o,a),i.profile&&(f.stats.size=H(f.format,f.width,f.height)),l)},l._reglType="renderbuffer",l._renderbuffer=f,i.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){Pt(c).forEach(a)},restore:function(){Pt(c).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Pn,e.renderbuffer),t.renderbufferStorage(Pn,e.format,e.width,e.height)}),t.bindRenderbuffer(Pn,null)}}},Fn=36160,Ln=36161,qn=3553,Dn=34069,Nn=36064,In=36096,Bn=36128,zn=33306,Un=36053,Vn=6402,Gn=[6408],Wn=[];Wn[6408]=4;var Yn=[];Yn[5121]=1,Yn[5126]=4,Yn[36193]=2;var Hn=33189,Kn=36168,Xn=34041,Qn=[32854,32855,36194,35907,34842,34843,34836],Jn={};Jn[Un]="complete",Jn[36054]="incomplete attachment",Jn[36057]="incomplete dimensions",Jn[36055]="incomplete, missing attachment",Jn[36061]="unsupported";var Zn=5126,$n=35632,tr=35633,er=35718,nr=35721,rr=6408,ir=5121,or=3333,ar=5126,sr="xyzw".split(""),ur=5121,lr=1,cr=2,fr=0,hr=1,pr=2,dr=3,mr=4,yr="dither",_r="blend.enable",vr="blend.color",gr="blend.equation",br="blend.func",wr="depth.enable",xr="depth.func",Sr="depth.range",Tr="depth.mask",Er="colorMask",Ar="cull.enable",kr="cull.face",Or="frontFace",Mr="lineWidth",Pr="polygonOffset.enable",Cr="polygonOffset.offset",jr="sample.alpha",Rr="sample.enable",Fr="sample.coverage",Lr="stencil.enable",qr="stencil.mask",Dr="stencil.func",Nr="stencil.opFront",Ir="stencil.opBack",Br="scissor.enable",zr="scissor.box",Ur="viewport",Vr="profile",Gr="framebuffer",Wr="vert",Yr="frag",Hr="elements",Kr="primitive",Xr="count",Qr="offset",Jr="instances",Zr=Gr+"Width",$r=Gr+"Height",ti=Ur+"Width",ei=Ur+"Height",ni="drawingBufferWidth",ri="drawingBufferHeight",ii=[br,gr,Dr,Nr,Ir,Fr,Ur,zr,Cr],oi=34962,ai=34963,si=3553,ui=34067,li=2884,ci=3042,fi=3024,hi=2960,pi=2929,di=3089,mi=32823,yi=32926,_i=32928,vi=5126,gi=35664,bi=35665,wi=35666,xi=5124,Si=35667,Ti=35668,Ei=35669,Ai=35670,ki=35671,Oi=35672,Mi=35673,Pi=35674,Ci=35675,ji=35676,Ri=35678,Fi=35680,Li=4,qi=1028,Di=1029,Ni=2304,Ii=2305,Bi=32775,zi=32776,Ui=519,Vi=7680,Gi=0,Wi=1,Yi=32774,Hi=513,Ki=36160,Xi=36064,Qi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ji=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Zi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},$i={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},to={frag:35632,vert:35633},eo={cw:Ni,ccw:Ii},no=new et(!1,!1,!1,function(){}),ro=34918,io=34919,oo=35007,ao=function(t,e){function n(t){a.push(t)}function r(t){u.push(t)}function i(t,e,n){var r=u.pop()||new function(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null};r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,l.push(r)}var o=e.ext_disjoint_timer_query;if(!o)return null;var a=[],s=[],u=[],l=[],c=[],f=[];return{beginQuery:function(t){var e=a.pop()||o.createQueryEXT();o.beginQueryEXT(oo,e),s.push(e),i(s.length-1,s.length,t)},endQuery:function(){o.endQueryEXT(oo)},pushScopeStats:i,update:function(){var t,e,i=s.length;if(0!==i){f.length=Math.max(f.length,i+1),c.length=Math.max(c.length,i+1),c[0]=0,f[0]=0;var a=0;for(t=0,e=0;e<s.length;++e){var u=s[e];o.getQueryObjectEXT(u,io)?(a+=o.getQueryObjectEXT(u,ro),n(u)):s[t++]=u,c[e+1]=a,f[e+1]=t}for(s.length=t,t=0,e=0;e<l.length;++e){var h=l[e],p=h.startQueryIndex,d=h.endQueryIndex;h.sum+=c[d]-c[p];var m=f[p],y=f[d];y===m?(h.stats.gpuTime+=h.sum/1e6,r(h)):(h.startQueryIndex=m,h.endQueryIndex=y,l[t++]=h)}l.length=t}},getNumPendingQueries:function(){return s.length},clear:function(){a.push.apply(a,s);for(var t=0;t<a.length;t++)o.deleteQueryEXT(a[t]);s.length=0,a.length=0},restore:function(){s.length=0,a.length=0}}},so=16384,uo=256,lo=1024,co=34962,fo="webglcontextlost",ho="webglcontextrestored",po=1,mo=2,yo=3;return function(t){function e(){if(0===V.length)return w&&w.update(),void(J=null);J=kt.next(e),c();for(var t=V.length-1;t>=0;--t){var n=V[t];n&&n(k,null,0)}d.flush(),w&&w.update()}function n(){!J&&V.length>0&&(J=kt.next(e))}function r(){J&&(kt.cancel(e),J=null)}function i(t){t.preventDefault(),y=!0,r(),G.forEach(function(t){t()})}function o(t){d.getError(),y=!1,_.restore(),L.restore(),M.restore(),q.restore(),D.restore(),N.restore(),w&&w.restore(),I.procs.refresh(),n(),W.forEach(function(t){t()})}function a(t){function e(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=t[r];At.isDynamic(i)?n[r]=At.unbox(i,r):e[r]=i}),{dynamic:n,static:e}}St(!!t,"invalid args to regl({...})"),St.type(t,"object","invalid args to regl({...})");var n=e(t.context||{}),r=e(t.uniforms||{}),i=e(t.attributes||{}),o=e(function(t){function e(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(r){n[t+"."+r]=e[r]})}}var n=lt({},t);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),n}(t)),a={gpuTime:0,cpuTime:0,count:0},s=I.compile(o,i,r,n,a),u=s.draw,l=s.batch,c=s.scope,f=[];return lt(function(t,e){var n;if(y&&St.raise("context lost"),"function"==typeof t)return c.call(this,null,t,0);if("function"==typeof e){if("number"==typeof t){for(n=0;n<t;++n)c.call(this,null,e,n);return}if(Array.isArray(t)){for(n=0;n<t.length;++n)c.call(this,t[n],e,n);return}return c.call(this,t,e,0)}if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;f.length<t;)f.push(null);return f}(0|t),0|t)}else{if(!Array.isArray(t))return u.call(this,t);if(t.length)return l.call(this,t,t.length)}},{stats:a})}function s(t,e){var n=0;I.procs.poll();var r=e.color;r&&(d.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=so),"depth"in e&&(d.clearDepth(+e.depth),n|=uo),"stencil"in e&&(d.clearStencil(0|e.stencil),n|=lo),St(!!n,"called regl.clear with no buffer specified"),d.clear(n)}function u(t){return St.type(t,"function","regl.frame() callback must be a function"),V.push(t),n(),{cancel:function(){function e(){var t=at(V,e);V[t]=V[V.length-1],V.length-=1,V.length<=0&&r()}var n=at(V,t);St(n>=0,"cannot cancel a frame twice"),V[n]=e}}}function l(){var t=z.viewport,e=z.scissor_box;t[0]=t[1]=e[0]=e[1]=0,k.viewportWidth=k.framebufferWidth=k.drawingBufferWidth=t[2]=e[2]=d.drawingBufferWidth,k.viewportHeight=k.framebufferHeight=k.drawingBufferHeight=t[3]=e[3]=d.drawingBufferHeight}function c(){k.tick+=1,k.time=h(),l(),I.procs.poll()}function f(){l(),I.procs.refresh(),w&&w.update()}function h(){return(Ot()-x)/1e3}var p=S(t);if(!p)return null;var d=p.gl,m=d.getContextAttributes(),y=d.isContextLost(),_=function(t,e){function n(e){St.type(e,"string","extension name must be string");var n,i=e.toLowerCase();try{n=r[i]=t.getExtension(i)}catch(t){}return!!n}for(var r={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!n(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(!n(t))throw new Error("(regl): error restoring extension "+t)})}}}(d,p);if(!_)return null;var v=function(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}(),g={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},b=_.extensions,w=ao(d,b),x=Ot(),E=d.drawingBufferWidth,A=d.drawingBufferHeight,k={tick:0,time:0,viewportWidth:E,viewportHeight:A,framebufferWidth:E,framebufferHeight:A,drawingBufferWidth:E,drawingBufferHeight:A,pixelRatio:p.pixelRatio},O=Mt(d,b),M=function(t,e,n){function r(e){this.id=s++,this.buffer=t.createBuffer(),this.type=e,this.usage=Wt,this.byteLength=0,this.dimension=1,this.dtype=Ht,this.persistentData=null,n.profile&&(this.stats={size:0})}function i(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function o(t,e,n,r,o,a){var s;if(t.usage=n,Array.isArray(e)){if(t.dtype=r||Kt,e.length>0){var u;if(Array.isArray(e[0])){s=Gt(e);for(var l=1,c=1;c<s.length;++c)l*=s[c];t.dimension=l,i(t,u=Vt(e,s,t.dtype),n),a?t.persistentData=u:It.freeType(u)}else if("number"==typeof e[0]){t.dimension=o;var f=It.allocType(t.dtype,e.length);j(f,e),i(t,f,n),a?t.persistentData=f:It.freeType(f)}else ut(e[0])?(t.dimension=e[0].length,t.dtype=r||C(e[0])||Kt,i(t,u=Vt(e,[e.length,e[0].length],t.dtype),n),a?t.persistentData=u:It.freeType(u)):St.raise("invalid buffer data")}}else if(ut(e))t.dtype=r||C(e),t.dimension=o,i(t,e,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(T(e)){s=e.shape;var h=e.stride,p=e.offset,d=0,m=0,y=0,_=0;1===s.length?(d=s[0],m=1,y=h[0],_=0):2===s.length?(d=s[0],m=s[1],y=h[0],_=h[1]):St.raise("invalid shape"),t.dtype=r||C(e.data)||Kt,t.dimension=m;var v=It.allocType(t.dtype,d*m);R(v,e.data,d,m,y,_,p),i(t,v,n),a?t.persistentData=v:It.freeType(v)}else St.raise("invalid buffer data")}function a(n){e.bufferCount--;var r=n.buffer;St(r,"buffer must not be deleted already"),t.deleteBuffer(r),n.buffer=null,delete u[n.id]}var s=0,u={};r.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},r.prototype.destroy=function(){a(this)};var l=[];return n.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(u).forEach(function(e){t+=u[e].stats.size}),t}),{create:function(i,s,l,c){function f(e){var r=Wt,i=null,a=0,s=0,u=1;return Array.isArray(e)||ut(e)||T(e)?i=e:"number"==typeof e?a=0|e:e&&(St.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(St(null===i||Array.isArray(i)||ut(i)||T(i),"invalid data for buffer"),i=e.data),"usage"in e&&(St.parameter(e.usage,Ut,"invalid buffer usage"),r=Ut[e.usage]),"type"in e&&(St.parameter(e.type,zt,"invalid buffer type"),s=zt[e.type]),"dimension"in e&&(St.type(e.dimension,"number","invalid dimension"),u=0|e.dimension),"length"in e&&(St.nni(a,"buffer length must be a nonnegative integer"),a=0|e.length)),p.bind(),i?o(p,i,r,s,u,c):(t.bufferData(p.type,a,r),p.dtype=s||Ht,p.usage=r,p.dimension=u,p.byteLength=a),n.profile&&(p.stats.size=p.byteLength*Xt[p.dtype]),f}function h(e,n){St(n+e.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+p.byteLength),t.bufferSubData(p.type,n,e)}e.bufferCount++;var p=new r(s);return u[p.id]=p,l||f(i),f._reglType="buffer",f._buffer=p,f.subdata=function(t,e){var n,r=0|(e||0);if(p.bind(),Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=It.allocType(p.dtype,t.length);j(i,t),h(i,r),It.freeType(i)}else if(Array.isArray(t[0])||ut(t[0])){n=Gt(t);var o=Vt(t,n,p.dtype);h(o,r),It.freeType(o)}else St.raise("invalid buffer data")}else if(ut(t))h(t,r);else if(T(t)){n=t.shape;var a=t.stride,s=0,u=0,l=0,c=0;1===n.length?(s=n[0],u=1,l=a[0],c=0):2===n.length?(s=n[0],u=n[1],l=a[0],c=a[1]):St.raise("invalid shape");var d=Array.isArray(t.data)?p.dtype:C(t.data),m=It.allocType(d,s*u);R(m,t.data,s,u,l,c,t.offset),h(m,r),It.freeType(m)}else St.raise("invalid data for buffer subdata");return f},n.profile&&(f.stats=p.stats),f.destroy=function(){a(p)},f},createStream:function(t,e){var n=l.pop();return n||(n=new r(t)),n.bind(),o(n,e,Yt,0,1,!1),n},destroyStream:function(t){l.push(t)},clear:function(){Pt(u).forEach(a),l.forEach(a)},getBuffer:function(t){return t&&t._buffer instanceof r?t._buffer:null},restore:function(){Pt(u).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:o}}(d,g,p),P=function(t,e,n,r){function i(t){this.id=u++,s[this.id]=this,this.buffer=t,this.primType=$t,this.vertCount=0,this.type=0}function o(r,i,o,a,s,u,l){if(r.buffer.bind(),i){var c=l;l||ut(i)&&(!T(i)||ut(i.data))||(c=e.oes_element_index_uint?oe:re),n._initBuffer(r.buffer,i,o,c,3)}else t.bufferData(ae,u,o),r.buffer.dtype=f||ee,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=u;var f=l;if(!l){switch(r.buffer.dtype){case ee:case te:f=ee;break;case re:case ne:f=re;break;case oe:case ie:f=oe;break;default:St.raise("unsupported type for element array")}r.buffer.dtype=f}r.type=f,St(f!==oe||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=s;h<0&&(h=r.buffer.byteLength,f===re?h>>=1:f===oe&&(h>>=2)),r.vertCount=h;var p=a;if(a<0){p=$t;var d=r.buffer.dimension;1===d&&(p=Jt),2===d&&(p=Zt),3===d&&(p=$t)}r.primType=p}function a(t){r.elementsCount--,St(null!==t.buffer,"must not double destroy elements"),delete s[t.id],t.buffer.destroy(),t.buffer=null}var s={},u=0,l={uint8:ee,uint16:re};e.oes_element_index_uint&&(l.uint32=oe),i.prototype.bind=function(){this.buffer.bind()};var c=[];return{create:function(t,e){function s(t){if(t)if("number"==typeof t)u(t),c.primType=$t,c.vertCount=0|t,c.type=ee;else{var e=null,n=ue,r=-1,i=-1,a=0,f=0;Array.isArray(t)||ut(t)||T(t)?e=t:(St.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,St(Array.isArray(e)||ut(e)||T(e),"invalid data for element buffer")),"usage"in t&&(St.parameter(t.usage,Ut,"invalid element buffer usage"),n=Ut[t.usage]),"primitive"in t&&(St.parameter(t.primitive,Qt,"invalid element buffer primitive"),r=Qt[t.primitive]),"count"in t&&(St("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),i=0|t.count),"type"in t&&(St.parameter(t.type,l,"invalid buffer type"),f=l[t.type]),"length"in t?a=0|t.length:(a=i,f===re||f===ne?a*=2:f!==oe&&f!==ie||(a*=4))),o(c,e,n,r,i,a,f)}else u(),c.primType=$t,c.vertCount=0,c.type=ee;return s}var u=n.create(null,ae,!0),c=new i(u._buffer);return r.elementsCount++,s(t),s._reglType="elements",s._elements=c,s.subdata=function(t,e){return u.subdata(t,e),s},s.destroy=function(){a(c)},s},createStream:function(t){var e=c.pop();return e||(e=new i(n.create(null,ae,!0,!1)._buffer)),o(e,t,se,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){Pt(s).forEach(a)}}}(d,b,M,g),F=function(t,e,n,r,i){for(var o=n.maxAttributes,a=new Array(o),s=0;s<o;++s)a[s]=new K;return{Record:K,scope:{},state:a}}(0,0,O),L=X(d,v,g,p),q=Y(d,b,O,function(){I.procs.poll()},k,g,p),D=Rn(d,b,O,g,p),N=function(t,e,n,r,i,o){function a(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function s(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function u(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);St(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;St(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function l(e,n){n&&(n.texture?t.framebufferTexture2D(Fn,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(Fn,e,Ln,n.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=qn,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),St.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,St(e===qn)):"textureCube"===o?(n=i,St(e>=Dn&&e<Dn+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Ln):St.raise("invalid regl object for attachment"),new a(e,n,r)}function f(t,e,n,o,s){if(n){var u=r.create2D({width:t,height:e,format:o,type:s});return u._texture.refCount=0,new a(qn,u,null)}var l=i.create({width:t,height:e,format:o});return l._renderbuffer.refCount=0,new a(Ln,null,l)}function h(t){return t&&(t.texture||t.renderbuffer)}function p(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n))}function d(){this.id=S++,T[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function m(t){t.colorAttachments.forEach(s),s(t.depthAttachment),s(t.stencilAttachment),s(t.depthStencilAttachment)}function y(e){var n=e.framebuffer;St(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete T[e.id]}function _(e){var r;t.bindFramebuffer(Fn,e.framebuffer);var i=e.colorAttachments;for(r=0;r<i.length;++r)l(Nn+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(Fn,Nn+r,qn,null,0);t.framebufferTexture2D(Fn,zn,qn,null,0),t.framebufferTexture2D(Fn,In,qn,null,0),t.framebufferTexture2D(Fn,Bn,qn,null,0),l(In,e.depthAttachment),l(Bn,e.stencilAttachment),l(zn,e.depthStencilAttachment);var o=t.checkFramebufferStatus(Fn);o!==Un&&St.raise("framebuffer configuration not supported, status = "+Jn[o]),t.bindFramebuffer(Fn,g.next),g.cur=g.next,t.getError()}function v(t,r){function i(t,r){var o;St(g.next!==a,"can not update framebuffer which is currently in use");var s=e.webgl_draw_buffers,l=0,p=0,d=!0,y=!0,v=null,S=!0,T="rgba",E="uint8",A=1,k=null,O=null,M=null,P=!1;if("number"==typeof t)l=0|t,p=0|r||l;else if(t){St.type(t,"object","invalid arguments for framebuffer");var C=t;if("shape"in C){var j=C.shape;St(Array.isArray(j)&&j.length>=2,"invalid shape for framebuffer"),l=j[0],p=j[1]}else"radius"in C&&(l=p=C.radius),"width"in C&&(l=C.width),"height"in C&&(p=C.height);("color"in C||"colors"in C)&&(v=C.color||C.colors,Array.isArray(v)&&St(1===v.length||s,"multiple render targets not supported")),v||("colorCount"in C&&(A=0|C.colorCount,St(A>0,"invalid color buffer count")),"colorTexture"in C&&(S=!!C.colorTexture,T="rgba4"),"colorType"in C&&(E=C.colorType,S?(St(e.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),St(e.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(St(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),T="rgba16f"):"float"!==E&&"float32"!==E||(St(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),T="rgba32f"),St.oneOf(E,x,"invalid color type")),"colorFormat"in C&&(T=C.colorFormat,b.indexOf(T)>=0?S=!0:w.indexOf(T)>=0?S=!1:S?St.oneOf(C.colorFormat,b,"invalid color format for texture"):St.oneOf(C.colorFormat,w,"invalid color format for renderbuffer"))),("depthTexture"in C||"depthStencilTexture"in C)&&(P=!(!C.depthTexture&&!C.depthStencilTexture),St(!P||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in C&&("boolean"==typeof C.depth?d=C.depth:(k=C.depth,y=!1)),"stencil"in C&&("boolean"==typeof C.stencil?y=C.stencil:(O=C.stencil,d=!1)),"depthStencil"in C&&("boolean"==typeof C.depthStencil?d=y=C.depthStencil:(M=C.depthStencil,d=!1,y=!1))}else l=p=1;var R=null,F=null,L=null,q=null;if(Array.isArray(v))R=v.map(c);else if(v)R=[c(v)];else for(R=new Array(A),o=0;o<A;++o)R[o]=f(l,p,S,T,E);St(e.webgl_draw_buffers||R.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),St(R.length<=n.maxColorAttachments,"too many color attachments, not supported"),l=l||R[0].width,p=p||R[0].height,k?F=c(k):d&&!y&&(F=f(l,p,P,"depth","uint32")),O?L=c(O):y&&!d&&(L=f(l,p,!1,"stencil","uint8")),M?q=c(M):!k&&!O&&y&&d&&(q=f(l,p,P,"depth stencil","depth stencil")),St(!!k+!!O+!!M<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(o=0;o<R.length;++o)if(u(R[o],l,p),St(!R[o]||R[o].texture&&Gn.indexOf(R[o].texture._texture.format)>=0||R[o].renderbuffer&&Qn.indexOf(R[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),R[o]&&R[o].texture){var N=Wn[R[o].texture._texture.format]*Yn[R[o].texture._texture.type];null===D?D=N:St(D===N,"all color attachments much have the same number of bits per pixel.")}return u(F,l,p),St(!F||F.texture&&F.texture._texture.format===Vn||F.renderbuffer&&F.renderbuffer._renderbuffer.format===Hn,"invalid depth attachment for framebuffer object"),u(L,l,p),St(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Kn,"invalid stencil attachment for framebuffer object"),u(q,l,p),St(!q||q.texture&&q.texture._texture.format===Xn||q.renderbuffer&&q.renderbuffer._renderbuffer.format===Xn,"invalid depth-stencil attachment for framebuffer object"),m(a),a.width=l,a.height=p,a.colorAttachments=R,a.depthAttachment=F,a.stencilAttachment=L,a.depthStencilAttachment=q,i.color=R.map(h),i.depth=h(F),i.stencil=h(L),i.depthStencil=h(q),i.width=a.width,i.height=a.height,_(a),i}var a=new d;return o.framebufferCount++,i(t,r),lt(i,{resize:function(t,e){St(g.next!==a,"can not resize a framebuffer which is currently in use");var n=0|t,r=0|e||n;if(n===a.width&&r===a.height)return i;for(var o=a.colorAttachments,s=0;s<o.length;++s)p(o[s],n,r);return p(a.depthAttachment,n,r),p(a.stencilAttachment,n,r),p(a.depthStencilAttachment,n,r),a.width=i.width=n,a.height=i.height=r,_(a),i},_reglType:"framebuffer",_framebuffer:a,destroy:function(){y(a),m(a)},use:function(t){g.setFBO({framebuffer:i},t)}})}var g={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],w=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&w.push("srgba"),e.ext_color_buffer_half_float&&w.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&w.push("rgba32f");var x=["uint8"];e.oes_texture_half_float&&x.push("half float","float16"),e.oes_texture_float&&x.push("float","float32");var S=0,T={};return lt(g,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof d)return e}return null},create:v,createCube:function(t){function i(t){var n;St(o.indexOf(g.next)<0,"can not update framebuffer which is currently in use");var a=e.webgl_draw_buffers,s={color:null},u=0,l=null,c="rgba",f="uint8",h=1;if("number"==typeof t)u=0|t;else if(t){St.type(t,"object","invalid arguments for framebuffer");var p=t;if("shape"in p){var d=p.shape;St(Array.isArray(d)&&d.length>=2,"invalid shape for framebuffer"),St(d[0]===d[1],"cube framebuffer must be square"),u=d[0]}else"radius"in p&&(u=0|p.radius),"width"in p?(u=0|p.width,"height"in p&&St(p.height===u,"must be square")):"height"in p&&(u=0|p.height);("color"in p||"colors"in p)&&(l=p.color||p.colors,Array.isArray(l)&&St(1===l.length||a,"multiple render targets not supported")),l||("colorCount"in p&&(h=0|p.colorCount,St(h>0,"invalid color buffer count")),"colorType"in p&&(St.oneOf(p.colorType,x,"invalid color type"),f=p.colorType),"colorFormat"in p&&(c=p.colorFormat,St.oneOf(p.colorFormat,b,"invalid color format for texture"))),"depth"in p&&(s.depth=p.depth),"stencil"in p&&(s.stencil=p.stencil),"depthStencil"in p&&(s.depthStencil=p.depthStencil)}else u=1;var m;if(l)if(Array.isArray(l))for(m=[],n=0;n<l.length;++n)m[n]=l[n];else m=[l];else{m=Array(h);var y={radius:u,format:c,type:f};for(n=0;n<h;++n)m[n]=r.createCube(y)}for(s.color=Array(m.length),n=0;n<m.length;++n){var _=m[n];St("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),u=u||_.width,St(_.width===u&&_.height===u,"invalid cube map shape"),s.color[n]={target:Dn,data:m[n]}}for(n=0;n<6;++n){for(var w=0;w<m.length;++w)s.color[w].target=Dn+n;n>0&&(s.depth=o[0].depth,s.stencil=o[0].stencil,s.depthStencil=o[0].depthStencil),o[n]?o[n](s):o[n]=v(s)}return lt(i,{width:u,height:u,color:m})}var o=Array(6);return i(t),lt(i,{faces:o,resize:function(t){var e,r=0|t;if(St(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===i.width)return i;var a=i.color;for(e=0;e<a.length;++e)a[e].resize(r);for(e=0;e<6;++e)o[e].resize(r);return i.width=i.height=r,i},_reglType:"framebufferCube",destroy:function(){o.forEach(function(t){t.destroy()})}})},clear:function(){Pt(T).forEach(y)},restore:function(){Pt(T).forEach(function(e){e.framebuffer=t.createFramebuffer(),_(e)})}})}(d,b,O,q,D,g),I=ot(d,v,b,O,M,P,0,N,{},F,L,{elements:null,primitive:4,count:-1,offset:0,instances:-1},k,w,p),B=Q(d,N,I.procs.poll,k,m,b),z=I.next,U=d.canvas,V=[],G=[],W=[],H=[p.onDestroy],J=null;U&&(U.addEventListener(fo,i,!1),U.addEventListener(ho,o,!1));var Z=N.setFBO=a({framebuffer:At.define.call(null,po,"framebuffer")});f();var $=lt(a,{clear:function(t){if(St("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)Z(lt({framebuffer:t.framebuffer.faces[e]},t),s);else Z(t,s);else s(0,t)},prop:At.define.bind(null,po),context:At.define.bind(null,mo),this:At.define.bind(null,yo),draw:a({}),buffer:function(t){return M.create(t,co,!1,!1)},elements:function(t){return P.create(t,!1)},texture:q.create2D,cube:q.createCube,renderbuffer:D.create,framebuffer:N.create,framebufferCube:N.createCube,attributes:m,frame:u,on:function(t,e){St.type(e,"function","listener callback must be a function");var n;switch(t){case"frame":return u(e);case"lost":n=G;break;case"restore":n=W;break;case"destroy":n=H;break;default:St.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:O,hasExtension:function(t){return O.extensions.indexOf(t.toLowerCase())>=0},read:B,destroy:function(){V.length=0,r(),U&&(U.removeEventListener(fo,i),U.removeEventListener(ho,o)),L.clear(),N.clear(),D.clear(),q.clear(),P.clear(),M.clear(),w&&w.clear(),H.forEach(function(t){t()})},_gl:d,_refresh:f,poll:function(){c(),w&&w.update()},now:h,stats:g});return p.onDone(null,$),$}})},{}],214:[function(t,e,n){function r(t){throw new Error("resl: "+t)}function i(t,e,n){Object.keys(t).forEach(function(t){e.indexOf(t)<0&&r('invalid parameter "'+t+'" in '+n)})}function o(t,e){this.state=c,this.ready=!1,this.progress=0,this.name=t,this.cancel=e}var a=["manifest","onDone","onProgress","onError"],s=["type","src","stream","credentials","parser"],u=["onData","onDone"],l=-1,c=0,f=1;e.exports=function(t){function e(e,n){if(e in t){var i=t[e];return"function"!=typeof i&&r('invalid callback "'+e+'"'),i}return null}function n(t){function e(){if(!(s.readyState<2||h.state===f||h.state===l)){if(200!==s.status)return p('error loading resource "'+t.name+'"');if(s.readyState>2&&h.state===c){var e;if(e="binary"===t.type?s.response:s.responseText,a.data)try{u=a.data(e)}catch(t){return p(t)}else u=e}if(s.readyState>3&&h.state===c){if(a.done)try{u=a.done()}catch(t){return p(t)}h.state=f}g[n]=u,h.progress=.75*h.progress+.25,h.ready=t.stream&&!!u||h.state===f,d()}}var n=t.name,r=t.stream,i="binary"===t.type,a=t.parser,s=new XMLHttpRequest,u=null,h=new o(n,function(){h.state!==f&&h.state!==l&&(s.onreadystatechange=null,s.abort(),h.state=l)});return s.onreadystatechange=r?e:function(){4===s.readyState&&e()},i&&(s.responseType="arraybuffer"),t.credentials&&(s.withCredentials=!0),s.open("GET",t.src,!0),s.send(),h}function h(t,e){function n(){if(m.state===c)if(h.data)try{y=h.data(e)}catch(t){return p(t)}else y=e}function r(t){n(),g[u]=y,t.lengthComputable?m.progress=Math.max(m.progress,t.loaded/t.total):m.progress=.75*m.progress+.25,d(u)}function i(){if(n(),m.state===c){if(h.done)try{y=h.done()}catch(t){return p(t)}m.state=f}m.progress=1,m.ready=!0,g[u]=y,s(),d("finish "+u)}function a(){p('error loading asset "'+u+'"')}function s(){t.stream&&e.removeEventListener("progress",r),"image"===t.type?e.addEventListener("load",i):e.addEventListener("canplay",i),e.removeEventListener("error",a)}var u=t.name,h=t.parser,m=new o(u,function(){m.state!==f&&m.state!==l&&(m.state=l,s(),e.src="")}),y=e;if(t.stream&&e.addEventListener("progress",r),"image"===t.type)e.addEventListener("load",i);else{var _=!1,v=!1;e.addEventListener("loadedmetadata",function(){v=!0,_&&i()}),e.addEventListener("canplay",function(){_=!0,v&&i()})}return e.addEventListener("error",a),t.credentials?e.crossOrigin="use-credentials":e.crossOrigin="anonymous",e.src=t.src,m}function p(t){b!==l&&b!==f&&(b=l,x.forEach(function(t){t.cancel()}),v&&v("string"==typeof t?new Error("resl: "+t):t))}function d(t){if(b!==l&&b!==f){var e=0,n=0;x.forEach(function(t){t.ready&&(n+=1),e+=t.progress}),n===x.length?(b=f,y(g)):_&&_(e/x.length,t)}}"object"==typeof t&&t||r("invalid or missing configuration"),i(t,a,"config");var m=t.manifest;"object"==typeof m&&m||r("missing manifest");var y=e("onDone");y||r("missing onDone() callback");var _=e("onProgress"),v=e("onError"),g={},b=c,w={text:n,binary:function(t){return n(t)},image:function(t){return h(t,document.createElement("img"))},video:function(t){return h(t,document.createElement("video"))},audio:function(t){return h(t,document.createElement("audio"))}},x=Object.keys(m).map(function(t){function e(t,e){if(t in n.parser){var i=n.parser[t];return"function"!=typeof i&&r("invalid parser callback "+t+' for asset "'+t+'"'),i}return e}var n=m[t];"string"==typeof n?n={src:n}:"object"==typeof n&&n||r('invalid asset definition "'+t+'"'),i(n,s,'asset "'+t+'"');var o={};return"parser"in n&&("function"==typeof n.parser?o={data:n.parser}:"object"==typeof n.parser&&n.parser?(i(o,u,'parser for asset "'+t+'"'),"onData"in o||r('missing onData callback for parser in asset "'+t+'"'),o={data:e("onData"),done:e("onDone")}):r('invalid parser for asset "'+t+'"')),{name:t,type:function(e,i,o){var a=o;return e in n&&(a=n[e]),i.indexOf(a)<0&&r("invalid "+e+' "'+a+'" for asset "'+t+'", possible values: '+i),a}("type",Object.keys(w),"text"),stream:!!n.stream,credentials:!!n.credentials,src:function(e,i,o){var a=o;return e in n?a=n[e]:i&&r("missing "+e+' for asset "'+t+'"'),"string"!=typeof a&&r("invalid "+e+' for asset "'+t+'", must be a string'),a}("src",!0,""),parser:o}}).map(function(t){return w[t.type](t)});0===x.length&&setTimeout(function(){d("done")},1)}},{}],215:[function(t,e,n){"use strict";var r=t("is-arrayish"),i=Array.prototype.concat,o=Array.prototype.slice,a=e.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},{"is-arrayish":188}],216:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("./utils/dummy")),o=r(t("./utils/fake-context")),a=r(t("./utils/iOS")),s=window.AudioContext||window.webkitAudioContext||o.default,u=new s;u||(u=new o.default),a.default&&44100!==u.sampleRate&&((0,i.default)(u),u.close(),u=new s),"suspended"===u.state&&"function"==typeof u.resume&&window.setTimeout(function(){return u.resume()},1e3),n.default=u},{"./utils/dummy":226,"./utils/fake-context":228,"./utils/iOS":231}],217:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("babel-runtime/helpers/classCallCheck")),i=function(){function t(e){var n=this;(0,r.default)(this,t),this.context=e,this._destination=null,this._source=null,this._nodes=[],this._nodes.has=function(t){return n.has(t)},this._nodes.add=function(t){return n.add(t)},this._nodes.remove=function(t){return n.remove(t)},this._nodes.toggle=function(t,e){return n.toggle(t,e)},this._nodes.removeAll=function(){return n.removeAll()},Object.keys(t.prototype).forEach(function(e){n._nodes.hasOwnProperty(e)||"function"!=typeof t.prototype[e]||(n._nodes[e]=n[e].bind(n))})}return t.prototype.setSource=function(t){return this._source=t,this._updateConnections(),t},t.prototype.setDestination=function(t){return this._connectToDestination(t),t},t.prototype.has=function(t){return!!t&&this._nodes.indexOf(t)>-1},t.prototype.add=function(t){if(!t)return null;if(this.has(t))return t;if(Array.isArray(t)){for(var e=void 0,n=0;n<t.length;n++)e=this.add(t[n]);return e}return this._nodes.push(t),this._updateConnections(),t},t.prototype.remove=function(t){if(!t)return null;if(!this.has(t))return t;for(var e=this._nodes.length,n=0;n<e;n++)if(t===this._nodes[n]){this._nodes.splice(n,1);break}return t.disconnect(),this._updateConnections(),t},t.prototype.toggle=function(t,e){e=!!e;var n=this.has(t);return arguments.length>1&&n===e?this:(n?this.remove(t):this.add(t),this)},t.prototype.removeAll=function(){for(;this._nodes.length;){this._nodes.pop().disconnect()}return this._updateConnections(),this},t.prototype.destroy=function(){this.removeAll(),this.context=null,this._destination=null,this._source&&this._source.disconnect(),this._source=null},t.prototype._connect=function(t,e){t.disconnect(),t.connect(e._in||e)},t.prototype._connectToDestination=function(t){var e=this._nodes[this._nodes.length-1]||this._source;e&&this._connect(e,t),this._destination=t},t.prototype._updateConnections=function(){if(this._source){for(var t=void 0,e=void 0,n=0;n<this._nodes.length;n++)t=this._nodes[n],e=0===n?this._source:this._nodes[n-1],this._connect(e,t);this._destination&&this._connectToDestination(this._destination)}},t}();n.default=i},{"babel-runtime/helpers/classCallCheck":9}],218:[function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=void 0;return t||0===t?(o.some(function(e){return(e===t||e.id===t)&&(n=e,!0)}),n&&e?e(n):n):n}function r(t){return n(t,function(t){return o.splice(o.indexOf(t),1)}),l}var o=[],a=new i.default(t),s=t.createGain(),u=1,l=null;return t&&(a.setSource(s),a.setDestination(e||t.destination)),l={add:function(t){return t.gain.disconnect(),t.gain.connect(s),o.push(t),t.once("destroy",r),l},find:n,remove:r,play:function(t,e){return o.forEach(function(n){return n.play(t,e)}),l},pause:function(){return o.forEach(function(t){t.playing&&t.pause()}),l},resume:function(){return o.forEach(function(t){t.paused&&t.play()}),l},stop:function(){return o.forEach(function(t){return t.stop()}),l},seek:function(t){return o.forEach(function(e){return e.seek(t)}),l},setVolume:function(t){return l.volume=t,l},mute:function(){return u=l.volume,l.volume=0,l},unMute:function(){return l.volume=u||1,l},fade:function(e,n){if(t){var r=s.gain,i=t.currentTime;r.cancelScheduledValues(i),r.setValueAtTime(r.value,i),r.linearRampToValueAtTime(e,i+n)}else o.forEach(function(t){return t.fade(e,n)});return l},load:function(){o.forEach(function(t){return t.load()})},unload:function(){o.forEach(function(t){return t.unload()})},destroy:function(){for(;o.length;)o.pop().destroy()},gain:s,get effects(){return a._nodes},set effects(t){a.removeAll().add(t)},get fx(){return this.effects},set fx(t){this.effects=t},get sounds(){return o},get volume(){return s.gain.value},set volume(e){isNaN(e)||(e=Math.min(Math.max(e,0),1),t?(s.gain.cancelScheduledValues(t.currentTime),s.gain.value=e,s.gain.setValueAtTime(e,t.currentTime)):s.gain.value=e,o.forEach(function(t){t.context||(t.groupVolume=e)}))}}}n.__esModule=!0,n.default=r;var i=function(t){return t&&t.__esModule?t:{default:t}}(t("./effects"));r.Effects=i.default},{"./effects":217}],219:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return O.find(t)}function o(t){var e=new E.default(_.default,O.gain);return t&&t.forEach(function(t){return e.add(t)}),e}function a(t){var e=g.default.getSupportedFile(t.src||t.url||t.data||t),n=new T.default(Object.assign({},t||{},{src:e,context:_.default,destination:O.gain}));return n.isTouchLocked=M,t&&(n.id=t.id||t.name||"",n.loop=!!t.loop,n.volume=t.volume,n.effects=t.effects||[]),O.add(n),n}function s(t,e){var n=a(t).prepare();return e&&e.add(n.loader),n}function u(t){var e=t.src||t.url||t.data||t,n=void 0,r=void 0;if(g.default.containsURL(e))n=s(t),r=n.loader;else{if(!Array.isArray(e)||!g.default.containsURL(e[0].src||e[0].url)){var i="sono.load: No audio file URLs found in config.";if(!t.onError)throw new Error(i);return t.onError("[ERROR] "+i),null}n=[],r=new w.default.Group,e.forEach(function(t){return n.push(s(t,r))})}return t.onProgress&&r.on("progress",function(e){return t.onProgress(e)}),t.onComplete&&r.once("complete",function(){r.off("progress"),t.onComplete(n)}),r.once("error",function(e){r.off("error"),t.onError&&t.onError(e)}),r.start(),n}function l(t){if(g.default.containsURL(t))return u(t);var e=a(t);return e.data=t.data||t,e}function c(){for(;P.length;)P.pop().play()}n.__esModule=!0;var f,h,p,d,m,y=r(t("babel-runtime/helpers/defineEnumerableProperties"));t("core-js/fn/object/assign");var _=r(t("./context")),v=r(t("./effects")),g=r(t("./utils/file")),b=r(t("./group")),w=r(t("./utils/loader")),x=r(t("./utils/log")),S=r(t("./utils/pageVisibility")),T=r(t("./sound")),E=r(t("./utils/sound-group")),A=r(t("./utils/touchLock")),k=r(t("./utils/utils")),O=new b.default(_.default,_.default.destination),M=(0,A.default)(_.default,function(){M=!1,O.sounds.forEach(function(t){return t.isTouchLocked=!1})}),P=[],C=(0,S.default)(function(){O.sounds.forEach(function(t){t.playing&&(t.pause(),P.push(t))})},c),j=(d={canPlay:g.default.canPlay,context:_.default,create:l,createGroup:o,createSound:l,destroyAll:function(){return O.destroy(),j},destroy:function(t){return O.find(t,function(t){return t.destroy()}),j},effects:O.effects,extensions:g.default.extensions,fade:function(t,e){return O.fade(t,e),j},file:g.default,gain:O.gain,getOfflineContext:k.default.getOfflineContext,get:i,getSound:i,group:o,hasWebAudio:!_.default.isFake,isSupported:g.default.extensions.length>0,load:u,log:function(){return(0,x.default)(j)},mute:function(){return O.mute(),j},pause:function(t){return O.find(t,function(t){return t.pause()}),j},pauseAll:function(){return O.pause(),j},play:function(t,e,n){return O.find(t,function(t){return t.play(e,n)}),j},register:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.default.prototype)[t]=e,j[t]=e,e},resumeAll:function(){return O.resume(),j},stop:function(t){return O.find(t,function(t){return t.stop()}),j},stopAll:function(){return O.stop(),j},unMute:function(){return O.unMute(),j},utils:k.default,VERSION:"2.1.4"},"effects",m={},m.effects=m.effects||{},m.effects.get=function(){return O.effects},"effects",m.effects=m.effects||{},m.effects.set=function(t){O.effects.removeAll().add(t)},"fx",m.fx=m.fx||{},m.fx.get=function(){return this.effects},"fx",m.fx=m.fx||{},m.fx.set=function(t){this.effects=t},f="isTouchLocked",m[f]=m[f]||{},m[f].get=function(){return M},h="playInBackground",m[h]=m[h]||{},m[h].get=function(){return!C.enabled},p="playInBackground",m[p]=m[p]||{},m[p].set=function(t){C.enabled=!t,t||c()},"sounds",m.sounds=m.sounds||{},m.sounds.get=function(){return O.sounds.slice(0)},"volume",m.volume=m.volume||{},m.volume.get=function(){return O.volume},"volume",m.volume=m.volume||{},m.volume.set=function(t){O.volume=t},d.__test={Effects:v.default,Group:b.default,Sound:T.default},(0,y.default)(d,m),d);n.default=j},{"./context":216,"./effects":217,"./group":218,"./sound":220,"./utils/file":229,"./utils/loader":234,"./utils/log":235,"./utils/pageVisibility":236,"./utils/sound-group":237,"./utils/touchLock":238,"./utils/utils":239,"babel-runtime/helpers/defineEnumerableProperties":11,"core-js/fn/object/assign":55}],220:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./context")),l=r(t("./source/buffer-source")),c=r(t("./effects")),f=r(t("./utils/emitter")),h=r(t("./utils/file")),p=r(t("./utils/firefox")),d=r(t("./utils/utils")),m=r(t("./utils/isSafeNumber")),y=r(t("./utils/loader")),_=r(t("./source/audio-source")),v=r(t("./source/media-source")),g=r(t("./source/microphone-source")),b=r(t("./source/oscillator-source")),w=function(t){function e(n){(0,i.default)(this,e);var r=(0,a.default)(this,t.call(this));return r.id=n.id||null,r._context=n.context||u.default,r._destination=n.destination||r._context.destination,r._effects=new c.default(r._context),r._gain=r._context.createGain(),r._config=n,r._data=null,r._fadeTimeout=null,r._isTouchLocked=!1,r._loader=null,r._loop=!1,r._offset=0,r._playbackRate=1,r._playWhenReady=null,r._source=null,r._wave=null,r._userData={},r._effects.setDestination(r._gain),r._gain.connect(r._destination),r._onEnded=r._onEnded.bind(r),r._onLoad=r._onLoad.bind(r),r._onLoadError=r._onLoadError.bind(r),r}return(0,s.default)(e,t),e.prototype.prepare=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&!this._source&&!!this._config.deferLoad;if(t){var n=h.default.getSrc(t),r=h.default.getSupportedFile(n)||this._config.src;this._config=Object.assign(this._config,t,{src:r})}return this._source&&this._data&&this._data.tagName?this._source.load(this._config.src):(this._loader=new y.default(this._config.src,e),this._loader.audioContext=this._config.asMediaElement||this._context.isFake?null:this._context,this._loader.isTouchLocked=this._isTouchLocked,this._loader.once("loaded",this._onLoad),this._loader.once("error",this._onLoadError)),this},e.prototype.load=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.stop(),this._source=null,!t||h.default.containsURL(t)?(this._loader&&this._loader.destroy(),this.prepare(t,!0),this._loader.start()):this.data=t.data||t,this},e.prototype.play=function(t,e){var n=this;return!this._source||this._isTouchLocked?(this._playWhenReady=function(){n._source&&n.play(t,e)},this._config.deferLoad&&(this._loader||this.prepare(null,!0),this._loader.start(!0)),this):(this._playWhenReady=null,this._effects.setSource(this._source.sourceNode),this._offset&&void 0===e&&(e=this._offset,this._offset=0),this._source.play(t,e),this._source.hasOwnProperty("volume")&&(this._source.volume=this._gain.gain.value),this._source.hasOwnProperty("loop")&&(this._source.loop=this._loop),this.emit("play",this),this)},e.prototype.pause=function(){return this._source&&this._source.pause(),this.emit("pause",this),this},e.prototype.stop=function(t){return this._source&&this._source.stop(t||0),this.emit("stop",this),this},e.prototype.seek=function(t){return this.currentTime=t,this},e.prototype.fade=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this._source)return this;var n=this._gain.gain;if(!this._context||this._context.isFake||p.default)this._fadePolyfill(t,e);else{var r=this._context.currentTime;n.cancelScheduledValues(r),n.setValueAtTime(n.value,r),n.linearRampToValueAtTime(t,r+e)}return this.emit("fade",this,t),this},e.prototype._fadePolyfill=function(t,e){var n=this;return window.clearTimeout(this._fadeTimeout),function t(e,r){n._fadeTimeout=window.setTimeout(function(){n.volume=n.volume+.2*(e-n.volume),Math.abs(n.volume-e)>.05?t(e,r):n.volume=e},1e3*r)}(t,e/10),this},e.prototype.unload=function(){this._source&&this._source.destroy(),this._loader&&this._loader.destroy(),this._data=null,this._playWhenReady=null,this._source=null,this._loader=null,this._config.deferLoad=!0,this.emit("unload",this)},e.prototype.reload=function(){return this.load(null,!0)},e.prototype.destroy=function(){this._source&&this._source.destroy(),this._effects&&this._effects.destroy(),this._gain&&this._gain.disconnect(),this._loader&&(this._loader.off("loaded"),this._loader.off("error"),this._loader.destroy()),this._gain=null,this._context=null,this._destination=null,this._data=null,this._playWhenReady=null,this._source=null,this._effects=null,this._loader=null,this._config=null,this.emit("destroy",this),this.off()},e.prototype.waveform=function(t){var e=this;return this._wave||(this._wave=d.default.waveform()),this._data||this.once("ready",function(){return e._wave(e._data,t)}),this._wave(this._data,t)},e.prototype._createSource=function(t){var e=h.default.isAudioBuffer(t);if(e||h.default.isMediaElement(t)){var n=e?l.default:v.default;this._source=new _.default(n,t,this._context,this._onEnded),this._source.singlePlay=!!this._config.singlePlay,this._source.playbackRate=this._playbackRate,this._source.currentTime=this._offset}else if(h.default.isMediaStream(t))this._source=new g.default(t,this._context);else{if(!h.default.isOscillatorType(t&&t.type||t))throw new Error("Cannot detect data type: "+t);this._source=new b.default(t.type||t,this._context)}this._effects.setSource(this._source.sourceNode),this.emit("ready",this),this._playWhenReady&&this._playWhenReady()},e.prototype._onEnded=function(){this.emit("ended",this)},e.prototype._onLoad=function(t){this._data=t,this.emit("loaded",this),this._createSource(t)},e.prototype._onLoadError=function(t){this.listenerCount("error")&&this.emit("error",this,t)},(0,o.default)(e,[{key:"context",get:function(){return this._context}},{key:"currentTime",get:function(){return this._source?this._source.currentTime:this._offset},set:function(t){if(this._source){var e=this._source.playing;this._source.stop(),this._source.currentTime=t,e&&this.play(0,t)}else this._offset=t}},{key:"data",get:function(){return this._data},set:function(t){t&&(this._data=t,this._createSource(t))}},{key:"duration",get:function(){return this._source?this._source.duration:0}},{key:"effects",get:function(){return this._effects._nodes},set:function(t){this._effects.removeAll().add(t)}},{key:"fx",get:function(){return this.effects},set:function(t){this.effects=t}},{key:"ended",get:function(){return!!this._source&&this._source.ended}},{key:"frequency",get:function(){return this._source?this._source.frequency:0},set:function(t){this._source&&this._source.hasOwnProperty("frequency")&&(this._source.frequency=t)}},{key:"gain",get:function(){return this._gain}},{key:"groupVolume",get:function(){return this._source.groupVolume},set:function(t){this._source&&this._source.hasOwnProperty("groupVolume")&&(this._source.groupVolume=t)}},{key:"isTouchLocked",set:function(t){this._isTouchLocked=t,this._loader&&(this._loader.isTouchLocked=t),!t&&this._playWhenReady&&this._playWhenReady()}},{key:"loader",get:function(){return this._loader}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop=!!t,this._source&&this._source.hasOwnProperty("loop")&&this._source.loop!==this._loop&&(this._source.loop=this._loop)}},{key:"singlePlay",get:function(){return this._config.singlePlay},set:function(t){this._config.singlePlay=t,this._source.singlePlay=t}},{key:"config",get:function(){return this._config}},{key:"paused",get:function(){return!!this._source&&this._source.paused}},{key:"playing",get:function(){return!!this._source&&this._source.playing}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate=t)}},{key:"progress",get:function(){return this._source?this._source.progress||0:0}},{key:"sourceInfo",get:function(){return this._source&&this._source.info?this._source.info:{}}},{key:"sourceNode",get:function(){return this._source?this._source.sourceNode:null}},{key:"volume",get:function(){return this._gain.gain.value},set:function(t){if((0,m.default)(t)){window.clearTimeout(this._fadeTimeout),t=Math.min(Math.max(t,0),1);var e=this._gain.gain,n=this._context.currentTime;e.cancelScheduledValues(n),e.value=t,p.default||e.setValueAtTime(t,n),this._source&&this._source.hasOwnProperty("volume")&&(this._source.volume=t)}}},{key:"userData",get:function(){return this._userData}}]),e}(f.default);n.default=w,w.__source={BufferSource:l.default,MediaSource:v.default,MicrophoneSource:g.default,OscillatorSource:b.default}},{"./context":216,"./effects":217,"./source/audio-source":221,"./source/buffer-source":222,"./source/media-source":223,"./source/microphone-source":224,"./source/oscillator-source":225,"./utils/emitter":227,"./utils/file":229,"./utils/firefox":230,"./utils/isSafeNumber":233,"./utils/loader":234,"./utils/utils":239,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],221:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n,r){function i(t){t.stop(),d||f.push(t)}function o(t){if(t!==l&&h.length){var e=h.indexOf(t);h.splice(e,1),i(t)}r()}function a(e){return new t(e,n,o)}function s(){for(l.stop();h.length;)i(h.pop())}var u=n.createGain(),l=a(e),c={},f=[],h=[],p=0,d=!1;return Object.defineProperties(c,{play:{value:function(t,n){var r=d||!l.playing?l:f.length>0?f.pop():(p++,a(e.tagName?e.cloneNode():e));u&&r.sourceNode.connect(u),r!==l&&h.push(r),r.play(t,n)}},pause:{value:function(){l.pause(),h.forEach(function(t){return t.pause()})}},stop:{value:s},load:{value:function(t){s(),f.length=0,l.load(t)}},destroy:{value:function(){for(l.destroy();h.length;)h.pop().destroy();for(;f.length;)f.pop().destroy();u.disconnect()}},currentTime:{get:function(){return l.currentTime||0},set:function(t){l.currentTime=t,h.forEach(function(e){return e.currentTime=t})}},duration:{get:function(){return l.duration||0}},ended:{get:function(){return l.ended&&h.every(function(t){return t.ended})}},info:{get:function(){return{pooled:f.length,active:h.length+1,created:p+1}}},loop:{get:function(){return l.loop},set:function(t){l.loop=!!t,h.forEach(function(e){return e.loop=!!t})}},paused:{get:function(){return l.paused}},playbackRate:{get:function(){return l.playbackRate},set:function(t){l.playbackRate=t,h.forEach(function(e){return e.playbackRate=t})}},playing:{get:function(){return l.playing}},progress:{get:function(){return l.progress}},singlePlay:{get:function(){return d},set:function(t){d=t}},sourceNode:{get:function(){return u}},volume:{get:function(){return l.volume},set:function(t){l.hasOwnProperty("volume")&&(l.volume=t,h.forEach(function(e){return e.volume=t}))}},groupVolume:{get:function(){return l.groupVolume},set:function(t){l.hasOwnProperty("groupVolume")&&(l.groupVolume=t,h.forEach(function(e){return e.groupVolume=t}))}}}),Object.freeze(c)}},{}],222:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){function r(){return!p&&e&&((p=e.createBufferSource()).buffer=t),p}function i(){if(p){p.onended=null;try{p.disconnect(),p.stop(0)}catch(t){}p=null}l=!1,c=0,h=!1,d=0}function o(){i(),s=!0,"function"==typeof n&&n(a)}var a={},s=!1,u=!1,l=!1,c=0,f=1,h=!1,p=null,d=0;return Object.defineProperties(a,{play:{value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!h){for(t=t?e.currentTime+t:0,n&&(c=0),c&&(n=c);n>a.duration;)n%=a.duration;r(),p.onended=o,p.start(t,n),p.loop=u,p.playbackRate.value=f,d=e.currentTime-n,s=!1,l=!1,c=0,h=!0}}},pause:{value:function(){var t=e.currentTime-d;i(),c=t,h=!1,l=!0}},stop:{value:i},destroy:{value:function(){i(),t=null,e=null,n=null,p=null}},currentTime:{get:function(){if(c)return c;if(d){for(var t=e.currentTime-d;t>a.duration;)t%=a.duration;return t}return 0},set:function(t){c=t}},duration:{get:function(){return t?t.duration:0}},ended:{get:function(){return s}},loop:{get:function(){return u},set:function(t){u=!!t,p&&(p.loop=u)}},paused:{get:function(){return l}},playbackRate:{get:function(){return f},set:function(t){f=t,p&&(p.playbackRate.value=f)}},playing:{get:function(){return h}},progress:{get:function(){return a.duration?a.currentTime/a.duration:0}},sourceNode:{get:function(){return r()}}}),Object.freeze(a)}},{}],223:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e,n){function r(){t.removeEventListener("canplaythrough",r),d&&t.play()}function i(){if(f)return t.currentTime=0,t.currentTime>0&&t.load(),void t.play();u=!0,h=!1,d=!1,"function"==typeof l&&l(s)}function o(e,n){clearTimeout(c),t.volume=_*y,t.playbackRate=p,n&&(t.currentTime=n),e?c=setTimeout(o,e):t.play(),u=!1,h=!1,d=!0,t.removeEventListener("ended",i),t.addEventListener("ended",i,!1),t.readyState<1&&(t.removeEventListener("canplaythrough",r),t.addEventListener("canplaythrough",r,!1),t.play())}function a(){if(clearTimeout(c),t){t.pause();try{t.currentTime=0,t.currentTime>0&&t.load()}catch(t){}d=!1,h=!1}}var s={},u=!1,l=n,c=null,f=!1,h=!1,p=1,d=!1,m=null,y=1,_=1;return Object.defineProperties(s,{play:{value:o},pause:{value:function(){clearTimeout(c),t&&(t.pause(),d=!1,h=!0)}},stop:{value:a},load:{value:function(e){t.src=e,t.load(),u=!1,h=!1,d=!1}},destroy:{value:function(){t.removeEventListener("ended",i),t.removeEventListener("canplaythrough",r),a(),t=null,e=null,l=null,m=null}},currentTime:{get:function(){return t?t.currentTime:0},set:function(e){t&&(t.currentTime=e)}},duration:{get:function(){return t?t.duration:0}},ended:{get:function(){return u}},loop:{get:function(){return f},set:function(t){f=!!t}},paused:{get:function(){return h}},playbackRate:{get:function(){return p},set:function(e){p=e,t&&(t.playbackRate=p)}},playing:{get:function(){return d}},progress:{get:function(){return t&&t.duration?t.currentTime/t.duration:0}},sourceNode:{get:function(){return!m&&e&&(m=e.createMediaElementSource(t)),m}},volume:{get:function(){return _},set:function(e){_=e,t&&(t.volume=_*y)}},groupVolume:{get:function(){return y},set:function(e){y=e,t&&(t.volume=_*y)}}}),Object.freeze(s)}},{}],224:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){function n(){return!u&&e&&(u=e.createMediaStreamSource(t),navigator.mozGetUserMedia&&(window.mozHack=u)),u}function r(){if(u){try{u.stop(0)}catch(t){}u=null}i=!0,o=!1,a=0,s=!1,l=0}var i=!1,o=!1,a=0,s=!1,u=null,l=0,c={play:function(t){t=t?e.currentTime+t:0,n(),u.start(t),l=e.currentTime-a,i=!1,s=!0,o=!1,a=0},pause:function(){var t=e.currentTime-l;r(),a=t,s=!1,o=!0},stop:r,destroy:function(){r(),e=null,u=null,t=null,window.mozHack=null},duration:0,progress:0};return Object.defineProperties(c,{currentTime:{get:function(){return a||(l?e.currentTime-l:0)},set:function(t){a=t}},ended:{get:function(){return i}},paused:{get:function(){return o}},playing:{get:function(){return s}},sourceNode:{get:function(){return n()}}}),Object.freeze(c)}},{}],225:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){function n(){return!u&&e&&((u=e.createOscillator()).type=t,u.frequency.value=c),u}function r(){if(u){try{u.stop(0)}catch(t){}u=null}i=!0,o=!1,a=0,s=!1,l=0}var i=!1,o=!1,a=0,s=!1,u=null,l=0,c=200,f=null;return f={play:function(t){(t=t||0)&&(t=e.currentTime+t),n(),u.start(t),l=a?e.currentTime-a:e.currentTime,i=!1,s=!0,o=!1,a=0},pause:function(){var t=e.currentTime-l;r(),a=t,s=!1,o=!0},stop:r,destroy:function(){r(),e=null,u=null}},Object.defineProperties(f,{currentTime:{get:function(){return a||(l?e.currentTime-l:0)},set:function(t){a=t}},duration:{value:0},ended:{get:function(){return i}},frequency:{get:function(){return c},set:function(t){c=t,u&&(u.frequency.value=t)}},paused:{get:function(){return o}},playing:{get:function(){return s}},progress:{value:0},sourceNode:{get:function(){return n()}}}),Object.freeze(f)}},{}],226:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=t.createBuffer(1,1,t.sampleRate),n=t.createBufferSource();n.buffer=e,n.connect(t.destination),n.start(0),n.stop(0),n.disconnect()}},{}],227:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/possibleConstructorReturn")),a=r(t("babel-runtime/helpers/inherits")),s=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.call(this))}return(0,a.default)(e,t),e.prototype.off=function(t,e){return e?this.removeListener(t,e):t?this.removeAllListeners(t):this.removeAllListeners()},e}(r(t("events")).default.EventEmitter);n.default=s},{"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13,events:166}],228:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){function t(){}function e(){return{value:1,defaultValue:1,linearRampToValueAtTime:t,setValueAtTime:t,exponentialRampToValueAtTime:t,setTargetAtTime:t,setValueCurveAtTime:t,cancelScheduledValues:t}}function n(){return{connect:t,disconnect:t,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:t,getByteFrequencyData:t,getFloatTimeDomainData:t,getFloatFrequencyData:t,gain:e(),panningModel:0,setPosition:t,setOrientation:t,setVelocity:t,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:e(),Q:e(),detune:e(),delayTime:e(),buffer:0,threshold:e(),knee:e(),ratio:e(),attack:e(),release:e(),reduction:e(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:t,copyToChannel:t,dopplerFactor:0,speedOfSound:0,start:t}}var r=Date.now();return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{isFake:!0,activeSourceCount:0,createAnalyser:n,createBuffer:n,createBufferSource:n,createMediaElementSource:n,createMediaStreamSource:n,createBiquadFilter:n,createChannelMerger:n,createChannelSplitter:n,createDynamicsCompressor:n,createConvolver:n,createDelay:n,createGain:n,createOscillator:n,createPanner:n,createScriptProcessor:n,createWaveShaper:n,decodeAudioData:t,destination:n,listener:n(),sampleRate:44100,state:"",get currentTime(){return(Date.now()-r)/1e3}}}},{}],229:[function(t,e,n){"use strict";function r(t){if("string"!=typeof t)return"";if("data:"===t.slice(0,5)){var e=t.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(e&&e.length>1)return e[1].toLowerCase()}var n=(t=(t=t.split("?")[0]).slice(t.lastIndexOf("/")+1)).split(".");return 1===n.length||""===n[0]&&2===n.length?"":n.pop().toLowerCase()}function i(t){return!!(t&&window.ArrayBuffer&&t instanceof window.ArrayBuffer)}function o(t){return!!(t&&window.HTMLMediaElement&&t instanceof window.HTMLMediaElement)}function a(t){return!(!t||"string"!=typeof t||!(t.indexOf(".")>-1||"data:"===t.slice(0,5)))}function s(t){return t.src||t.url||t.data||t}n.__esModule=!0;var u=function(t){return t&&t.__esModule?t:{default:t}}(t("babel-runtime/helpers/typeof")),l=[],c={},f=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],h=document.createElement("audio");h&&(f.forEach(function(t){var e=!!h.canPlayType(t.type);e&&-1===l.indexOf(t.ext)&&l.push(t.ext),c[t.ext]=e}),h=null),n.default={canPlay:c,containsURL:function(t){if(!t||o(t))return!1;var e=s(t);return a(e)||i(e)||Array.isArray(e)&&a(e[0])},extensions:l,getFileExtension:r,getSrc:s,getSupportedFile:function(t){var e=void 0;if(Array.isArray(t))for(var n=0;n<t.length;n++){var i=r(e=t[n]);if(l.indexOf(i)>-1)break}else"object"===(void 0===t?"undefined":(0,u.default)(t))&&Object.keys(t).some(function(n){var i=r(e=t[n]);return l.indexOf(i)>-1});return e||t},isAudioBuffer:function(t){return!!(t&&window.AudioBuffer&&t instanceof window.AudioBuffer)},isArrayBuffer:i,isMediaElement:o,isMediaStream:function(t){return!!(t&&"function"==typeof t.getAudioTracks&&t.getAudioTracks().length&&window.MediaStreamTrack&&t.getAudioTracks()[0]instanceof window.MediaStreamTrack)},isOscillatorType:function(t){return!(!t||"string"!=typeof t||"sine"!==t&&"square"!==t&&"sawtooth"!==t&&"triangle"!==t)},isURL:a}},{"babel-runtime/helpers/typeof":14}],230:[function(t,e,n){"use strict";n.__esModule=!0,n.default=navigator&&/Firefox/i.test(navigator.userAgent)},{}],231:[function(t,e,n){"use strict";n.__esModule=!0,n.default=navigator&&/(iPhone|iPad|iPod)/i.test(navigator.userAgent)},{}],232:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){return void 0!==t}},{}],233:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}},{}],234:[function(t,e,n){"use strict";function r(t,e){function n(){d.off(),y&&"function"==typeof y.removeEventListener&&(y.removeEventListener("load",f),y.removeEventListener("canplaythrough",f),y.removeEventListener("error",s),y.onerror=null),g&&(g.removeEventListener("progress",a),g.removeEventListener("load",c),g.removeEventListener("error",s))}function r(t){d.emit("progress",1),d.emit("loaded",t),d.emit("complete",t),n()}function a(t){t.lengthComputable&&(v=t.loaded/t.total,d.emit("progress",v))}function s(){u();var e="";g?e=g.status+" "+g.statusText:y&&y.error&&(e=o[y.error.code]),d.listenerCount("error")&&d.emit("error",new Error("Load Error: "+e+" "+t)),n()}function u(){window.clearTimeout(b)}function l(t){m.decodeAudioData(t,function(t){y=t,g=null,v=1,r(t)},s)}function c(){g.status>=400?s():l(g.response)}function f(){u(),y&&(y.readyState?(v=1,r(y)):s())}function h(){u(),n(),g&&4!==g.readyState&&g.abort(),g=null}function p(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!t||e&&!n||(m?t instanceof window.ArrayBuffer?l(t):((g=new XMLHttpRequest).open("GET",t,!0),g.responseType="arraybuffer",g.addEventListener("progress",a),g.addEventListener("load",c),g.addEventListener("error",s),g.send()):(y&&y.tagName||(y=document.createElement("audio")),_||(u(),b=window.setTimeout(f,3e3),y.addEventListener("canplaythrough",f,!1),y.addEventListener("load",f,!1)),y.addEventListener("error",s,!1),y.preload="auto",y.onerror=s,y.src=t,y.load(),_&&r(y)))}var d=new i.default,m=null,y=null,_=!1,v=0,g=null,b=null,w={on:d.on.bind(d),once:d.once.bind(d),off:d.off.bind(d),load:function(e){t=e,p()},start:p,cancel:h,destroy:function(){h(),g=null,y=null,m=null}};return Object.defineProperties(w,{data:{get:function(){return y}},progress:{get:function(){return v}},audioContext:{set:function(t){m=t}},isTouchLocked:{set:function(t){_=t}},url:{get:function(){return t}}}),Object.freeze(w)}n.__esModule=!0,n.default=r;var i=function(t){return t&&t.__esModule?t:{default:t}}(t("./emitter")),o=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"];r.Group=function(){function t(t){var e=u+t;a.emit("progress",e/l)}function e(){u++,o(),a.emit("progress",u/l),r()}function n(t){o(),a.listenerCount("error")&&a.emit("error",t),r()}function r(){if(0===s.length)return c=null,void a.emit("complete");(c=s.pop()).on("progress",t),c.once("loaded",e),c.once("error",n),c.start()}function o(){c.off("progress",t),c.off("loaded",e),c.off("error",n)}var a=new i.default,s=[],u=0,l=0,c=null;return Object.freeze({on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),add:function(t){return s.push(t),l++,t},start:function(){l=s.length,r()}})}},{"./emitter":227}],235:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){t.VERSION,t.isSupported,t.hasWebAudio,t.isTouchLocked,t.context&&t.context.state,t.file.extensions,navigator.userAgent.indexOf("Chrome")>-1||window.console&&window.console.log.call}},{}],236:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){function n(){document[o]?t():e()}function r(t){(i=t)?document.addEventListener(a,n,!1):document.removeEventListener(a,n)}var i=!1,o=null,a=null;return void 0!==document.hidden?(o="hidden",a="visibilitychange"):void 0!==document.mozHidden?(o="mozHidden",a="mozvisibilitychange"):void 0!==document.msHidden?(o="msHidden",a="msvisibilitychange"):void 0!==document.webkitHidden&&(o="webkitHidden",a="webkitvisibilitychange"),void 0!==a&&r(!0),{get enabled(){return i},set enabled(t){r(t)}}}},{}],237:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){function n(){o.length&&(u=o.slice(0).sort(function(t,e){return e.duration-t.duration})[0])}var i=new r.default(t,e),o=i.sounds,a=1,s=!1,u=void 0,l=i.add;i.add=function(t){return l(t),n(),i};var c=i.rmeove;return i.remove=function(t){return c(t),n(),i},Object.defineProperties(i,{currentTime:{get:function(){return u?u.currentTime:0},set:function(t){this.stop(),this.play(0,t)}},duration:{get:function(){return u?u.duration:0}},loop:{get:function(){return s},set:function(t){s=!!t,o.forEach(function(t){t.loop=s})}},paused:{get:function(){return!!u&&u.paused}},progress:{get:function(){return u?u.progress:0}},playbackRate:{get:function(){return a},set:function(t){a=t,o.forEach(function(t){t.playbackRate=a})}},playing:{get:function(){return!!u&&u.playing}}}),i};var r=function(t){return t&&t.__esModule?t:{default:t}}(t("../group"))},{"../group":218}],238:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.default=function(t,e){function n(){t&&"suspended"===t.state?t.resume().then(function(){(0,o.default)(t),r()}):r()}function r(){document.body.removeEventListener("touchstart",n),document.body.removeEventListener("touchend",n),e()}function a(){document.body.addEventListener("touchstart",n,!1),document.body.addEventListener("touchend",n,!1)}var s=i.default;return s&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()),s};var i=r(t("./iOS")),o=r(t("./dummy"))},{"./dummy":226,"./iOS":231}],239:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("../context")),i=void 0;n.default={getOfflineContext:function(t,e,n){if(i)return i;t=t||2,e=(n=n||44100)||t;var r=window.OfflineAudioContext||window.webkitOfflineAudioContext;return i=r?new r(t,e,n):null},cloneBuffer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;if(!r.default||r.default.isFake)return t;for(var i=t.numberOfChannels,o=r.default.createBuffer(i,n,t.sampleRate),a=0;a<i;a++)o.getChannelData(a).set(t.getChannelData(a).slice(e,e+n));return o},reverseBuffer:function(t){for(var e=t.numberOfChannels,n=0;n<e;n++)Array.prototype.reverse.call(t.getChannelData(n));return t},ramp:function(t,e,n,i,o){r.default.isFake||(t.setValueAtTime(e,r.default.currentTime),o?t.linearRampToValueAtTime(n,r.default.currentTime+i):t.exponentialRampToValueAtTime(n,r.default.currentTime+i))},getFrequency:function(t){if(r.default.isFake)return 0;var e=r.default.sampleRate/2,n=Math.log(e/40)/Math.LN2;return e*Math.pow(2,n*(t-1))},timeCode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=Math.floor(t/60),r=Math.floor(t%3600%60);return(n<10?"0"+n:n)+e+(r<10?"0"+r:r)}}},{"../context":216}],240:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("../core/context")),s=function(){function t(e){(0,i.default)(this,t),this._node=this._in=this._out=e}return t.prototype.connect=function(t){this._node.connect(t._in||t)},t.prototype.disconnect=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._node.disconnect(e)},t.prototype.update=function(){throw new Error("update must be overridden")},(0,o.default)(t,[{key:"context",get:function(){return a.default}},{key:"numberOfInputs",get:function(){return 1}},{key:"numberOfOutputs",get:function(){return 1}},{key:"channelCount",get:function(){return 1}},{key:"channelCountMode",get:function(){return"max"}},{key:"channelInterpretation",get:function(){return"speakers"}}]),t}();n.default=s},{"../core/context":216,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10}],241:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("../core/context")),s=r(t("../core/utils/isSafeNumber")),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,i.default)(this,t),this._node=e,this._nodeOut=n||e,this._enabled,this._in=this.context.createGain(),this._out=this.context.createGain(),this._wet=this.context.createGain(),this._dry=this.context.createGain(),this._in.connect(this._dry),this._wet.connect(this._out),this._dry.connect(this._out),this.enable(r)}return t.prototype.enable=function(t){t!==this._enabled&&(this._enabled=t,this._in.disconnect(),t?(this._in.connect(this._dry),this._in.connect(this._node),this._nodeOut.connect(this._wet)):(this._nodeOut.disconnect(),this._in.connect(this._out)))},t.prototype.connect=function(t){this._out.connect(t._in||t)},t.prototype.disconnect=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._out.disconnect(e)},t.prototype.setSafeParamValue=function(t,e){(0,s.default)(e)&&(t.value=e)},t.prototype.update=function(){throw new Error("update must be overridden")},(0,o.default)(t,[{key:"wet",get:function(){return this._wet.gain.value},set:function(t){this.setSafeParamValue(this._wet.gain,t)}},{key:"dry",get:function(){return this._dry.gain.value},set:function(t){this.setSafeParamValue(this._dry.gain,t)}},{key:"context",get:function(){return a.default}},{key:"numberOfInputs",get:function(){return 1}},{key:"numberOfOutputs",get:function(){return 1}},{key:"channelCount",get:function(){return 1}},{key:"channelCountMode",get:function(){return"max"}},{key:"channelInterpretation",get:function(){return"speakers"}}]),t}();n.default=u},{"../core/context":216,"../core/utils/isSafeNumber":233,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10}],242:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return Math.floor(1200*Math.log(t/function(t){return 440*Math.pow(2,(t-69)/12)}(e))*Math.LOG2E)}n.__esModule=!0;var o=r(t("babel-runtime/helpers/classCallCheck")),a=r(t("babel-runtime/helpers/createClass")),s=r(t("babel-runtime/helpers/possibleConstructorReturn")),u=r(t("babel-runtime/helpers/inherits")),l=r(t("./abstract-direct-effect")),c=r(t("../core/utils/isSafeNumber")),f=r(t("../core/sono")),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fftSize,i=void 0===r?2048:r,a=n.minDecibels,u=void 0===a?-100:a,l=n.maxDecibels,c=void 0===l?-30:l,h=n.smoothing,p=void 0===h?.9:h,d=n.useFloats,m=void 0!==d&&d;(0,o.default)(this,e);var y=(0,s.default)(this,t.call(this,f.default.context.createAnalyser()));return y._useFloats=!!m,y._waveform=null,y._frequencies=null,y._node.fftSize=i,y.update({minDecibels:u,maxDecibels:c,smoothing:p}),y}return(0,u.default)(e,t),e.prototype.update=function(t){var e=t.minDecibels,n=t.maxDecibels,r=t.smoothing;(0,c.default)(r)&&(this._node.smoothingTimeConstant=r),(0,c.default)(e)&&(this._node.minDecibels=e),(0,c.default)(n)&&(this._node.maxDecibels=n)},e.prototype.getWaveform=function(){var t=this._useFloats&&this._node.getFloatTimeDomainData;return this._waveform||(this._waveform=this._createArray(t,this._node.fftSize)),t?this._node.getFloatTimeDomainData(this._waveform):this._node.getByteTimeDomainData(this._waveform),this._waveform},e.prototype.getFrequencies=function(){var t=this._useFloats&&this._node.getFloatFrequencyData;return this._frequencies||(this._frequencies=this._createArray(t,this._node.frequencyBinCount)),t?this._node.getFloatFrequencyData(this._frequencies):this._node.getByteFrequencyData(this._frequencies),this._frequencies},e.prototype.getAmplitude=function(t){this._amplitudeWorker||this._createAmplitudeAnalyser(),this._amplitudeCallback=t||this._amplitudeCallback;var e=new Float32Array(this._node.fftSize);e.set(this.getFrequencies(!0)),this._amplitudeWorker.postMessage({sum:0,length:e.byteLength,numSamples:this._node.fftSize/2,b:e.buffer},[e.buffer])},e.prototype.getPitch=function(t){this._pitchWorker||this._createPitchAnalyser(),this._pitchCallback=t||this._pitchCallback;var e=new Float32Array(this._node.fftSize);e.set(this.getWaveform(!0)),this._pitchWorker.postMessage({sampleRate:f.default.context.sampleRate,b:e.buffer},[e.buffer])},e.prototype._createArray=function(t,e){return t?new Float32Array(e):new Uint8Array(e)},e.prototype._createAmplitudeAnalyser=function(){var t=this,e=new Blob(["onmessage = function(e) {\n                var data = e.data;\n                var f = new Float32Array(data.b);\n                for (var i = 0; i < f.length; i++) {\n                    data.sum += f[i];\n                }\n                data.sum /= f.length;\n                postMessage(Math.max(1.0 - (data.sum / data.numSamples * -1.0), 0));\n            };"]),n=URL.createObjectURL(e);this._amplitudeWorker=new Worker(n),this._amplitudeWorker.onmessage=function(e){t._amplitudeCallback&&t._amplitudeCallback(e.data)}},e.prototype._createPitchAnalyser=function(){var t=this,e=new Blob(["onmessage = function(e) {\n                var data = e.data;\n                var sampleRate = data.sampleRate;\n                var buf = new Float32Array(data.b);\n                var SIZE = buf.length;\n                var MAX_SAMPLES = Math.floor(SIZE / 2);\n                var bestOffset = -1;\n                var bestCorrel = 0;\n                var rms = 0;\n                var foundGoodCorrelation = false;\n                var correls = new Array(MAX_SAMPLES);\n                for (var i = 0; i < SIZE; i++) {\n                    var val = buf[i];\n                    rms += val * val;\n                }\n                rms = Math.sqrt(rms / SIZE);\n                if (rms < 0.01) {\n                    postMessage(-1);\n                } else {\n                    var lastCorrelation = 1;\n                    for (var offset = 0; offset < MAX_SAMPLES; offset++) {\n                        var correl = 0;\n                        for (var i = 0; i < MAX_SAMPLES; i++) {\n                            correl += Math.abs(buf[i] - buf[i + offset]);\n                        }\n                        correl = 1 - correl / MAX_SAMPLES;\n                        correls[offset] = correl;\n                        if (correl > 0.9 && correl > lastCorrelation) {\n                            foundGoodCorrelation = true;\n                            if (correl > bestCorrel) {\n                                bestCorrel = correl;\n                                bestOffset = offset;\n                            }\n                        } else if (foundGoodCorrelation) {\n                            var shift = (correls[bestOffset + 1] - correls[bestOffset - 1]) / correls[bestOffset];\n                            postMessage(sampleRate / (bestOffset + 8 * shift));\n                        }\n                        lastCorrelation = correl;\n                    }\n                    if (bestCorrel > 0.01) {\n                        postMessage(sampleRate / bestOffset);\n                    } else {\n                        postMessage(-1);\n                    }\n                }\n            };"]),n=URL.createObjectURL(e);this._pitchWorker=new Worker(n);var r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o={hertz:0,note:"",noteIndex:0,detuneCents:0,detune:""};this._pitchWorker.onmessage=function(e){if(t._pitchCallback){var n=e.data;if(-1!==n){var a=function(t){var e=Math.log(t/440)*Math.LOG2E*12;return Math.round(e)+69}(n),s=i(n,a);o.hertz=n,o.noteIndex=a%12,o.note=r[a%12],o.detuneCents=s,o.detune=0===s?"":s<0?"flat":"sharp"}t._pitchCallback(o)}}},(0,a.default)(e,[{key:"frequencyBinCount",get:function(){return this._node.frequencyBinCount}},{key:"maxDecibels",get:function(){return this._node.maxDecibels},set:function(t){(0,c.default)(t)&&(this._node.maxDecibels=t)}},{key:"minDecibels",get:function(){return this._node.minDecibels},set:function(t){(0,c.default)(t)&&(this._node.minDecibels=t)}},{key:"smoothing",get:function(){return this._node.smoothingTimeConstant},set:function(t){(0,c.default)(t)&&(this._node.smoothingTimeConstant=t)}}]),e}(l.default);n.default=f.default.register("analyser",function(t){return new h(t)})},{"../core/sono":219,"../core/utils/isSafeNumber":233,"./abstract-direct-effect":240,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],243:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/sono")),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attack,o=void 0===r?.003:r,s=n.knee,u=void 0===s?30:s,c=n.ratio,f=void 0===c?12:c,h=n.release,p=void 0===h?.25:h,d=n.threshold,m=void 0===d?-24:d,y=n.wet,_=void 0===y?1:y,v=n.dry,g=void 0===v?1:v;(0,i.default)(this,e);var b=(0,a.default)(this,t.call(this,l.default.context.createDynamicsCompressor()));return b.wet=_,b.dry=g,b.update({threshold:m,knee:u,ratio:f,attack:o,release:p}),b}return(0,s.default)(e,t),e.prototype.update=function(t){this.setSafeParamValue(this._node.threshold,t.threshold),this.setSafeParamValue(this._node.knee,t.knee),this.setSafeParamValue(this._node.ratio,t.ratio),this.setSafeParamValue(this._node.attack,t.attack),this.setSafeParamValue(this._node.release,t.release)},(0,o.default)(e,[{key:"threshold",get:function(){return this._node.threshold.value},set:function(t){this.setSafeParamValue(this._node.threshold,t)}},{key:"knee",get:function(){return this._node.knee.value},set:function(t){this.setSafeParamValue(this._node.knee,t)}},{key:"ratio",get:function(){return this._node.ratio.value},set:function(t){this.setSafeParamValue(this._node.ratio,t)}},{key:"attack",get:function(){return this._node.attack.value},set:function(t){this.setSafeParamValue(this._node.attack,t)}},{key:"release",get:function(){return this._node.release.value},set:function(t){this.setSafeParamValue(this._node.release,t)}}]),e}(u.default);n.default=l.default.register("compressor",function(t){return new c(t)})},{"../core/sono":219,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],244:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/sono")),c=r(t("../core/utils/file")),f=r(t("../core/utils/loader")),h=r(t("../core/sound")),p=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.impulse,o=n.wet,s=void 0===o?1:o,u=n.dry,c=void 0===u?1:u;(0,i.default)(this,e);var f=(0,a.default)(this,t.call(this,l.default.context.createConvolver(),null,!1));return f._loader=null,f.wet=s,f.dry=c,f.update({impulse:r}),f}return(0,s.default)(e,t),e.prototype._load=function(t){var e=this;l.default.context.isFake||(this._loader&&this._loader.destroy(),this._loader=new f.default(t),this._loader.audioContext=l.default.context,this._loader.once("complete",function(t){return e.update({impulse:t})}),this._loader.once("error",function(t){}),this._loader.start())},e.prototype.update=function(t){var e=this,n=t.impulse;return n?c.default.isAudioBuffer(n)?(this._node.buffer=n,this.enable(!0),this):n instanceof h.default?(n.data?this.update({impulse:n.data}):n.once("ready",function(t){return e.update({impulse:t.data})}),this):c.default.isArrayBuffer(n)?(this._load(n),this):(c.default.isURL(c.default.getSupportedFile(n))&&this._load(c.default.getSupportedFile(n)),this):this},(0,o.default)(e,[{key:"impulse",get:function(){return this._node.buffer},set:function(t){this.update({impulse:t})}}]),e}(u.default);n.default=l.default.register("convolver",function(t){return new p(t)})},{"../core/sono":219,"../core/sound":220,"../core/utils/file":229,"../core/utils/loader":234,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],245:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/utils/isSafeNumber")),c=r(t("../core/sono")),f=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.level,o=void 0===r?1:r,s=n.samples,u=void 0===s?22050:s,l=n.oversample,f=void 0===l?"none":l,h=n.wet,p=void 0===h?1:h,d=n.dry,m=void 0===d?0:d;(0,i.default)(this,e);var y=(0,a.default)(this,t.call(this,c.default.context.createWaveShaper(),null,!1));return y._node.oversample=f||"none",y._samples=u||22050,y._curve=new Float32Array(y._samples),y._level,y._enabled=!1,y.wet=p,y.dry=m,y.update({level:o}),y}return(0,s.default)(e,t),e.prototype.update=function(t){var e=t.level;if(e!==this._level&&(0,l.default)(e)&&(this.enable(e>0),this._enabled)){for(var n=100*e,r=Math.PI/180,i=2/this._samples,o=void 0,a=0;a<this._samples;++a)o=a*i-1,this._curve[a]=(3+n)*o*20*r/(Math.PI+n*Math.abs(o));this._level=e,this._node.curve=this._curve}},(0,o.default)(e,[{key:"level",get:function(){return this._level},set:function(t){this.update({level:t})}}]),e}(u.default);n.default=c.default.register("distortion",function(t){return new f(t)})},{"../core/sono":219,"../core/utils/isSafeNumber":233,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],246:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/sono")),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.delay,o=void 0===r?.5:r,s=n.feedback,u=void 0===s?.5:s,c=n.wet,f=void 0===c?1:c,h=n.dry,p=void 0===h?1:h;(0,i.default)(this,e);var d=(0,a.default)(this,t.call(this,l.default.context.createDelay(),l.default.context.createGain()));return d._delay=d._node,d._feedback=d._nodeOut,d._delay.connect(d._feedback),d._feedback.connect(d._delay),d.wet=f,d.dry=p,d.update({delay:o,feedback:u}),d}return(0,s.default)(e,t),e.prototype.enable=function(e){t.prototype.enable.call(this,e),this._feedback&&e&&this._feedback.connect(this._delay)},e.prototype.update=function(t){this.delay=t.delay,this.feedback=t.feedback},(0,o.default)(e,[{key:"delay",get:function(){return this._delay.delayTime.value},set:function(t){this.setSafeParamValue(this._delay.delayTime,t)}},{key:"feedback",get:function(){return this._feedback.gain.value},set:function(t){this.setSafeParamValue(this._feedback.gain,t)}}]),e}(u.default);n.default=l.default.register("echo",function(t){return new c(t)})},{"../core/sono":219,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],247:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){for(var t=null,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++)if((0,f.default)(n[i])){t=n[i];break}return t}n.__esModule=!0,n.allpass=n.notch=n.peaking=n.highshelf=n.lowshelf=n.bandpass=n.highpass=n.lowpass=void 0;var o=r(t("babel-runtime/helpers/classCallCheck")),a=r(t("babel-runtime/helpers/createClass")),s=r(t("babel-runtime/helpers/possibleConstructorReturn")),u=r(t("babel-runtime/helpers/inherits")),l=r(t("./abstract-effect")),c=r(t("../core/sono")),f=r(t("../core/utils/isSafeNumber")),h=40,p=c.default.context.sampleRate/2,d=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.type,i=void 0===r?"lowpass":r,a=n.frequency,u=void 0===a?1e3:a,l=n.detune,f=void 0===l?0:l,h=n.q,p=void 0===h?0:h,d=n.gain,m=void 0===d?1:d,y=n.peak,_=void 0===y?0:y,v=n.boost,g=void 0===v?0:v,b=n.width,w=void 0===b?100:b,x=n.sharpness,S=void 0===x?0:x,T=n.wet,E=void 0===T?1:T,A=n.dry,k=void 0===A?0:A;(0,o.default)(this,e);var O=(0,s.default)(this,t.call(this,c.default.context.createBiquadFilter()));return O._node.type=i,O.wet=E,O.dry=k,O.update({frequency:u,gain:m,detune:f,q:p,peak:_,boost:g,width:w,sharpness:S}),O}return(0,u.default)(e,t),e.prototype.update=function(t){this.setSafeParamValue(this._node.frequency,t.frequency),this.setSafeParamValue(this._node.gain,i(t.boost,t.gain)),this.setSafeParamValue(this._node.detune,t.detune);var e=i(t.peak,t.width,t.sharpness,t.q);this.setSafeParamValue(this._node.Q,e)},e.prototype.setByPercent=function(t){var e=t.percent,n=void 0===e?.5:e;this.update({frequency:function(t){var e=Math.log(p/h)/Math.LN2,n=Math.pow(2,e*(t-1));return p*n}(n)})},(0,a.default)(e,[{key:"type",get:function(){return this._node.type},set:function(t){this._node.type=t}},{key:"frequency",get:function(){return this._node.frequency.value},set:function(t){this.setSafeParamValue(this._node.frequency,t)}},{key:"q",get:function(){return this._node.Q.value},set:function(t){this.setSafeParamValue(this._node.Q,t)}},{key:"Q",get:function(){return this.q},set:function(t){this.q=t}},{key:"peak",get:function(){return this.q},set:function(t){this.q=t}},{key:"width",get:function(){return this._node.frequency.value/this._node.Q.value},set:function(t){this.q=t<=0?0:this._node.frequency.value/t}},{key:"sharpness",get:function(){return this.q},set:function(t){this.q=t}},{key:"boost",get:function(){return this._node.gain.value},set:function(t){this.setSafeParamValue(this._node.gain,t)}},{key:"gain",get:function(){return this.boost},set:function(t){this.boost=t}},{key:"detune",get:function(){return this._node.detune.value},set:function(t){this.setSafeParamValue(this._node.detune,t)}},{key:"maxFrequency",get:function(){return c.default.context.sampleRate/2}}]),e}(l.default),m=c.default.register("lowpass",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.peak,r=t.q;return new d({type:"lowpass",frequency:e,peak:n,q:r})}),y=c.default.register("highpass",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.peak,r=t.q;return new d({type:"highpass",frequency:e,peak:n,q:r})}),_=c.default.register("lowshelf",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.boost,r=t.gain;return new d({type:"lowshelf",frequency:e,boost:n,gain:r,q:0})}),v=c.default.register("highshelf",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.boost,r=t.gain;return new d({type:"highshelf",frequency:e,boost:n,gain:r,q:0})}),g=c.default.register("peaking",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.width,r=t.boost,i=t.gain,o=t.q;return new d({type:"peaking",frequency:e,width:n,boost:r,gain:i,q:o})}),b=c.default.register("bandpass",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.width,r=t.q;return new d({type:"bandpass",frequency:e,width:n,q:r})}),w=c.default.register("notch",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.width,r=t.gain,i=t.q;return new d({type:"notch",frequency:e,width:n,gain:r,q:i})}),x=c.default.register("allpass",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.frequency,n=t.sharpness,r=t.q;return new d({type:"allpass",frequency:e,sharpness:n,q:r})});n.default=c.default.register("filter",function(t){return new d(t)}),n.lowpass=m,n.highpass=y,n.bandpass=b,n.lowshelf=_,n.highshelf=v,n.peaking=g,n.notch=w,n.allpass=x},{"../core/sono":219,"../core/utils/isSafeNumber":233,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],248:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/sono")),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.delay,o=void 0===r?.005:r,s=n.feedback,u=void 0===s?.5:s,c=n.frequency,f=void 0===c?.002:c,h=n.gain,p=void 0===h?.25:h,d=n.wet,m=void 0===d?1:d,y=n.dry,_=void 0===y?1:y;(0,i.default)(this,e);var v=(0,a.default)(this,t.call(this,l.default.context.createDelay()));return v._delay=v._node,v._feedback=l.default.context.createGain(),v._lfo=l.default.context.createOscillator(),v._gain=l.default.context.createGain(),v._lfo.type="sine",v._delay.connect(v._feedback),v._feedback.connect(v._in),v._lfo.connect(v._gain),v._gain.connect(v._delay.delayTime),v._lfo.start(0),v.wet=m,v.dry=_,v.update({delay:o,feedback:u,frequency:f,gain:p}),v}return(0,s.default)(e,t),e.prototype.update=function(t){this.delay=t.delay,this.frequency=t.frequency,this.gain=t.gain,this.feedback=t.feedback},(0,o.default)(e,[{key:"delay",get:function(){return this._delay.delayTime.value},set:function(t){this.setSafeParamValue(this._delay.delayTime,t)}},{key:"frequency",get:function(){return this._lfo.frequency.value},set:function(t){this.setSafeParamValue(this._lfo.frequency,t)}},{key:"gain",get:function(){return this._gain.gain.value},set:function(t){this.setSafeParamValue(this._gain.gain,t)}},{key:"feedback",get:function(){return this._feedback.gain.value},set:function(t){this.setSafeParamValue(this._feedback.gain,t)}}]),e}(u.default);l.default.register("monoFlanger",function(t){return new c(t)});var f=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.delay,o=void 0===r?.003:r,s=n.feedback,u=void 0===s?.5:s,c=n.frequency,f=void 0===c?.5:c,h=n.gain,p=void 0===h?.005:h,d=n.wet,m=void 0===d?1:d,y=n.dry,_=void 0===y?1:y;(0,i.default)(this,e);var v=(0,a.default)(this,t.call(this,l.default.context.createChannelSplitter(2),l.default.context.createChannelMerger(2)));return v._splitter=v._node,v._merger=v._nodeOut,v._feedbackL=l.default.context.createGain(),v._feedbackR=l.default.context.createGain(),v._lfo=l.default.context.createOscillator(),v._lfoGainL=l.default.context.createGain(),v._lfoGainR=l.default.context.createGain(),v._delayL=l.default.context.createDelay(),v._delayR=l.default.context.createDelay(),v._lfo.type="sine",v._splitter.connect(v._delayL,0),v._splitter.connect(v._delayR,1),v._delayL.connect(v._feedbackL),v._delayR.connect(v._feedbackR),v._feedbackL.connect(v._delayR),v._feedbackR.connect(v._delayL),v._delayL.connect(v._merger,0,0),v._delayR.connect(v._merger,0,1),v._lfo.connect(v._lfoGainL),v._lfo.connect(v._lfoGainR),v._lfoGainL.connect(v._delayL.delayTime),v._lfoGainR.connect(v._delayR.delayTime),v._lfo.start(0),v.wet=m,v.dry=_,v.update({delay:o,feedback:u,frequency:f,gain:p}),v}return(0,s.default)(e,t),e.prototype.update=function(t){this.delay=t.delay,this.frequency=t.frequency,this.gain=t.gain,this.feedback=t.feedback},(0,o.default)(e,[{key:"delay",get:function(){return this._delayL.delayTime.value},set:function(t){this.setSafeParamValue(this._delayL.delayTime,t),this._delayR.delayTime.value=this._delayL.delayTime.value}},{key:"frequency",get:function(){return this._lfo.frequency.value},set:function(t){this.setSafeParamValue(this._lfo.frequency,t)}},{key:"gain",get:function(){return this._lfoGainL.gain.value},set:function(t){this.setSafeParamValue(this._lfoGainL.gain,t),this._lfoGainR.gain.value=0-this._lfoGainL.gain.value}},{key:"feedback",get:function(){return this._feedbackL.gain.value},set:function(t){this.setSafeParamValue(this._feedbackL.gain,t),this._feedbackR.gain.value=this._feedbackL.gain.value}}]),e}(u.default);l.default.register("stereoFlanger",function(t){return new f(t)}),n.default=l.default.register("flanger",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.stereo?new f(t):new c(t)})},{"../core/sono":219,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],249:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.reverb=n.phaser=n.panner=n.flanger=n.filter=n.echo=n.distortion=n.convolver=n.compressor=n.analyser=void 0;var i=r(t("./analyser")),o=r(t("./compressor")),a=r(t("./convolver")),s=r(t("./distortion")),u=r(t("./echo")),l=r(t("./filter")),c=r(t("./flanger")),f=r(t("./panner")),h=r(t("./phaser")),p=r(t("./reverb"));n.analyser=i.default,n.compressor=o.default,n.convolver=a.default,n.distortion=s.default,n.echo=u.default,n.filter=l.default,n.flanger=c.default,n.panner=f.default,n.phaser=h.default,n.reverb=p.default,n.default={analyser:i.default,compressor:o.default,convolver:a.default,distortion:s.default,echo:u.default,filter:l.default,flanger:c.default,panner:f.default,phaser:h.default,reverb:p.default}},{"./analyser":242,"./compressor":243,"./convolver":244,"./distortion":245,"./echo":246,"./filter":247,"./flanger":248,"./panner":250,"./phaser":251,"./reverb":252}],250:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,m.default)(t)?t:e}function o(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;t.x=r*s-i*a,t.y=i*o-n*s,t.z=n*a-r*o}function a(t){if(0===t.x&&0===t.y&&0===t.z)return t;var e=1/Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return t.x*=e,t.y*=e,t.z*=e,t}function s(t,e){var n=v.get(e.x,e.y,e.z);o(n,g),o(n,e),a(n),a(e),t.setOrientation(e.x,e.y,e.z,n.x,n.y,n.z),v.dispose(e),v.dispose(n)}function u(t,e){t.setPosition(e.x,e.y,e.z),v.dispose(e)}n.__esModule=!0;var l=r(t("babel-runtime/helpers/classCallCheck")),c=r(t("babel-runtime/helpers/createClass")),f=r(t("babel-runtime/helpers/possibleConstructorReturn")),h=r(t("babel-runtime/helpers/inherits")),p=r(t("./abstract-direct-effect")),d=r(t("../core/sono")),m=r(t("../core/utils/isSafeNumber")),y=r(t("../core/utils/isDefined")),_={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},v={pool:[],get:function(t,e,n){var r=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return void 0!==t&&isNaN(t)&&"x"in t&&"y"in t&&"z"in t?(r.x=i(t.x),r.y=i(t.y),r.z=i(t.z)):(r.x=i(t),r.y=i(e),r.z=i(n)),r},dispose:function(t){this.pool.push(t)}},g=v.get(0,1,0),b=Math.PI/4,w=Math.PI/2,x=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.panningModel,i=n.distanceModel,o=n.refDistance,a=n.maxDistance,s=n.rolloffFactor,u=n.coneInnerAngle,c=n.coneOuterAngle,h=n.coneOuterGain;(0,l.default)(this,e);var p=(0,f.default)(this,t.call(this,d.default.context.createPanner()));return p._node.panningModel=r||_.panningModel,p._node.distanceModel=i||_.distanceModel,p._node.refDistance=(0,y.default)(o)?o:_.refDistance,p._node.maxDistance=(0,y.default)(a)?a:_.maxDistance,p._node.rolloffFactor=(0,y.default)(s)?s:_.rolloffFactor,p._node.coneInnerAngle=(0,y.default)(u)?u:_.coneInnerAngle,p._node.coneOuterAngle=(0,y.default)(c)?c:_.coneOuterAngle,p._node.coneOuterGain=(0,y.default)(h)?h:_.coneOuterGain,p._node.setPosition(0,0,0),p._node.setOrientation(1,0,0),p.set(0),p}return(0,h.default)(e,t),e.prototype.update=function(t){var e=t.x,n=t.y,r=t.z,i=v.get(e,n,r);!(0,m.default)(e)||(0,m.default)(n)||(0,m.default)(r)||((e=i.x)>1&&(e=1),e<-1&&(e=-1),(r=(e*=b)+w)>w&&(r=Math.PI-r),i.x=Math.sin(e),i.y=0,i.z=Math.sin(r)),u(this._node,i)},e.prototype.setPosition=function(t,e,n){u(this._node,v.get(t,e,n))},e.prototype.setOrientation=function(t,e,n){s(this._node,v.get(t,e,n))},e.prototype.setListenerPosition=function(t,e,n){u(d.default.context.listener,v.get(t,e,n))},e.prototype.setListenerOrientation=function(t,e,n){s(d.default.context.listener,v.get(t,e,n))},e.prototype.set=function(t,e,n){return this.update({x:t,y:e,z:n})},(0,c.default)(e,[{key:"defaults",get:function(){return _},set:function(t){Object.assign(_,t)}}]),e}(p.default),S=d.default.register("panner",function(t){return new x(t)});Object.defineProperties(S,{defaults:{get:function(){return _},set:function(t){return Object.assign(_,t)}},setListenerPosition:{value:function(t,e,n){return u(d.default.context.listener,v.get(t,e,n))}},setListenerOrientation:{value:function(t,e,n){return s(d.default.context.listener,v.get(t,e,n))}}}),n.default=S},{"../core/sono":219,"../core/utils/isDefined":232,"../core/utils/isSafeNumber":233,"./abstract-direct-effect":240,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],251:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/sono")),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.stages,o=void 0===r?8:r,s=n.feedback,u=void 0===s?.5:s,c=n.frequency,f=void 0===c?.5:c,h=n.gain,p=void 0===h?300:h,d=n.wet,m=void 0===d?.8:d,y=n.dry,_=void 0===y?.8:y;(0,i.default)(this,e),o=o||8;for(var v=[],g=0;g<o;g++)v.push(l.default.context.createBiquadFilter());var b=v[0],w=v[v.length-1],x=(0,a.default)(this,t.call(this,b,w));x._stages=o,x._feedback=l.default.context.createGain(),x._lfo=l.default.context.createOscillator(),x._lfoGain=l.default.context.createGain(),x._lfo.type="sine";for(var S=0;S<v.length;S++){var T=v[S];T.type="allpass",T.frequency.value=1e3*S,x._lfoGain.connect(T.frequency),S>0&&v[S-1].connect(T)}return x._lfo.connect(x._lfoGain),x._lfo.start(0),x._nodeOut.connect(x._feedback),x._feedback.connect(x._node),x.wet=m,x.dry=_,x.update({frequency:f,gain:p,feedback:u}),x}return(0,s.default)(e,t),e.prototype.enable=function(e){t.prototype.enable.call(this,e),this._feedback&&this._feedback.disconnect(),e&&this._feedback&&(this._nodeOut.connect(this._feedback),this._feedback.connect(this._node))},e.prototype.update=function(t){this.frequency=t.frequency,this.gain=t.gain,this.feedback=t.feedback},(0,o.default)(e,[{key:"stages",get:function(){return this._stages}},{key:"frequency",get:function(){return this._lfo.frequency.value},set:function(t){this.setSafeParamValue(this._lfo.frequency,t)}},{key:"gain",get:function(){return this._lfoGain.gain.value},set:function(t){this.setSafeParamValue(this._lfoGain.gain,t)}},{key:"feedback",get:function(){return this._feedback.gain.value},set:function(t){this.setSafeParamValue(this._feedback.gain,t)}}]),e}(u.default);n.default=l.default.register("phaser",function(t){return new c(t)})},{"../core/sono":219,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],252:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(t("babel-runtime/helpers/classCallCheck")),o=r(t("babel-runtime/helpers/createClass")),a=r(t("babel-runtime/helpers/possibleConstructorReturn")),s=r(t("babel-runtime/helpers/inherits")),u=r(t("./abstract-effect")),l=r(t("../core/sono")),c=r(t("../core/utils/isSafeNumber")),f=r(t("../core/utils/isDefined")),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.time,o=void 0===r?1:r,s=n.decay,u=void 0===s?5:s,c=n.reverse,f=void 0!==c&&c,h=n.wet,p=void 0===h?1:h,d=n.dry,m=void 0===d?1:d;(0,i.default)(this,e);var y=(0,a.default)(this,t.call(this,l.default.context.createConvolver()));return y._convolver=y._node,y._length=0,y._impulseResponse=null,y._opts={},y.wet=p,y.dry=m,y.update({time:o,decay:u,reverse:f}),y}return(0,s.default)(e,t),e.prototype.update=function(t){var e=t.time,n=t.decay,r=t.reverse,i=!1;e!==this._opts.time&&(0,c.default)(e)&&(this._opts.time=e,i=!0),n!==this._opts.decay&&(0,c.default)(n)&&(this._opts.decay=n,i=!0),(0,f.default)(r)&&r!==this._reverse&&(this._opts.reverse=r,i=!0),i&&(this._opts.buffer=e<=0?null:function(t){for(var e=t.time,n=t.decay,r=t.reverse,i=t.buffer,o=l.default.context.sampleRate,a=Math.floor(o*e),s=void 0,u=(s=i&&i.length===a?i:l.default.context.createBuffer(2,a,o)).getChannelData(0),c=s.getChannelData(1),f=void 0,h=void 0,p=0;p<a;p++)f=r?a-p:p,h=Math.pow(1-f/a,n),u[p]=(2*Math.random()-1)*h,c[p]=(2*Math.random()-1)*h;return s}(this._opts),this._convolver.buffer=this._opts.buffer)},(0,o.default)(e,[{key:"time",get:function(){return this._opts.time},set:function(t){this.update({time:t})}},{key:"decay",get:function(){return this._opts.decay},set:function(t){this.update({decay:t})}},{key:"reverse",get:function(){return this._opts.reverse},set:function(t){this.update({reverse:t})}}]),e}(u.default);n.default=l.default.register("reverb",function(t){return new h(t)})},{"../core/sono":219,"../core/utils/isDefined":232,"../core/utils/isSafeNumber":233,"./abstract-effect":241,"babel-runtime/helpers/classCallCheck":9,"babel-runtime/helpers/createClass":10,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/possibleConstructorReturn":13}],253:[function(t,e,n){"use strict";e.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},{}],254:[function(t,e,n){!function(t,n){"function"==typeof define&&define.amd?define(function(){return n()}):"object"==typeof e?e.exports=n():t.Tone=n()}(this,function(){"use strict";function t(t){t(e)}var e;return function(t){e=t()}(function(){var t=function(){};t.prototype.toString=function(){for(var e in t){var n=e[0].match(/^[A-Z]$/),r=t[e]===this.constructor;if(t.isFunction(t[e])&&n&&r)return e}return"Tone"},t.prototype.dispose=function(){return this},t.prototype.set=function(e,n,r){if(t.isObject(e))r=n;else if(t.isString(e)){var i={};i[e]=n,e=i}t:for(var o in e){n=e[o];var a=this;if(-1!==o.indexOf(".")){for(var s=o.split("."),u=0;u<s.length-1;u++)if((a=a[s[u]])instanceof t){s.splice(0,u+1);var l=s.join(".");a.set(l,n);continue t}o=s[s.length-1]}var c=a[o];t.isUndef(c)||(t.Signal&&c instanceof t.Signal||t.Param&&c instanceof t.Param?c.value!==n&&(t.isUndef(r)?c.value=n:c.rampTo(n,r)):c instanceof AudioParam?c.value!==n&&(c.value=n):c instanceof t?c.set(n):c!==n&&(a[o]=n))}return this},t.prototype.get=function(e){t.isUndef(e)?e=this._collectDefaults(this.constructor):t.isString(e)&&(e=[e]);for(var n={},r=0;r<e.length;r++){var i=e[r],o=this,a=n;if(-1!==i.indexOf(".")){for(var s=i.split("."),u=0;u<s.length-1;u++){var l=s[u];a[l]=a[l]||{},a=a[l],o=o[l]}i=s[s.length-1]}var c=o[i];t.isObject(e[i])?a[i]=c.get():t.Signal&&c instanceof t.Signal?a[i]=c.value:t.Param&&c instanceof t.Param?a[i]=c.value:c instanceof AudioParam?a[i]=c.value:c instanceof t?a[i]=c.get():t.isFunction(c)||t.isUndef(c)||(a[i]=c)}return n},t.prototype._collectDefaults=function(e){var n=[];if(t.isUndef(e.defaults)||(n=Object.keys(e.defaults)),!t.isUndef(e._super))for(var r=this._collectDefaults(e._super),i=0;i<r.length;i++)-1===n.indexOf(r[i])&&n.push(r[i]);return n},t.defaults=function(e,n,r){var i={};if(1===e.length&&t.isObject(e[0]))i=e[0];else for(var o=0;o<n.length;o++)i[n[o]]=e[o];return t.isUndef(r.defaults)?t.isObject(r)?t.defaultArg(i,r):i:t.defaultArg(i,r.defaults)},t.defaultArg=function(e,n){if(t.isObject(e)&&t.isObject(n)){var r={};for(var i in e)r[i]=t.defaultArg(n[i],e[i]);for(var o in n)r[o]=t.defaultArg(e[o],n[o]);return r}return t.isUndef(e)?n:e},t.connectSeries=function(){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];e.connect(r),e=r}return t},t.isUndef=function(t){return void 0===t},t.isFunction=function(t){return"function"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},t.isBoolean=function(t){return"boolean"==typeof t},t.isArray=function(t){return Array.isArray(t)},t.isString=function(t){return"string"==typeof t},t.isNote=function(e){return t.isString(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)},t.noOp=function(){},t.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},t.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},t.State={Started:"started",Stopped:"stopped",Paused:"paused"},t.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},t.dbToGain=function(t){return Math.pow(2,t/6)},t.gainToDb=function(t){return Math.log(t)/Math.LN10*20},t.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},t.prototype.now=function(){return t.context.now()},t.now=function(){return t.context.now()},t.isPast=function(e){t.context.currentTime},t.extend=function(e,n){function r(){}t.isUndef(n)&&(n=t),r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e,e._super=n};var e=null;return Object.defineProperty(t,"context",{get:function(){return e},set:function(n){e=t.Context&&n instanceof t.Context?n:new t.Context(n),t.Context.emit("init",e)}}),Object.defineProperty(t.prototype,"context",{get:function(){return t.context}}),t.setContext=function(e){t.context=e},Object.defineProperty(t.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(t.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(t,"supported",{get:function(){var t=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),e=window.hasOwnProperty("Promise"),n=window.hasOwnProperty("Worker");return t&&e&&n}}),Object.defineProperty(t,"initialized",{get:function(){return null!==e}}),t.getContext=function(e){if(t.initialized)e(t.context);else{var n=function(){e(t.context),t.Context.off("init",n)};t.Context.on("init",n)}return t},t.version="r11",window.TONE_SILENCE_VERSION_LOGGING,t}),t(function(t){return t.Emitter=function(){t.call(this),this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var n=t.split(/\W+/),r=0;r<n.length;r++){var i=n[r];this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(e)}return this},t.Emitter.prototype.off=function(e,n){for(var r=e.split(/\W+/),i=0;i<r.length;i++)if(e=r[i],this._events.hasOwnProperty(e))if(t.isUndef(n))this._events[e]=[];else for(var o=this._events[e],a=0;a<o.length;a++)o[a]===n&&o.splice(a,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var n=this._events[t],r=0,i=n.length;r<i;r++)n[r].apply(this,e)}return this},t.Emitter.mixin=function(e){var n=["on","off","emit"];e._events={};for(var r=0;r<n.length;r++){var i=n[r],o=t.Emitter.prototype[i];e[i]=o}return t.Emitter},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),t(function(t){return t.Timeline=function(){var e=t.defaults(arguments,["memory"],t.Timeline);t.call(this),this._timeline=[],this._toRemove=[],this._toAdd=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(e){if(t.isUndef(e.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._iterating)this._toAdd.push(e);else{var n=this._search(e.time);if(this._timeline.splice(n+1,0,e),this.length>this.memory){var r=this.length-this.memory;this._timeline.splice(0,r)}}return this},t.Timeline.prototype.remove=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.get=function(e,n){n=t.defaultArg(n,"time");var r=this._search(e,n);return-1!==r?this._timeline[r]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(e,n){n=t.defaultArg(n,"time");var r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null},t.Timeline.prototype.getBefore=function(e,n){n=t.defaultArg(n,"time");var r=this._timeline.length;if(r>0&&this._timeline[r-1][n]<e)return this._timeline[r-1];var i=this._search(e,n);return i-1>=0?this._timeline[i-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},t.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},t.Timeline.prototype._search=function(e,n){if(0===this._timeline.length)return-1;n=t.defaultArg(n,"time");var r=0,i=this._timeline.length,o=i;if(i>0&&this._timeline[i-1][n]<=e)return i-1;for(;r<o;){var a=Math.floor(r+(o-r)/2),s=this._timeline[a],u=this._timeline[a+1];if(s[n]===e){for(var l=a;l<this._timeline.length;l++){this._timeline[l][n]===e&&(a=l)}return a}if(s[n]<e&&u[n]>e)return a;s[n]>e?o=a:r=a+1}return-1},t.Timeline.prototype._iterate=function(e,n,r){this._iterating=!0,n=t.defaultArg(n,0),r=t.defaultArg(r,this._timeline.length-1);for(var i=n;i<=r;i++)e.call(this,this._timeline[i]);this._iterating=!1,this._toRemove.forEach(function(t){this.remove(t)}.bind(this)),this._toRemove=[],this._toAdd.forEach(function(t){this.add(t)}.bind(this)),this._toAdd=[]},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},t.Timeline.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e.call(this,n)},0,n),this},t.Timeline.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null,this._toAdd=null,this},t.Timeline}),t(function(t){!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),t.Context=function(){t.Emitter.call(this);var n=t.defaults(arguments,["context"],t.Context);n.context||(n.context=new window.AudioContext),this._context=n.context;for(var r in this._context)this._defineProperty(this._context,r);this._latencyHint=n.latencyHint,this._constants={},this.lookAhead=n.lookAhead,this._computedUpdateInterval=0,this._ticker=new e(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval),this._timeouts=new t.Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this))},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},t.Context.prototype._defineProperty=function(e,n){t.isUndef(this[n])&&Object.defineProperty(this,n,{get:function(){return"function"==typeof e[n]?e[n].bind(e):e[n]},set:function(t){e[n]=t}})},t.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),r=0;r<n.length;r++)n[r]=t;var i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants[t]=i,i},t.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},t.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,time:n+e,id:this._timeoutIds}),this._timeoutIds},t.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(t.Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(t.Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(t.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(e){var n=e;if(this._latencyHint=e,t.isString(e))switch(e){case"interactive":n=.1,this._context.latencyHint=e;break;case"playback":n=.8,this._context.latencyHint=e;break;case"balanced":n=.25,this._context.latencyHint=e;break;case"fastest":this._context.latencyHint="interactive",n=.01}this.lookAhead=n,this.updateInterval=n/3}}),t.Context.prototype.dispose=function(){t.Context.emit("close",this),t.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null;for(var e in this._constants)this._constants[e].disconnect();return this._constants=null,this.close(),this};var e=function(e,n,r){this._type=n,this._updateInterval=r,this._callback=t.defaultArg(e,t.noOp),this._createClock()};return e.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},e.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},e.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},e.prototype._createClock=function(){if(this._type===e.Type.Worker)try{this._createWorker()}catch(t){this._type=e.Type.Timeout,this._createClock()}else this._type===e.Type.Timeout&&this._createTimeout()},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===e.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),e.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},e.prototype.dispose=function(){this._disposeClock(),this._callback=null},t.getContext(function(){function e(e,n,i){if(e.input)i=t.defaultArg(i,0),t.isArray(e.input)?this.connect(e.input[i]):this.connect(e.input,n,i);else try{e instanceof AudioNode?r.call(this,e,n,i):r.call(this,e,n)}catch(t){throw new Error("error connecting to node: "+e+"\n"+t)}}function n(e,n,r){if(e&&e.input&&t.isArray(e.input))r=t.defaultArg(r,0),this.disconnect(e.input[r],n,0);else if(e&&e.input)this.disconnect(e.input,n,r);else try{i.apply(this,arguments)}catch(t){throw new Error("error disconnecting node: "+e+"\n"+t)}}var r=AudioNode.prototype.connect,i=AudioNode.prototype.disconnect;AudioNode.prototype.connect!==e&&(AudioNode.prototype.connect=e,AudioNode.prototype.disconnect=n)}),t.supported&&(t.context=new t.Context),t.Context}),t(function(t){return t.AudioNode=function(){t.call(this);var e=t.defaults(arguments,["context"],{context:t.context});this._context=e.context},t.extend(t.AudioNode),Object.defineProperty(t.AudioNode.prototype,"context",{get:function(){return this._context}}),t.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(t.AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?t.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?t.isArray(this.output)?this.output.length:1:0}}),t.AudioNode.prototype.connect=function(e,n,r){return t.isArray(this.output)?(n=t.defaultArg(n,0),this.output[n].connect(e,0,r)):this.output.connect(e,n,r),this},t.AudioNode.prototype.disconnect=function(e,n,r){t.isArray(this.output)?t.isNumber(e)?this.output[e].disconnect():(n=t.defaultArg(n,0),this.output[n].disconnect(e,0,r)):this.output.disconnect.apply(this.output,arguments)},t.AudioNode.prototype.chain=function(){for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},t.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},window.AudioNode&&(AudioNode.prototype.chain=t.AudioNode.prototype.chain,AudioNode.prototype.fan=t.AudioNode.prototype.fan),t.AudioNode.prototype.dispose=function(){return t.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),t.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this},t.AudioNode}),t(function(t){return t.SignalBase=function(){t.AudioNode.call(this)},t.extend(t.SignalBase,t.AudioNode),t.SignalBase.prototype.connect=function(e,n,r){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.AudioNode.prototype.connect.call(this,e,n,r),this},t.SignalBase}),t(function(t){return t.WaveShaper=function(e,n){t.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||t.isUndef(e)?this._curve=new Float32Array(t.defaultArg(e,1024)):t.isFunction(e)&&(this._curve=new Float32Array(t.defaultArg(n,1024)),this.setMap(e))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,n=this._curve.length;e<n;e++){var r=e/(n-1)*2-1;this._curve[e]=t(r,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),t(function(t){return t.TimeBase=function(e,n){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,n);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!t.isUndef(n)||t.isNumber(e)){n=t.defaultArg(n,this._defaultUnits);var r=this._primaryExpressions[n].method;this._expr=r.bind(this,e)}else t.isString(e)?this.set(e):t.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return 1===(t=parseInt(t))?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=0;return t&&"0"!==t&&(r+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(r+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){for(var e=-1,n=[];t.length>0;){var r=function(t,e){for(var n=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],r=0;r<n.length;r++){var i=e[n[r]];for(var o in i){var a=i[o],s=a.regexp,u=t.match(s);if(null!==u)return{method:a.method,precedence:a.precedence,regexp:a.regexp,value:u[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}(t=t.trim(),this);n.push(r),t=t.substr(r.value.length)}return{next:function(){return n[++e]},peek:function(){return n[e+1]}}},t.TimeBase.prototype._matchGroup=function(e,n,r){if(!t.isUndef(e))for(var i in n){var o=n[i];if(o.regexp.test(e.value)){if(t.isUndef(r))return o;if(o.precedence===r)return o}}return!1},t.TimeBase.prototype._parseBinary=function(e,n){t.isUndef(n)&&(n=2);var r;r=n<0?this._parseUnary(e):this._parseBinary(e,n-1);for(var i=e.peek();i&&this._matchGroup(i,this._binaryExpressions,n);)r=(i=e.next()).method.bind(this,r,this._parseBinary(e,n-1)),i=e.peek();return r},t.TimeBase.prototype._parseUnary=function(t){var e,n;e=t.peek();var r=this._matchGroup(e,this._unaryExpressions);return r?(e=t.next(),n=this._parseUnary(t),r.method.bind(this,n)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(e){var n,r;if(n=e.peek(),t.isUndef(n))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(n,this._primaryExpressions)){var i=(n=e.next()).value.match(n.regexp);return n.method.bind(this,i[1],i[2],i[3])}if(n&&"("===n.value){if(e.next(),r=this._parseBinary(e),!(n=e.next())||")"!==n.value)throw new SyntaxError("Expected )");return r}throw new SyntaxError("Tone.TimeBase: Cannot process token "+n.value)},t.TimeBase.prototype._parseExprString=function(e){t.isString(e)||(e=e.toString());var n=this._tokenize(e);return this._parseBinary(n)},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,n,r){return e instanceof t.TimeBase||(e=new this.constructor(e,r)),this._expr=this._binaryExpressions[n].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.valueOf=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}),t(function(t){return t.Time=function(e,n){if(!(this instanceof t.Time))return new t.Time(e,n);this._plusNow=!1,t.TimeBase.call(this,e,n)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(e,n){return n=t.defaultArg(n,1),this._expr=function(t,e,n){t=t(),e=e.toSeconds();return t+(Math.round(t/e)*e-t)*n}.bind(this,this._expr,new this.constructor(e),n),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=this._toNotationHelper(t,["1m","2n","4n","8n","16n","32n","64n","128n"]),n=this._toNotationHelper(t,["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"]);return n.split("+").length<e.split("+").length?n:e},t.Time.prototype._toNotationHelper=function(t,e){for(var n=this._notationToUnits(e[e.length-1]),r="",i=0;i<e.length;i++){var o=this._notationToUnits(e[i]),a=t/o;if(1-a%1<1e-6&&(a+=1e-6),(a=Math.floor(a))>0){if(r+=1===a?e[i]:a.toString()+"*"+e[i],(t-=a*o)<n)break;r+=" + "}}return""===r&&(r="0"),r},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,n=[e.n,e.t,e.m],r=0;r<n.length;r++){var i=n[r],o=t.match(i.regexp);if(o)return i.method.call(this,o[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,n=Math.floor(e/this._timeSignature()),r=e%1*4;e=Math.floor(e)%this._timeSignature(),(r=r.toString()).length>3&&(r=parseFloat(parseFloat(r).toFixed(3)));return[n,e,r].join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},t.Time}),t(function(t){t.Frequency=function(e,n){if(!(this instanceof t.Frequency))return new t.Frequency(e,n);t.TimeBase.call(this,e,n)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var r=e[t.toLowerCase()]+12*(parseInt(n)+1);return this.midiToFrequency(r)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}},t.Frequency.prototype.transpose=function(e){return this._expr=function(e,n){return e()*t.intervalToFrequencyRatio(n)}.bind(this,this._expr,e),this},t.Frequency.prototype.harmonize=function(e){return this._expr=function(e,n){for(var r=e(),i=[],o=0;o<n.length;o++)i[o]=r*t.intervalToFrequencyRatio(n[o]);return i}.bind(this,this._expr,e),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.valueOf(),r=Math.log(e/t.Frequency.A4)/Math.LN2,i=Math.round(12*r)+57,o=Math.floor(i/12);o<0&&(i+=-12*o);return n[i%12]+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},t.Frequency.prototype.toFrequency=function(){return this.valueOf()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+Math.round(12*Math.log(e/t.Frequency.A4)/Math.LN2)},t.Frequency}),t(function(t){return t.TransportTime=function(e,n){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,n);t.Time.call(this,e,n)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var n=this._secondsToTicks(e()),r=Math.ceil(t.Transport.ticks/n);return this._ticksToUnits(r*n)}},t.TransportTime.prototype._secondsToTicks=function(e){var n=e/this._beatsToUnits(1);return Math.round(n*t.Transport.PPQ)},t.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.valueOf()},t.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}),t(function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return t.isNumber(e)?e:t.isUndef(e)?this.now():t.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return t.isNumber(e)?e:t.isString(e)||t.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return t.isNumber(e)||t.isString(e)?new t.TransportTime(e).toTicks():t.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}),t(function(t){return t.Param=function(){var e=t.defaults(arguments,["param","units","convert"],t.Param);t.AudioNode.call(this),this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,t.isObject(e.lfo)?this.value=e.lfo:t.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param,t.AudioNode),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(t.isObject(e)){if(t.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var n=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=n}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return t.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return t.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(e,n){return n=this.toSeconds(n),t.isPast(n),this._param.setValueAtTime(this._fromUnits(e),n),this},t.Param.prototype.setRampPoint=function(e){e=t.defaultArg(e,this.now()),this.cancelAndHoldAtTime(this.context.currentTime);var n=this._param.value;return 0===n&&(n=this._minOutput),this._param.setValueAtTime(n,e),this},t.Param.prototype.linearRampToValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),t.isPast(n),this._param.linearRampToValueAtTime(e,n),this},t.Param.prototype.exponentialRampToValueAtTime=function(e,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=this.toSeconds(n),t.isPast(n),this._param.exponentialRampToValueAtTime(e,n),this},t.Param.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.getTimeConstant=function(t){return Math.log(this.toSeconds(t)+1)/Math.log(200)},t.Param.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.setTargetAtTime(t,n,this.getTimeConstant(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,n){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),n=Math.max(this._minOutput,n),this._param.setTargetAtTime(t,this.toSeconds(e),n),this},t.Param.prototype.setValueCurveAtTime=function(t,e,n){n=this.toSeconds(n),e=this.toSeconds(e),this.setValueAtTime(t[0],e);for(var r=n/(t.length-1),i=1;i<t.length;i++)this._param.linearRampToValueAtTime(this._fromUnits(t[i]),e+i*r);return this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.cancelAndHoldAtTime=function(t){if(t=this.toSeconds(t),this._param.cancelAndHoldAtTime)this._param.cancelAndHoldAtTime(t);else{var e=this.context.currentTime;this._param.cancelScheduledValues(e);var n=this._param.value;0===n&&(n=this._minOutput),this._param.setValueAtTime(n,e+this.sampleTime)}return this},t.Param.prototype.rampTo=function(e,n,r){return n=t.defaultArg(n,.1),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}),t(function(t){return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),t.Gain=function(){var e=t.defaults(arguments,["gain","units"],t.Gain);t.AudioNode.call(this),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain,t.AudioNode),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}),t(function(t){return t.Signal=function(){var e=t.defaults(arguments,["value","units"],t.Signal),n=t.context.createGain();e.param=n.gain,t.Param.call(this,e),this.output=n,this.input=this._param=this.output.gain,this.context.getConstant(1).connect(this.output)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this},t.Signal}),t(function(t){return t.TimelineSignal=function(){var e=t.defaults(arguments,["value","units"],t.Signal);t.Signal.call(this,e),this._events=new t.Timeline(100),this._initial=this._fromUnits(this._param.value),this.value=e.value,delete this.input},t.extend(t.TimelineSignal,t.Signal),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){if(this._events){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}}),t.TimelineSignal.prototype.setValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Set,value:e,time:n}),this._param.setValueAtTime(e,n),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Linear,value:e,time:n}),this._param.linearRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,n){n=this.toSeconds(n);var r=this._searchBefore(n);r&&0===r.value&&this.setValueAtTime(this._minOutput,r.time),e=this._fromUnits(e);var i=Math.max(e,this._minOutput);return this._events.add({type:t.TimelineSignal.Type.Exponential,value:i,time:n}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,n-this.sampleTime),this.setValueAtTime(0,n)):this._param.exponentialRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,n,r){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),r=Math.max(this._minOutput,r),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Target,value:e,time:n,constant:r}),this._param.setTargetAtTime(e,n,r),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,n,r,i){i=t.defaultArg(i,1),r=this.toSeconds(r),n=this.toSeconds(n);var o=r/(e.length-1);this.setValueAtTime(e[0]*i,n);for(var a=1;a<e.length;a++)this.linearRampToValueAtTime(e[a]*i,n+a*o);return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.cancelAndHoldAtTime=function(t){return this.setRampPoint(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var n=this._toUnits(this.getValueAtTime(e)),r=this._searchBefore(e);if(r&&r.time===e)this.cancelScheduledValues(e+this.sampleTime);else{var i=this._searchAfter(e);i&&(this.cancelScheduledValues(e),i.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(n,e):i.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(n,e))}return this.setValueAtTime(n,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.linearRampToValueAtTime(t,n),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,n),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.get(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var n=this._searchAfter(e),r=this._searchBefore(e),i=this._initial;if(null===r)i=this._initial;else if(r.type===t.TimelineSignal.Type.Target){var o,a=this._events.getBefore(r.time);o=null===a?this._initial:a.value,i=this._exponentialApproach(r.time,o,r.value,r.constant,e)}else i=null===n?r.value:n.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(r.time,r.value,n.time,n.value,e):n.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(r.time,r.value,n.time,n.value,e):r.value;return i},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,n,r,i){return n+(e-n)*Math.exp(-(i-t)/r)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,n,r,i){return e+(i-t)/(n-t)*(r-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,n,r,i){return(e=Math.max(this._minOutput,e))*Math.pow(r/e,(i-t)/(n-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),t(function(t){return t.Pow=function(e){t.SignalBase.call(this),this._exp=t.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),t(function(t){return t.Envelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.AudioNode.call(this),this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(0,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope,t.AudioNode),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){if(t.isString(this._attackCurve))return this._attackCurve;if(t.isArray(this._attackCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].In===this._attackCurve)return e;return this._attackCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var n=t.Envelope.Type[e];t.isObject(n)?this._attackCurve=n.In:this._attackCurve=n}else{if(!t.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._attackCurve=e}}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){if(t.isString(this._releaseCurve))return this._releaseCurve;if(t.isArray(this._releaseCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].Out===this._releaseCurve)return e;return this._releaseCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var n=t.Envelope.Type[e];t.isObject(n)?this._releaseCurve=n.Out:this._releaseCurve=n}else{if(!t.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._releaseCurve=e}}}),t.Envelope.prototype.triggerAttack=function(e,n){e=this.toSeconds(e);var r=this.toSeconds(this.attack),i=r,o=this.toSeconds(this.decay);n=t.defaultArg(n,1);var a=this.getValueAtTime(e);if(a>0){i=(1-a)/(1/i)}if("linear"===this._attackCurve)this._sig.linearRampTo(n,i,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(n,i,e);else if(i>0){this._sig.setRampPoint(e);var s=this._attackCurve;if(i<r){var u=1-i/r,l=Math.floor(u*this._attackCurve.length);(s=this._attackCurve.slice(l))[0]=a}this._sig.setValueCurveAtTime(s,e,i,n)}return this._sig.targetRampTo(n*this.sustain,o,i+e),this},t.Envelope.prototype.triggerRelease=function(e){e=this.toSeconds(e);var n=this.getValueAtTime(e);if(n>0){var r=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampTo(0,r,e);else if("exponential"===this._releaseCurve)this._sig.targetRampTo(0,r,e);else{var i=this._releaseCurve;t.isArray(i)&&(this._sig.setRampPoint(e),this._sig.setValueCurveAtTime(i,e,r,n))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,function(){function e(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}var n,r,i=[];for(n=0;n<128;n++)i[n]=Math.sin(n/127*(Math.PI/2));var o=[];for(n=0;n<127;n++){r=n/127;var a=Math.sin(r*(2*Math.PI)*6.4-Math.PI/2)+1;o[n]=a/10+.83*r}o[127]=1;var s=[];for(n=0;n<128;n++)s[n]=Math.ceil(n/127*5)/5;var u=[];for(n=0;n<128;n++)r=n/127,u[n]=.5*(1-Math.cos(Math.PI*r));var l=[];for(n=0;n<128;n++){r=n/127;var c=4*Math.pow(r,3)+.2,f=Math.cos(c*Math.PI*2*r);l[n]=Math.abs(f*(1-r))}t.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:e(l),Out:l},cosine:{In:i,Out:function(t){return t.slice(0).reverse()}(i)},step:{In:s,Out:e(s)},ripple:{In:o,Out:e(o)},sine:{In:u,Out:e(u)}}}(),t.Envelope.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}),t(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),t(function(t){return window.AnalyserNode&&!AnalyserNode.prototype.getFloatTimeDomainData&&(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var n=0;n<e.length;n++)t[n]=(e[n]-128)/128}),t.Analyser=function(){var e=t.defaults(arguments,["type","size"],t.Analyser);t.AudioNode.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._buffer=null,this.size=e.size,this.type=e.type},t.extend(t.Analyser,t.AudioNode),t.Analyser.defaults={size:1024,type:"fft",smoothing:.8},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.prototype.getValue=function(){return this._type===t.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),t.Analyser.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),t(function(t){return t.Compressor=function(){var e=t.defaults(arguments,["threshold","ratio"],t.Compressor);t.AudioNode.call(this),this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new t.Param({param:this._compressor.threshold,units:t.Type.Decibels,convert:!1}),this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=new t.Param({param:this._compressor.knee,units:t.Type.Decibels,convert:!1}),this.ratio=new t.Param({param:this._compressor.ratio,convert:!1}),this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor,t.AudioNode),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},t.Compressor}),t(function(t){return t.Add=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},t.Add}),t(function(t){return t.Multiply=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=t.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}),t(function(t){return t.Negate=function(){t.SignalBase.call(this),this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),t(function(t){return t.Subtract=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},t.Subtract}),t(function(t){return t.GreaterThanZero=function(){t.SignalBase.call(this),this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),t(function(t){return t.GreaterThan=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),t(function(t){return t.Abs=function(){t.SignalBase.call(this),this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}),t(function(t){return t.Modulo=function(e){t.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),t(function(t){return t.AudioToGain=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),t(function(t){function e(t,e,n){var r=new t;return n._eval(e[0]).connect(r,0,0),n._eval(e[1]).connect(r,0,1),r}function n(t,e,n){var r=new t;return n._eval(e[0]).connect(r,0,0),r}function r(t){return t?parseFloat(t):void 0}function i(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){t.SignalBase.call(this);var e=this._replacements(Array.prototype.slice.call(arguments)),n=this._parseInputs(e);this._nodes=[],this.input=new Array(n);for(var r=0;r<n;r++)this.input[r]=this.context.createGain();var i,o=this._parseTree(e);try{i=this._eval(o)}catch(t){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+e)}this.output=i},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){return new t.Signal(r(e))}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[r(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:n.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,n){var r=i(e[1]),o=new t.Modulo(r);return n._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,n){var r=i(e[1]),o=new t.Pow(r);return n._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,n){var r=new t.AudioToGain;return n._eval(e[0]).connect(r),r}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(r,i){return 1===r.length?n(t.Negate,r,i):e(t.Subtract,r,i)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:n.bind(this,t.Negate)},"!":{regexp:/^\!/,method:n.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),n=0;if(null!==e)for(var r=0;r<e.length;r++){var i=parseInt(e[r].substr(1))+1;n=Math.max(n,i)}return n},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),n=0;n<t.length;n++)e=e.replace(/\%/i,t[n]);return e},t.Expr.prototype._tokenize=function(e){for(var n=-1,r=[];e.length>0;){var i=function(e){for(var n in t.Expr._Expressions){var r=t.Expr._Expressions[n];for(var i in r){var o=r[i],a=o.regexp,s=e.match(a);if(null!==s)return{type:n,value:s[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}(e=e.trim());r.push(i),e=e.substr(i.value.length)}return{next:function(){return r[++n]},peek:function(){return r[n+1]}}},t.Expr.prototype._parseTree=function(e){function n(t,e){return!s(t)&&"glue"===t.type&&t.value===e}function r(e,n,r){var i=t.Expr._Expressions[n];if(!s(e))for(var o in i){var a=i[o];if(a.regexp.test(e.value)){if(s(r))return!0;if(a.precedence===r)return!0}}return!1}function i(t){s(t)&&(t=5);var e;e=t<0?o():i(t-1);for(var n=a.peek();r(n,"binary",t);)e={operator:(n=a.next()).value,method:n.method,args:[e,i(t-1)]},n=a.peek();return e}function o(){var t,e;return t=a.peek(),r(t,"unary")?(t=a.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):function(){var t,e;if(t=a.peek(),s(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return t=a.next(),function(t){var e,r=[];if(e=a.next(),!n(e,"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');e=a.peek(),n(e,")")||(r=function(){var t,e,r=[];for(;e=i(),!s(e)&&(r.push(e),t=a.peek(),n(t,","));)a.next();return r}());if(e=a.next(),!n(e,")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:r,name:name}}(t);if("value"===t.type)return t=a.next(),{method:t.method,args:t.value};if(n(t,"(")){if(a.next(),e=i(),t=a.next(),!n(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}()}var a=this._tokenize(e),s=t.isUndef.bind(this);return i()},t.Expr.prototype._eval=function(e){if(!t.isUndef(e)){var n=e.method(e.args,this);return this._nodes.push(n),n}},t.Expr.prototype._disposeNodes=function(){for(var e=0;e<this._nodes.length;e++){var n=this._nodes[e];t.isFunction(n.dispose)?n.dispose():t.isFunction(n.disconnect)&&n.disconnect(),n=null,this._nodes[e]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.SignalBase.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),t(function(t){return t.EqualPowerGain=function(){t.SignalBase.call(this),this._eqPower=this.input=this.output=new t.WaveShaper(function(e){return Math.abs(e)<.001?0:t.equalPowerScale(e)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),t(function(t){return t.CrossFade=function(e){t.AudioNode.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(t.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade,t.AudioNode),t.CrossFade.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}),t(function(t){return t.Filter=function(){var e=t.defaults(arguments,["frequency","type","rolloff"],t.Filter);t.AudioNode.call(this),this.createInsOuts(1,1),this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter,t.AudioNode),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){if(-1===["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t))throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(e){e=parseInt(e,10);var n=[-12,-24,-48,-96].indexOf(e);if(-1===n)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");n+=1,this._rolloff=e,this.input.disconnect();for(var r=0;r<this._filters.length;r++)this._filters[r].disconnect(),this._filters[r]=null;this._filters=new Array(n);for(var i=0;i<n;i++){var o=this.context.createBiquadFilter();o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}var a=[this.input].concat(this._filters).concat([this.output]);t.connectSeries.apply(t,a)}}),t.Filter.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),t(function(t){return t.MultibandSplit=function(){var e=t.defaults(arguments,["lowFrequency","highFrequency"],t.MultibandSplit);t.AudioNode.call(this),this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit,t.AudioNode),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),t(function(t){return t.EQ3=function(){var e=t.defaults(arguments,["low","mid","high"],t.EQ3);t.AudioNode.call(this),this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3,t.AudioNode),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),t(function(t){return t.Scale=function(e,n){t.SignalBase.call(this),this._outputMin=t.defaultArg(e,0),this._outputMax=t.defaultArg(n,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),t(function(t){return t.ScaleExp=function(e,n,r){t.SignalBase.call(this),this._scale=this.output=new t.Scale(e,n),this._exp=this.input=new t.Pow(t.defaultArg(r,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),t(function(t){return window.DelayNode&&!AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),t.Delay=function(){var e=t.defaults(arguments,["delayTime","maxDelay"],t.Delay);t.AudioNode.call(this),this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay,t.AudioNode),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),t(function(t){return t.FeedbackCombFilter=function(){var e=t.defaults(arguments,["delayTime","resonance"],t.FeedbackCombFilter);t.AudioNode.call(this),this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter,t.AudioNode),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}),t(function(t){return t.FFT=function(){var e=t.defaults(arguments,["size"],t.FFT);e.type=t.Analyser.Type.FFT,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.FFT,t.AudioNode),t.FFT.defaults={size:1024},t.FFT.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.FFT.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.FFT.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.FFT}),t(function(t){return t.Follower=function(){var e=t.defaults(arguments,["attack","release"],t.Follower);t.AudioNode.call(this),this.createInsOuts(1,1),this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower,t.AudioNode),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(e,n){var r=this.blockTime;e=t.Time(e).toFrequency(),n=t.Time(n).toFrequency(),e=Math.max(e,r),n=Math.max(n,r),this._frequencyValues.setMap(function(t){return t<=0?e:n})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),t(function(t){return t.ScaledEnvelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.Envelope.call(this,e),e=t.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),t(function(t){return t.FrequencyEnvelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.ScaledEnvelope.call(this,e),e=t.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),t(function(t){return t.Gate=function(){var e=t.defaults(arguments,["threshold","attack","release"],t.Gate);t.AudioNode.call(this),this.createInsOuts(1,1),this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(t.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate,t.AudioNode),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return t.gainToDb(this._gt.value)},set:function(e){this._gt.value=t.dbToGain(e)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),t(function(t){function e(t){return function(e,n){n=this.toSeconds(n),t.apply(this,arguments);var r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTickUntilEvent(i,n-this.sampleTime);return r.ticks=Math.max(o,0),this}}return t.TickSignal=function(e){e=t.defaultArg(e,1),t.TimelineSignal.call(this,{units:t.Type.Ticks,value:e}),this._events.memory=1/0},t.extend(t.TickSignal,t.TimelineSignal),t.TickSignal.prototype.setValueAtTime=e(t.TimelineSignal.prototype.setValueAtTime),t.TickSignal.prototype.linearRampToValueAtTime=e(t.TimelineSignal.prototype.linearRampToValueAtTime),t.TickSignal.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var r=this._events.get(e),i=0;i<=5;i++){var o=n*i+e,a=this._exponentialApproach(r.time,r.value,t,n,o);this.linearRampToValueAtTime(this._toUnits(a),o)}return this},t.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);var n=this._events.get(e);null===n&&(n={value:this._initial,time:0});for(var r=(e-n.time)/5,i=0;i<=5;i++){var o=r*i+n.time,a=this._exponentialInterpolate(n.time,n.value,e,t,o);this.linearRampToValueAtTime(this._toUnits(a),o)}return this},t.TickSignal.prototype._getTickUntilEvent=function(t,e){null===t&&(t={ticks:0,time:0});var n=this.getValueAtTime(t.time),r=this.getValueAtTime(e);return.5*(e-t.time)*(n+r)+t.ticks},t.TickSignal.prototype.getTickAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return this._getTickUntilEvent(e,t)},t.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var n=this.getTickAtTime(e);return this.getTimeOfTick(n+t)-e},t.TickSignal.prototype.getTimeOfTick=function(e){var n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type===t.TimelineSignal.Type.Linear&&n.value!==r.value){var i=this.getValueAtTime(n.time),o=(this.getValueAtTime(r.time)-i)/(r.time-n.time),a=Math.sqrt(Math.pow(i,2)-2*o*(n.ticks-e)),s=(-i+a)/o;return(s>0?s:(-i-a)/o)+n.time}return n?0===n.value?1/0:n.time+(e-n.ticks)/n.value:e/this._initial},t.TickSignal}),t(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},t.TimelineState}),t(function(t){return t.Clock=function(){var e=t.defaults(arguments,["callback","frequency"],t.Clock);t.Emitter.call(this),this.callback=e.callback,this._nextTick=0,this._lastState=t.State.Stopped,this.frequency=new t.TickSignal(e.frequency,t.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),this._state.get(e).offset=n),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){var e=this.now()+this.context.updateInterval,n=this._state.get(e);if(n){if(n.state!==this._lastState)switch(this._lastState=n.state,n.state){case t.State.Started:t.isUndef(n.offset)||(this.ticks=n.offset),this._nextTick=n.time,this.emit("start",n.time,this.ticks);break;case t.State.Stopped:this.ticks=0,this.emit("stop",n.time);break;case t.State.Paused:this.emit("pause",n.time)}for(;e>this._nextTick&&this._state;){var r=this._nextTick;if(this.frequency&&(this._nextTick+=this.frequency.getDurationOfTicks(1,this._nextTick),n.state===t.State.Started))try{this.callback(r),this.ticks++}catch(t){throw this.ticks++,t}}}},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}),t(function(t){t.IntervalTimeline=function(){t.call(this),this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(n){if(t.isUndef(n.time)||t.isUndef(n.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var r=new e(n.time,n.time+n.duration,n);for(null===this._root?this._root=r:this._root.insert(r),this._length++;null!==r;)r.updateHeight(),r.updateMax(),this._rebalance(r),r=r.parent;return this},t.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0;n<e.length;n++){var r=e[n];if(r.event===t){this._removeNode(r),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(n)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),r=t.right;t.right=r.left,r.left=t,null!==e?n?e.left=r:e.right=r:this._setRoot(r)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),r=t.left;t.left=r.right,r.right=t,null!==e?n?e.left=r:e.right=r:this._setRoot(r)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],r=1;r<e.length;r++)e[r].low>n.low&&(n=e[r]);return n.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var n=0;n<e.length;n++){var r=e[n].event;r&&t(r)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n);for(var r=n.length-1;r>=0;r--){var i=n[r].event;i&&e(i)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n);for(var r=n.length-1;r>=0;r--){e(n[r].event)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,n){this.event=n,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),t(function(t){return t.TransportEvent=function(e,n){n=t.defaultArg(n,t.TransportEvent.defaults),t.call(this),this.Transport=e,this.id=t.TransportEvent._eventId++,this.time=n.time,this.callback=n.callback,this._once=n.once},t.extend(t.TransportEvent),t.TransportEvent.defaults={once:!1,callback:t.noOp},t.TransportEvent._eventId=0,t.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},t.TransportEvent.prototype.dispose=function(){return t.prototype.dispose.call(this),this.Transport=null,this.callback=null,this},t.TransportEvent}),t(function(t){return t.TransportRepeatEvent=function(e,n){t.TransportEvent.call(this,e,n),n=t.defaultArg(n,t.TransportRepeatEvent.defaults),this.duration=n.duration,this._interval=n.interval,this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},t.extend(t.TransportRepeatEvent,t.TransportEvent),t.TransportRepeatEvent.defaults={duration:1/0,interval:1},t.TransportRepeatEvent.prototype.invoke=function(e){this._createEvents(),t.TransportEvent.prototype.invoke.call(this,e)},t.TransportRepeatEvent.prototype._createEvents=function(){var e=this.Transport.ticks;e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,"i")))},t.TransportRepeatEvent.prototype._restart=function(){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId);var e=this.Transport.ticks;this._nextTick=this.time,e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,"i")),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,"i"))},t.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,t.TransportEvent.prototype.dispose.call(this),this},t.TransportRepeatEvent}),t(function(t){t.Transport=function(){t.Emitter.call(this),t.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0}.bind(this))},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var n=this._clock.ticks;if(this._swingAmount>0&&n%this._ppq!=0&&n%(2*this._swingTicks)!=0){var r=n%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(r*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i")*i}this.loop&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.ticks=this._loopStart,n=this._loopStart,this.emit("loopStart",e,this.seconds),this.emit("loop",e)),this._timeline.forEachAtTime(n,function(t){t.invoke(e)})},t.Transport.prototype.schedule=function(e,n){var r=new t.TransportEvent(this,{time:this.toTicks(n),callback:e});return this._addEvent(r,this._timeline)},t.Transport.prototype.scheduleRepeat=function(e,n,r,i){var o=new t.TransportRepeatEvent(this,{callback:e,interval:this.toTicks(n),time:this.toTicks(r),duration:this.toTicks(t.defaultArg(i,1/0))});return this._addEvent(o,this._repeatedEvents)},t.Transport.prototype.scheduleOnce=function(e,n){var r=new t.TransportEvent(this,{time:this.toTicks(n),callback:e,once:!0});return this._addEvent(r,this._timeline)},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},t.Transport.prototype.cancel=function(e){return e=t.defaultArg(e,0),e=this.toTicks(e),this._timeline.cancel(e),this._repeatedEvents.cancel(e),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,n){n=t.Time(this._clock.ticks,"i").toSeconds(),this.emit("start",e,n)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,n){return t.isUndef(n)||(n=this.toTicks(n)),this._clock.start(e,n),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},t.Transport.prototype.toggle=function(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!==t.State.Started?this.start(e):this.stop(e),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(e){t.isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){return t.TransportTime(this.ticks,"i").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var n=this.now();this.state===t.State.Started?(this.emit("stop",n),this._clock.ticks=e,this.emit("start",n,this.seconds)):this._clock.ticks=e}}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){e=this.toSeconds(e);var n;if(this.state!==t.State.Started)return 0;n=this._clock._nextTick;var r=e-t.Time(this.ticks,"i")%e;return 0===r&&(r=e),n+r},t.Transport.prototype.syncSignal=function(e,n){n||(n=0!==e._param.value?e._param.value/this.bpm._param.value:0);var r=new t.Gain(n);return this.bpm.chain(r,e._param),this._syncedSignals.push({ratio:r,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal._param.value=n.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on("init",function(n){n.Transport instanceof e?t.Transport=n.Transport:t.Transport=new e,n.Transport=t.Transport}),t.Context.on("close",function(t){t.Transport instanceof e&&t.Transport.dispose()}),t.Transport}),t(function(t){return t.Volume=function(){var e=t.defaults(arguments,["volume"],t.Volume);t.AudioNode.call(this),this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume,t.AudioNode),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),t(function(t){t.Master=function(){t.AudioNode.call(this),t.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)}.bind(this))},t.extend(t.Master,t.AudioNode),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this},window.AudioNode&&(AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this});var e=t.Master;return t.Master=new e,t.Context.on("init",function(n){n.Master instanceof e?t.Master=n.Master:t.Master=new e,n.Master=t.Master}),t.Context.on("close",function(t){t.Master instanceof e&&t.Master.dispose()}),t.Master}),t(function(t){return t.Source=function(e){e=t.defaultArg(e,t.Source.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source,t.AudioNode),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,n,r){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this.retrigger||this._state.getValueAtTime(e)!==t.State.Started||this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced){var i=this._state.get(e);i.offset=t.defaultArg(n,0),i.duration=r;var o=t.Transport.schedule(function(t){this._start(t,n,r)}.bind(this),e);this._scheduled.push(o)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var n=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(e,n){if(n>0){var r=this._state.get(n);if(r&&r.state===t.State.Started&&r.time!==n){var i,o=n-this.toSeconds(r.time);r.duration&&(i=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,i)}}}.bind(this),this._syncedStop=function(e){this._state.getValueAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this),t.Transport.on("start loopStart",this._syncedStart),t.Transport.on("stop pause loopEnd",this._syncedStop),this},t.Source.prototype.unsync=function(){this._synced&&(t.Transport.off("stop pause loopEnd",this._syncedStop),t.Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var e=0;e<this._scheduled.length;e++){var n=this._scheduled[e];t.Transport.clear(n)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}),t(function(t){return window.OscillatorNode&&!OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn,OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff,OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable)),t.Oscillator=function(){var e=t.defaults(arguments,["frequency","type"],t.Oscillator);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=t.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(e){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),e=this.toSeconds(e),t.isPast(e),this._oscillator.start(e)},t.Oscillator.prototype._stop=function(e){return this._oscillator&&(e=this.toSeconds(e),t.isPast(e),this._oscillator.stop(e),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),n=this.context.createPeriodicWave(e[0],e[1]);this._wave=n,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,n){var r=2048,i=new Float32Array(r),o=new Float32Array(r),a=1;if(e===t.Oscillator.Type.Custom)r=a=this._partials.length+1;else{var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);s&&(a=parseInt(s[2])+1,e=s[1],r=a=Math.max(a,2))}for(var u=1;u<r;++u){var l,c=2/(u*Math.PI);switch(e){case t.Oscillator.Type.Sine:l=u<=a?1:0;break;case t.Oscillator.Type.Square:l=1&u?2*c:0;break;case t.Oscillator.Type.Sawtooth:l=c*(1&u?1:-1);break;case t.Oscillator.Type.Triangle:l=1&u?c*c*2*(u-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:l=this._partials[u-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+e)}0!==l?(i[u]=-l*Math.sin(n*u),o[u]=l*Math.cos(n*u)):(i[u]=0,o[u]=0)}return[i,o]},t.Oscillator.prototype._inverseFFT=function(t,e,n){for(var r=0,i=t.length,o=0;o<i;o++)r+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return r},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],n=t[1],r=0,i=2*Math.PI,o=0;o<8;o++)r=Math.max(this._inverseFFT(e,n,o/8*i),r);return-this._inverseFFT(e,n,this._phase)/r},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),t(function(t){return t.Zero=function(){t.SignalBase.call(this),this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero,t.SignalBase),t.Zero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}),t(function(t){return t.LFO=function(){var e=t.defaults(arguments,["frequency","min","max"],t.LFO);t.AudioNode.call(this),this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.AudioNode),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}}),Object.defineProperty(t.LFO.prototype,"mute",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),t(function(t){return t.Limiter=function(){var e=t.defaults(arguments,["threshold"],t.Limiter);t.AudioNode.call(this),this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter,t.AudioNode),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),t(function(t){return t.LowpassCombFilter=function(){var e=t.defaults(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter);t.AudioNode.call(this),this.createInsOuts(1,1),this._delay=this.input=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=-3.0102999566398125,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._lowpass,this._feedback,this._delay),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter,t.AudioNode),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.dispose(),this._delay=null,this.delayTime=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this},t.LowpassCombFilter}),t(function(t){return t.Merge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge,t.AudioNode),t.Merge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),t(function(t){return t.Meter=function(){var e=t.defaults(arguments,["smoothing"],t.Meter);t.AudioNode.call(this),this.input=this.output=this._analyser=new t.Analyser("waveform",1024),this.smoothing=e.smoothing},t.extend(t.Meter,t.AudioNode),t.Meter.defaults={smoothing:.8},t.Meter.prototype.getLevel=function(){this._analyser.type="fft";var t=this._analyser.getValue();return Math.max.apply(this,t)+28},t.Meter.prototype.getValue=function(){this._analyser.type="waveform";return this._analyser.getValue()[0]},Object.defineProperty(t.Meter.prototype,"smoothing",{get:function(){return this._analyser.smoothing},set:function(t){this._analyser.smoothing=t}}),t.Meter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}),t(function(t){return t.Split=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this._splitter.channelCount=2,this._splitter.channelCountMode="explicit",this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split,t.AudioNode),t.Split.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}),t(function(t){return t.MidSideSplit=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),this.context.getConstant(Math.SQRT1_2).connect(this.mid,0,2),this.context.getConstant(Math.SQRT1_2).connect(this.side,0,2)},t.extend(t.MidSideSplit,t.AudioNode),t.MidSideSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),t(function(t){return t.MidSideMerge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=new t.Gain,this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),this.context.getConstant(Math.SQRT1_2).connect(this._left,0,2),this.context.getConstant(Math.SQRT1_2).connect(this._right,0,2)},t.extend(t.MidSideMerge,t.AudioNode),t.MidSideMerge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),t(function(t){return t.MidSideCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor,t.AudioNode),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),t(function(t){return t.Mono=function(){t.AudioNode.call(this),this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=t.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),t(function(t){return t.MultibandCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor,t.AudioNode),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),t(function(t){return t.Panner=function(e){t.AudioNode.call(this),t.Panner.hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=new t.Signal(0,t.Type.AudioRange),this._zero=new t.Zero,this._a2g=new t.AudioToGain,this._zero.connect(this._a2g),this.pan.chain(this._a2g,this._crossFade.fade),this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=t.defaultArg(e,0),this._readOnly("pan")},t.extend(t.Panner,t.AudioNode),t.Panner.hasStereoPanner=t.context&&t.isFunction(t.context.createStereoPanner),t.Panner.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable("pan"),t.Panner.hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan=null):(this._zero.dispose(),this._zero=null,this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan.dispose(),this.pan=null,this._a2g.dispose(),this._a2g=null),this},t.Panner}),t(function(t){return t.Panner3D=function(){var e=t.defaults(arguments,["positionX","positionY","positionZ"],t.Panner3D);t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D,t.AudioNode),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,n){if(this._panner.positionX){var r=this.now();this._panner.positionX.setTargetAtTime(t,r,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,r,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(n,r,this._rampTimeConstant)}else this._panner.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,n){if(this._panner.orientationX){var r=this.now();this._panner.orientationX.setTargetAtTime(t,r,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,r,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(n,r,this._rampTimeConstant)}else this._panner.setOrientation(t,e,n);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}),t(function(t){return t.PanVol=function(){var e=t.defaults(arguments,["pan","volume"],t.PanVol);t.AudioNode.call(this),this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,this._readOnly(["pan","volume"])},t.extend(t.PanVol,t.AudioNode),t.PanVol.defaults={pan:0,volume:0,mute:!1},Object.defineProperty(t.PanVol.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.PanVol.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),t(function(t){return t.Solo=function(){var e=t.defaults(arguments,["solo"],t.Solo);t.AudioNode.call(this),this.input=this.output=new t.Gain,this._soloBind=this._soloed.bind(this),this.context.on("solo",this._soloBind),this.solo=e.solo},t.extend(t.Solo,t.AudioNode),t.Solo.defaults={solo:!1},Object.defineProperty(t.Solo.prototype,"solo",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),this.context.emit("solo",this)}}),Object.defineProperty(t.Solo.prototype,"muted",{get:function(){return 0===this.input.gain.value}}),t.Solo.prototype._addSolo=function(){t.isArray(this.context._currentSolo)||(this.context._currentSolo=[]),this._isSoloed()||this.context._currentSolo.push(this)},t.Solo.prototype._removeSolo=function(){if(this._isSoloed()){var t=this.context._currentSolo.indexOf(this);this.context._currentSolo.splice(t,1)}},t.Solo.prototype._isSoloed=function(){return!!t.isArray(this.context._currentSolo)&&(0!==this.context._currentSolo.length&&-1!==this.context._currentSolo.indexOf(this))},t.Solo.prototype._noSolos=function(){return!t.isArray(this.context._currentSolo)||0===this.context._currentSolo.length},t.Solo.prototype._soloed=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},t.Solo.prototype.dispose=function(){return this.context.off("solo",this._soloBind),this._removeSolo(),this._soloBind=null,t.AudioNode.prototype.dispose.call(this),this},t.Solo}),t(function(t){return t.Waveform=function(){var e=t.defaults(arguments,["size"],t.Waveform);e.type=t.Analyser.Type.Waveform,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.Waveform,t.AudioNode),t.Waveform.defaults={size:1024},t.Waveform.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.Waveform.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.Waveform.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.Waveform}),t(function(t){return t.CtrlInterpolate=function(){var e=t.defaults(arguments,["values","index"],t.CtrlInterpolate);t.call(this),this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),n=this.values[e],r=this.values[Math.ceil(t)];return this._interpolate(t-e,n,r)}}),t.CtrlInterpolate.prototype._interpolate=function(e,n,r){if(t.isArray(n)){for(var i=[],o=0;o<n.length;o++)i[o]=this._interpolate(e,n[o],r[o]);return i}if(t.isObject(n)){var a={};for(var s in n)a[s]=this._interpolate(e,n[s],r[s]);return a}return n=this._toNumber(n),r=this._toNumber(r),(1-e)*n+e*r},t.CtrlInterpolate.prototype._toNumber=function(e){return t.isNumber(e)?e:this.toSeconds(e)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),t(function(t){return t.CtrlMarkov=function(e,n){t.call(this),this.values=t.defaultArg(e,{}),this.value=t.defaultArg(n,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var e=this.values[this.value];if(t.isArray(e))for(var n=this._getProbDistribution(e),r=Math.random(),i=0,o=0;o<n.length;o++){var a=n[o];if(r>i&&r<i+a){var s=e[o];t.isObject(s)?this.value=s.value:this.value=s}i+=a}else this.value=e}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(e){for(var n=[],r=0,i=!1,o=0;o<e.length;o++){var a=e[o];t.isObject(a)?(i=!0,n[o]=a.probability):n[o]=1/e.length,r+=n[o]}if(i)for(var s=0;s<n.length;s++)n[s]=n[s]/r;return n},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),t(function(t){return t.CtrlPattern=function(){var e=t.defaults(arguments,["values","type"],t.CtrlPattern);t.call(this),this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):e===t.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var n=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(n[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),t(function(t){return t.CtrlRandom=function(){var e=t.defaults(arguments,["min","max"],t.CtrlRandom);t.call(this),this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),n=Math.random(),r=n*t+(1-n)*e;return this.integer&&(r=Math.floor(r)),r}}),t.CtrlRandom}),t(function(t){return window.AudioBuffer&&!AudioBuffer.prototype.copyToChannel&&(AudioBuffer.prototype.copyToChannel=function(t,e,n){var r=this.getChannelData(e);n=n||0;for(var i=0;i<r.length;i++)r[i+n]=t[i]},AudioBuffer.prototype.copyFromChannel=function(t,e,n){var r=this.getChannelData(e);n=n||0;for(var i=0;i<t.length;i++)t[i]=r[i+n]}),t.Buffer=function(){var e=t.defaults(arguments,["url","onload","onerror"],t.Buffer);t.call(this),this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):t.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,n,r){return new Promise(function(i,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),i(this),n&&n(this)}.bind(this),function(t){this._xhr=null,o(t),r&&r(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,i=this.context.createBuffer(n,r,this.context.sampleRate);e||1!==n||(t=[t]);for(var o=0;o<n;o++)i.copyToChannel(t[o],o);return this._buffer=i,this},t.Buffer.prototype.toMono=function(e){if(t.isNumber(e))this.fromArray(this.toArray(e));else{for(var n=new Float32Array(this.length),r=this.numberOfChannels,i=0;i<r;i++)for(var o=this.toArray(i),a=0;a<o.length;a++)n[a]+=o[a];n=n.map(function(t){return t/r}),this.fromArray(n)}return this},t.Buffer.prototype.toArray=function(e){if(t.isNumber(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var n=[],r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,n){n=t.defaultArg(n,this.duration);for(var r=Math.floor(this.context.sampleRate*this.toSeconds(e)),i=Math.floor(this.context.sampleRate*this.toSeconds(n)),o=[],a=0;a<this.numberOfChannels;a++)o[a]=this.toArray(a).slice(r,i);return(new t.Buffer).fromArray(o)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer.baseUrl="",t.Buffer.fromArray=function(e){return(new t.Buffer).fromArray(e)},t.Buffer._removeFromDownloadQueue=function(e){var n=t.Buffer._downloadQueue.indexOf(e);-1!==n&&t.Buffer._downloadQueue.splice(n,1)},t.Buffer.load=function(e,n,r){function i(e){if(t.Buffer._removeFromDownloadQueue(c),t.Buffer.emit("error",e),!r)throw e;r(e)}function o(){for(var e=0,n=0;n<t.Buffer._downloadQueue.length;n++)e+=t.Buffer._downloadQueue[n].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}n=t.defaultArg(n,t.noOp);var a=e.match(/\[(.+\|?)+\]$/);if(a){for(var s=a[1].split("|"),u=s[0],l=0;l<s.length;l++)if(t.Buffer.supportsType(s[l])){u=s[l];break}e=e.replace(a[0],u)}var c=new XMLHttpRequest;return c.open("GET",t.Buffer.baseUrl+e,!0),c.responseType="arraybuffer",c.progress=0,t.Buffer._downloadQueue.push(c),c.addEventListener("load",function(){200===c.status?t.context.decodeAudioData(c.response,function(e){c.progress=1,o(),n(e),t.Buffer._removeFromDownloadQueue(c),0===t.Buffer._downloadQueue.length&&t.Buffer.emit("load")},function(){t.Buffer._removeFromDownloadQueue(c),i("Tone.Buffer: could not decode audio data: "+e)}):i("Tone.Buffer: could not locate file: "+e)}),c.addEventListener("error",i),c.addEventListener("progress",function(t){t.lengthComputable&&(c.progress=t.loaded/t.total*.95,o())}),c.send(),c},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.slice().forEach(function(e){t.Buffer._removeFromDownloadQueue(e),e.abort()}),t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(".");e=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+e)},t.loaded=function(){function e(){t.Buffer.off("load",n),t.Buffer.off("error",r)}var n,r;return new Promise(function(e,i){n=function(){e()},r=function(){i()},t.Buffer.on("load",n),t.Buffer.on("error",r)}).then(e).catch(function(t){throw e(),new Error(t)})},t.Buffer}),t(function(t){return t.Buffers=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var r=t.defaults(n,["onload","baseUrl"],t.Buffers);t.call(this),this._buffers={},this.baseUrl=r.baseUrl,this._loadingCount=0;for(var i in e)this._loadingCount++,this.add(i,e[i],this._bufferLoaded.bind(this,r.onload))},t.extend(t.Buffers),t.Buffers.defaults={onload:t.noOp,baseUrl:""},t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var n=this.get(e);t=t&&n.loaded}return t}}),t.Buffers.prototype.add=function(e,n,r){return r=t.defaultArg(r,t.noOp),n instanceof t.Buffer?(this._buffers[e]=n,r(this)):n instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(n),r(this)):t.isString(n)&&(this._buffers[e]=new t.Buffer(this.baseUrl+n,r)),this},t.Buffers.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._buffers)this._buffers[e].dispose();return this._buffers=null,this},t.Buffers}),t(function(t){var e={};return t.prototype.send=function(n,r){e.hasOwnProperty(n)||(e[n]=this.context.createGain()),r=t.defaultArg(r,0);var i=new t.Gain(r,t.Type.Decibels);return this.output.chain(i,e[n]),i},t.prototype.receive=function(t,n){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),e[t].connect(this,0,n),this},t.Context.on("init",function(t){t.Buses?e=t.Buses:(e={},t.Buses=e)}),t}),t(function(t){return t.Draw=function(){t.call(this),this._events=new t.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},t.extend(t.Draw),t.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},t.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},t.Draw.prototype._drawLoop=function(){for(var e=t.now();this._events.length&&this._events.peek().time-this.anticipation<=e;){var n=this._events.shift();e-n.time<=this.expiration&&n.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},t.Draw=new t.Draw,t.Draw}),t(function(t){t.Listener=function(){t.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],t.getContext(function(){this.set(e.defaults)}.bind(this))},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,n){if(this.context.listener.positionX){var r=this.now();this.context.listener.positionX.setTargetAtTime(t,r,this._rampTimeConstant),this.context.listener.positionY.setTargetAtTime(e,r,this._rampTimeConstant),this.context.listener.positionZ.setTargetAtTime(n,r,this._rampTimeConstant)}else this.context.listener.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,n,r,i,o){if(this.context.listener.forwardX){var a=this.now();this.context.listener.forwardX.setTargetAtTime(t,a,this._rampTimeConstant),this.context.listener.forwardY.setTargetAtTime(e,a,this._rampTimeConstant),this.context.listener.forwardZ.setTargetAtTime(n,a,this._rampTimeConstant),this.context.listener.upX.setTargetAtTime(r,a,this._rampTimeConstant),this.context.listener.upY.setTargetAtTime(i,a,this._rampTimeConstant),this.context.listener.upZ.setTargetAtTime(o,a,this._rampTimeConstant)}else this.context.listener.setOrientation(t,e,n,r,i,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on("init",function(n){n.Listener instanceof e?t.Listener=n.Listener:t.Listener=new e,n.Listener=t.Listener}),t.Listener}),t(function(t){return!window.hasOwnProperty("OfflineAudioContext")&&window.hasOwnProperty("webkitOfflineAudioContext")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t.OfflineContext=function(e,n,r){var i=new OfflineAudioContext(e,n*r,r);t.Context.call(this,{context:i,clockSource:"offline",lookAhead:0,updateInterval:128/r}),this._duration=n,this._currentTime=0},t.extend(t.OfflineContext,t.Context),t.OfflineContext.prototype.now=function(){return this._currentTime},t.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=this.blockTime;return new Promise(function(t){this._context.oncomplete=function(e){t(e.renderedBuffer)},this._context.startRendering()}.bind(this))},t.OfflineContext.prototype.close=function(){this._context=null},t.OfflineContext}),t(function(t){return t.Offline=function(e,n){var r=t.context.sampleRate,i=t.context,o=new t.OfflineContext(2,n,r);t.context=o,e(t.Transport);var a=o.render();return t.context=i,a.then(function(e){return new t.Buffer(e)})},t.Offline}),t(function(t){return t.Effect=function(){var e=t.defaults(arguments,["wet"],t.Effect);t.AudioNode.call(this),this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect,t.AudioNode),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),t(function(t){return t.AutoFilter=function(){var e=t.defaults(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),t(function(t){return t.AutoPanner=function(){var e=t.defaults(arguments,["frequency"],t.AutoPanner);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),t(function(t){return t.AutoWah=function(){var e=t.defaults(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return t.gainToDb(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/t.dbToGain(e)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),t(function(t){return t.BitCrusher=function(){var e=t.defaults(arguments,["bits"],t.BitCrusher);t.Effect.call(this,e);var n=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(n),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),t(function(t){return t.Chebyshev=function(){var e=t.defaults(arguments,["order"],t.Chebyshev);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,n){return n.hasOwnProperty(e)?n[e]:(n[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n),n[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),n=e.length,r=0;r<n;++r){var i=2*r/n-1;e[r]=0===i?0:this._getCoefficient(i,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),t(function(t){return t.StereoEffect=function(){t.AudioNode.call(this);var e=t.defaults(arguments,["wet"],t.Effect);this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),t(function(t){return t.FeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}),t(function(t){return t.StereoXFeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.StereoEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),t(function(t){return t.Chorus=function(){var e=t.defaults(arguments,["frequency","delayTime","depth"],t.Chorus);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),t(function(t){return t.Convolver=function(){var e=t.defaults(arguments,["url","onload"],t.Convolver);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer,t.isString(e.url)?this._buffer.load(e.url,function(t){this.buffer=t,e.onload()}.bind(this)):e.url&&(this.buffer=e.url,e.onload()),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),t(function(t){return t.Distortion=function(){var e=t.defaults(arguments,["distortion"],t.Distortion);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,n=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),t(function(t){return t.FeedbackDelay=function(){var e=t.defaults(arguments,["delayTime","feedback"],t.FeedbackDelay);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),t(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],n=[225,556,441,341];return t.Freeverb=function(){var r=t.defaults(arguments,["roomSize","dampening"],t.Freeverb);t.StereoEffect.call(this,r),this.roomSize=new t.Signal(r.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(r.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var i=0;i<n.length;i++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=n[i],this._allpassFiltersL.push(o)}for(var a=0;a<n.length;a++){var s=this.context.createBiquadFilter();s.type="allpass",s.frequency.value=n[a],this._allpassFiltersR.push(s)}for(var u=0;u<e.length;u++){var l=new t.LowpassCombFilter(e[u]);u<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l)}t.connectSeries.apply(t,this._allpassFiltersL),t.connectSeries.apply(t,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var n=0;n<this._allpassFiltersR.length;n++)this._allpassFiltersR[n].disconnect(),this._allpassFiltersR[n]=null;this._allpassFiltersR=null;for(var r=0;r<this._combFilters.length;r++)this._combFilters[r].dispose(),this._combFilters[r]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),t(function(t){var e=[.06748,.06404,.08212,.09004],n=[.773,.802,.753,.733],r=[347,113,37];return t.JCReverb=function(){var i=t.defaults(arguments,["roomSize"],t.JCReverb);t.StereoEffect.call(this,i),this.roomSize=new t.Signal(i.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<r.length;o++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=r[o],this._allpassFilters.push(a)}for(var s=0;s<e.length;s++){var u=new t.FeedbackCombFilter(e[s],.1);this._scaleRoomSize.connect(u.resonance),u.resonance.value=n[s],this._allpassFilters[this._allpassFilters.length-1].connect(u),s<e.length/2?u.connect(this.effectReturnL):u.connect(this.effectReturnR),this._feedbackCombFilters.push(u)}this.roomSize.connect(this._scaleRoomSize),t.connectSeries.apply(t,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var n=0;n<this._feedbackCombFilters.length;n++)this._feedbackCombFilters[n].dispose(),this._feedbackCombFilters[n]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),t(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),t(function(t){return t.Phaser=function(){var e=t.defaults(arguments,["frequency","octaves","baseFrequency"],t.Phaser);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(e,n,r){for(var i=new Array(e),o=0;o<e;o++){var a=this.context.createBiquadFilter();a.type="allpass",r.connect(a.Q),n.connect(a.frequency),i[o]=a}return t.connectSeries.apply(t,i),i},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var n=0;n<this._filtersR.length;n++)this._filtersR[n].disconnect(),this._filtersR[n]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),t(function(t){return t.PingPongDelay=function(){var e=t.defaults(arguments,["delayTime","feedback"],t.PingPongDelay);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),t(function(t){return t.PitchShift=function(){var e=t.defaults(arguments,["pitch"],t.PitchShift);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(e){this._pitch=e;var n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=t.intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=t.intervalToFrequencyRatio(e)-1),this._frequency.value=n*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),t(function(t){return t.StereoFeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.StereoEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}),t(function(t){return t.StereoWidener=function(){var e=t.defaults(arguments,["width"],t.StereoWidener);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),t(function(t){return t.Tremolo=function(){var e=t.defaults(arguments,["frequency","depth"],t.Tremolo);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),t(function(t){return t.Vibrato=function(){var e=t.defaults(arguments,["frequency","depth"],t.Vibrato);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),t(function(t){return t.Event=function(){var e=t.defaults(arguments,["callback","value"],t.Event);t.call(this),this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=t.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var n;if(e.state===t.State.Started){t.isUndef(e.id)||t.Transport.clear(e.id);var r=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){n=1/0,t.isNumber(this._loop)&&(n=this._loop*this._getLoopDuration());var i=this._state.getAfter(r);null!==i&&(n=Math.min(n,i.time-r)),n!==1/0&&(this._state.setStateAtTime(t.State.Stopped,r+n+1),n=t.Time(n,"i"));var o=t.Time(this._getLoopDuration(),"i");e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(r,"i"),n)}else e.id=t.Transport.schedule(this._tick.bind(this),r+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getValueAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),Object.defineProperty(t.Event.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t}}),Object.defineProperty(t.Event.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Stopped&&(this._state.add({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var n=this._state.getBefore(e),r=e;null!==n&&(r=n.time),this._rescheduleEvents(r)}return this},t.Event.prototype.cancel=function(e){return e=t.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getValueAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;t.isBoolean(this.humanize)||(n=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*n}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,n=this._state.get(e);if(null!==n&&n.state===t.State.Started){var r=this._getLoopDuration();return(e-n.time)%r/r}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),t(function(t){return t.Loop=function(){var e=t.defaults(arguments,["callback","interval"],t.Loop);t.call(this),this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),t(function(t){return t.Part=function(){var e=t.defaults(arguments,["callback","events"],t.Part);t.Event.call(this,e),this._events=[];for(var n=0;n<e.events.length;n++)Array.isArray(e.events[n])?this.add(e.events[n][0],e.events[n][1]):this.add(e.events[n])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1,events:[]},t.Part.prototype.start=function(e,n){var r=this.toTicks(e);return this._state.getValueAtTime(r)!==t.State.Started&&(n=this._loop?t.defaultArg(n,this._loopStart):t.defaultArg(n,0),n=this.toTicks(n),this._state.add({state:t.State.Started,time:r,offset:n}),this._forEach(function(t){this._startNote(t,r,n)})),this},t.Part.prototype._startNote=function(e,n,r){n-=r,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<r&&(n+=this._getLoopDuration()),e.start(t.TransportTime(n,"i"))):e.startOffset<this._loopStart&&e.startOffset>=r&&(e.loop=!1,e.start(t.TransportTime(n,"i"))):e.startOffset>=r&&e.start(t.TransportTime(n,"i"))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime(t.State.Stopped,n),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,n){e=t.TransportTime(e);for(var r=t.Time(1,"i").toSeconds(),i=0;i<this._events.length;i++){var o=this._events[i];if(Math.abs(e.toTicks()-o.startOffset)<r)return t.isUndef(n)||(o.value=n),o}return t.isUndef(n)?null:(this.add(e,n),this._events[this._events.length-1])},t.Part.prototype.add=function(e,n){e.hasOwnProperty("time")&&(e=(n=e).time),e=this.toTicks(e);var r;return n instanceof t.Event?(r=n).callback=this._tick.bind(this):r=new t.Event({callback:this._tick.bind(this),value:n}),r.startOffset=e,r.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(r),this._restartEvent(r),this},t.Part.prototype._restartEvent=function(e){this._state.forEach(function(n){n.state===t.State.Started?this._startNote(e,n.time,n.offset):e.stop(t.TransportTime(n.time,"i"))}.bind(this))},t.Part.prototype.remove=function(e,n){e.hasOwnProperty("time")&&(e=(n=e).time),e=this.toTicks(e);for(var r=this._events.length-1;r>=0;r--){var i=this._events[r];i instanceof t.Part?i.remove(e,n):i.startOffset===e&&(t.isUndef(n)||!t.isUndef(n)&&i.value===n)&&(this._events.splice(r,1),i.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},t.Part.prototype._forEach=function(e,n){if(this._events){n=t.defaultArg(n,this);for(var r=this._events.length-1;r>=0;r--){var i=this._events[r];i instanceof t.Part?i._forEach(e,n):e.call(n,i)}}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(n){n[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel(0):e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),t(function(t){return t.Pattern=function(){var e=t.defaults(arguments,["callback","values","pattern"],t.Pattern);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,callback:t.noOp,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),t(function(t){return t.Sequence=function(){var e=t.defaults(arguments,["callback","events","subdivision"],t.Sequence),n=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),t.isUndef(e.loopEnd)&&!t.isUndef(n)&&(this._loopEnd=n.length*this._subdivision),this._loop=!0,!t.isUndef(n))for(var r=0;r<n.length;r++)this.add(r,n[r])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return t.Time(this._subdivision,"i").toNotation()}}),t.Sequence.prototype.at=function(e,n){return t.isArray(n)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),n)},t.Sequence.prototype.add=function(e,n){if(null===n)return this;if(t.isArray(n)){var r=Math.round(this._subdivision/n.length);n=new t.Sequence(this._tick.bind(this),n,t.Time(r,"i"))}return t.Part.prototype.add.call(this,this._indexTime(e),n),this},t.Sequence.prototype.remove=function(e,n){return t.Part.prototype.remove.call(this,this._indexTime(e),n),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.TransportTime(e*this._subdivision+this.startOffset,"i")},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),t(function(t){return t.PulseOscillator=function(){var e=t.defaults(arguments,["frequency","width"],t.Oscillator);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain,this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Source),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),t(function(t){return t.PWMOscillator=function(){var e=t.defaults(arguments,["frequency","modulationFrequency"],t.PWMOscillator);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Source),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),t(function(t){return t.FMOscillator=function(){var e=t.defaults(arguments,["frequency","type","modulationType"],t.FMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},t.extend(t.FMOscillator,t.Source),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,modulationIndex:2,modulationType:"square",harmonicity:1},t.FMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}),t(function(t){return t.AMOscillator=function(){var e=t.defaults(arguments,["frequency","type","modulationType"],t.AMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly(["frequency","detune","harmonicity"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,modulationType:"square",harmonicity:1},t.AMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}),t(function(t){return t.FatOscillator=function(){var e=t.defaults(arguments,["frequency","type","spread"],t.FatOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=t.defaultArg(e.partials,[]),this.count=e.count,this._readOnly(["frequency","detune"])},t.extend(t.FatOscillator,t.Source),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth"},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach(function(t,r){t.detune.value=e+n*r})}}}),Object.defineProperty(t.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var n=0;n<e;n++){var r=new t.Oscillator;this.type===t.Oscillator.Type.Custom?r.partials=this._partials:r.type=this._type,r.phase=this._phase,r.volume.value=-6-e,this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,"partials",{get:function(){return this._partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}),t(function(t){t.OmniOscillator=function(){var e=t.defaults(arguments,["frequency","type"],t.OmniOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"]),this.set(e)},t.extend(t.OmniOscillator,t.Source),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var e="PulseOscillator",n="PWMOscillator",r="Oscillator",i="FMOscillator",o="AMOscillator",a="FatOscillator";return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===i?t="fm":this._sourceType===o?t="am":this._sourceType===a&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(i),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(o),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(a),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(n):"pulse"===t?this._createNewOscillator(e):(this._createNewOscillator(r),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),t.OmniOscillator.prototype.set=function(e,n){return"type"===e?this.type=n:t.isObject(e)&&e.hasOwnProperty("type")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var n=t[e],r=this.now();if(null!==this._oscillator){var i=this._oscillator;i.stop(r),this.context.setTimeout(function(){i.dispose(),i=null},this.blockTime)}this._oscillator=new n,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(r)}},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){if(this._sourceType===e)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,"count",{get:function(){if(this._sourceType===a)return this._oscillator.count},set:function(t){this._sourceType===a&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"spread",{get:function(){if(this._sourceType===a)return this._oscillator.spread},set:function(t){this._sourceType===a&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationType",{get:function(){if(this._sourceType===i||this._sourceType===o)return this._oscillator.modulationType},set:function(t){this._sourceType!==i&&this._sourceType!==o||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationIndex",{get:function(){if(this._sourceType===i)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,"harmonicity",{get:function(){if(this._sourceType===i||this._sourceType===o)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){if(this._sourceType===n)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),t(function(t){return t.Instrument=function(e){e=t.defaultArg(e,t.Instrument.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument,t.AudioNode),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,n,r){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(t,n,r),this.triggerRelease(n+e),this},t.Instrument.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),t(function(t){return t.Monophonic=function(e){e=t.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,n){return e=this.toSeconds(e),this._triggerEnvelopeAttack(e,n),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var n=this.frequency.value;this.frequency.setValueAtTime(n,e);var r=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+r)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),t(function(t){return t.Synth=function(e){e=t.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}),t(function(t){return t.AMSynth=function(e){e=t.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t,e),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}),t(function(t){return t.MonoSynth=function(e){e=t.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),t(function(t){return t.DuoSynth=function(e){e=t.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),t(function(t){return t.FMSynth=function(e){e=t.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}),t(function(t){return t.MembraneSynth=function(e){e=t.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,n){e=this.toSeconds(e);var r=(t=this.toFrequency(t))*this.octaves;return this.oscillator.frequency.setValueAtTime(r,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,n),this},t.MembraneSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}),t(function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(n){n=t.defaultArg(n,t.MetalSynth.defaults),t.Instrument.call(this,n),this.frequency=new t.Signal(n.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:"highpass",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=n.octaves,this._filterFreqScaler=new t.Scale(n.resonance,7e3),this.envelope=new t.Envelope({attack:n.envelope.attack,attackCurve:"linear",decay:n.envelope.decay,sustain:0,release:n.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var r=0;r<e.length;r++){var i=new t.FMOscillator({type:"square",modulationType:"square",harmonicity:n.harmonicity,modulationIndex:n.modulationIndex});i.connect(this._highpass).start(),this._oscillators[r]=i;var o=new t.Multiply(e[r]);this._freqMultipliers[r]=o,this.frequency.chain(o,i.frequency)}this.octaves=n.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(e,n){return e=this.toSeconds(e),n=t.defaultArg(n,1),this.envelope.triggerAttack(e,n),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}),t(function(t){return window.AudioBufferSourceNode&&!AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn,AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),t.BufferSource=function(){var e=t.defaults(arguments,["buffer","onload"],t.BufferSource);t.AudioNode.call(this),this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._buffer=new t.Buffer(e.buffer,e.onload),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this.curve=e.curve,this._gain=1,this._onendedTimeout=-1,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate.value=e.playbackRate},t.extend(t.BufferSource,t.AudioNode),t.BufferSource.defaults={onended:t.noOp,onload:t.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:"linear",playbackRate:1},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return-1!==this._startTime&&e>=this._startTime&&e<this._stopTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(e,n,r,i,o){if(-1!==this._startTime)throw new Error("Tone.BufferSource can only be started once.");if(!this.buffer.loaded)throw new Error("Tone.BufferSource: buffer is either not set or not loaded.");e=this.toSeconds(e),n=this.loop?t.defaultArg(n,this.loopStart):t.defaultArg(n,0),n=this.toSeconds(n),i=t.defaultArg(i,1),this._gain=i,o=this.toSeconds(t.defaultArg(o,this.fadeIn)),this.fadeIn=o,o>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(this._gain,e+o):this._gainNode.gain.setTargetAtTime(this._gain,e,this._gainNode.gain.getTimeConstant(o))):this._gainNode.gain.setValueAtTime(i,e),this._startTime=e;var a=this.toSeconds(t.defaultArg(r,this.buffer.duration-n));if(a=Math.max(a,0),(!this.loop||this.loop&&!t.isUndef(r))&&(this.loop||(a=Math.min(a,this.buffer.duration-n)),this.stop(e+a,this.fadeOut)),this.loop){var s=this.loopEnd||this.buffer.duration,u=this.loopStart;n>s&&(n=(n-u)%(s-u)+u)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,t.isPast(e),this._source.start(e,n),this},t.BufferSource.prototype.stop=function(e,n){if(!this.buffer.loaded)throw new Error("Tone.BufferSource: buffer is either not set or not loaded.");if(e=this.toSeconds(e),-1===this._stopTime||this._stopTime>e){if(e<=this._startTime)return this._gainNode.gain.cancelScheduledValues(e),this._gainNode.gain.value=0,this;e=Math.max(this._startTime+this.fadeIn+this.sampleTime,e),this._gainNode.gain.cancelScheduledValues(e),this._stopTime=e,n=this.toSeconds(t.defaultArg(n,this.fadeOut));var r=Math.min(e-this._startTime-this.fadeIn-this.sampleTime,this.buffer.duration),i=e-(n=Math.min(r,n));n>this.sampleTime?(this._gainNode.gain.setValueAtTime(this._gain,i),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(0,e):this._gainNode.gain.setTargetAtTime(0,i,this._gainNode.gain.getTimeConstant(n))):this._gainNode.gain.setValueAtTime(0,e),t.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=t.context.setTimeout(this._onended.bind(this),this._stopTime-this.now())}return this},t.BufferSource.prototype._onended=function(){this.onended(this)},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,t.context.clearTimeout(this._onendedTimeout),this},t.BufferSource}),t(function(t){function e(){for(var e in n)r[e]=(new t.Buffer).fromArray(n[e])}t.Noise=function(){var e=t.defaults(arguments,["type"],t.Noise);t.Source.call(this,e),this._source=null,this._type=e.type,this._playbackRate=e.playbackRate},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._type},set:function(e){if(this._type!==e){if(!(e in r))throw new TypeError("Tone.Noise: invalid type: "+e);if(this._type=e,this.state===t.State.Started){var n=this.now();this._stop(n),this._start(n)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(e){var n=r[this._type];this._source=new t.BufferSource(n).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var n={pink:function(){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;var r,i,o,a,s,u,l;r=i=o=a=s=u=l=0;for(var c=0;c<220500;c++){var f=2*Math.random()-1;r=.99886*r+.0555179*f,i=.99332*i+.0750759*f,o=.969*o+.153852*f,a=.8665*a+.3104856*f,s=.55*s+.5329522*f,u=-.7616*u-.016898*f,n[c]=r+i+o+a+s+u+l+.5362*f,n[c]*=.11,l=.115926*f}}return t}(),brown:function(){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var r=0,i=0;i<220500;i++){var o=2*Math.random()-1;n[i]=(r+.02*o)/1.02,r=n[i],n[i]*=3.5}}return t}(),white:function(){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var r=0;r<220500;r++)n[r]=2*Math.random()-1}return t}()},r={};return t.getContext(e),t.Context.on("init",e),t.Noise}),t(function(t){return t.NoiseSynth=function(e){e=t.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this.noise.start(),this._readOnly(["noise","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}),t(function(t){return t.PluckSynth=function(e){e=t.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=e.attackNoise,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var n=1/t;return this._lfcf.delayTime.setValueAtTime(n,e),this._noise.start(e),this._noise.stop(e+n*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),t(function(t){return t.PolySynth=function(){var e=t.defaults(arguments,["polyphony","voice"],t.PolySynth);t.Instrument.call(this,e),(e=t.defaultArg(e,t.Instrument.defaults)).polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this._triggers=new Array(e.polyphony),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly("detune");for(var n=0;n<e.polyphony;n++){var r=new e.voice(arguments[2],arguments[3]);this.voices[n]=r,r.connect(this.output),r.hasOwnProperty("detune")&&this.detune.connect(r.detune),this._triggers[n]={release:-1,note:null,voice:r}}},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var r=0;r<t.length;r++){for(var i=t[r],o=this._triggers[0],a=1;a<this._triggers.length;a++)this._triggers[a].release<o.release&&(o=this._triggers[a],a);o.release=1/0,o.note=JSON.stringify(i),o.voice.triggerAttack(i,e,n)}return this},t.PolySynth.prototype.triggerAttackRelease=function(e,n,r,i){if(r=this.toSeconds(r),this.triggerAttack(e,r,i),t.isArray(n)&&t.isArray(e))for(var o=0;o<e.length;o++){var a=n[Math.min(o,n.length-1)];this.triggerRelease(e[o],r+this.toSeconds(a))}else this.triggerRelease(e,r+this.toSeconds(n));return this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var n=0;n<t.length;n++)for(var r=JSON.stringify(t[n]),i=0;i<this._triggers.length;i++){var o=this._triggers[i];o.note===r&&o.release>e&&(o.voice.triggerRelease(e),o.release=e)}return this},t.PolySynth.prototype.set=function(t,e,n){for(var r=0;r<this.voices.length;r++)this.voices[r].set(t,e,n);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._triggers.length;e++){var n=this._triggers[e];n.release>t&&(n.release=t,n.voice.triggerRelease(t))}return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this._triggers=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}),t(function(t){return t.Sampler=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var r=t.defaults(n,["onload","baseUrl"],t.Sampler);t.Instrument.call(this,r);var i={};for(var o in e)if(t.isNote(o)){i[t.Frequency(o).toMidi()]=e[o]}else{if(isNaN(parseFloat(o)))throw new Error("Tone.Sampler: url keys must be the note's pitch");i[o]=e[o]}this._buffers=new t.Buffers(i,r.onload,r.baseUrl),this._activeSources={},this.attack=r.attack,this.release=r.release},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={attack:0,release:.1,onload:t.noOp,baseUrl:""},t.Sampler.prototype._findClosest=function(t){for(var e=0;e<24;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}return null},t.Sampler.prototype.triggerAttack=function(e,n,r){var i=t.Frequency(e).toMidi(),o=this._findClosest(i);if(null!==o){var a=i-o,s=this._buffers.get(a),u=new t.BufferSource({buffer:s,playbackRate:t.intervalToFrequencyRatio(o),fadeIn:this.attack,fadeOut:this.release,curve:"exponential"}).connect(this.output);u.start(n,0,s.duration,r),t.isArray(this._activeSources[i])||(this._activeSources[i]=[]),this._activeSources[i].push({note:i,source:u})}return this},t.Sampler.prototype.triggerRelease=function(e,n){var r=t.Frequency(e).toMidi();if(this._activeSources[r]&&this._activeSources[r].length){var i=this._activeSources[r].shift().source;n=this.toSeconds(n),i.stop(n+this.release,this.release)}},t.Sampler.prototype.triggerAttackRelease=function(t,e,n,r){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(t,n,r),this.triggerRelease(t,n+e),this},t.Sampler.prototype.add=function(e,n,r){if(t.isNote(e)){var i=t.Frequency(e).toMidi();this._buffers.add(i,n,r)}else{if(isNaN(parseFloat(e)))throw new Error("Tone.Sampler: note must be the note's pitch. Instead got "+e);this._buffers.add(e,n,r)}},Object.defineProperty(t.Sampler.prototype,"loaded",{get:function(){return this._buffers.loaded}}),t.Sampler.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null;for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.source.dispose()});return this._activeSources=null,this},t.Sampler}),t(function(t){return t.GainToAudio=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),t(function(t){return t.Normalize=function(e,n){t.SignalBase.call(this),this._inputMin=t.defaultArg(e,0),this._inputMax=t.defaultArg(n,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),t(function(t){return t.TransportTimelineSignal=function(){t.TimelineSignal.apply(this,arguments),this.output=this._outputSig=new t.Signal(this._initial),this._lastVal=this.value,this._synced=t.Transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._bindAnchorValue=this._anchorValue.bind(this),t.Transport.on("start stop pause",this._bindAnchorValue),this._events.memory=1/0},t.extend(t.TransportTimelineSignal,t.TimelineSignal),t.TransportTimelineSignal.prototype._onTick=function(e){var n=this.getValueAtTime(t.Transport.seconds);this._lastVal!==n&&(this._lastVal=n,this._outputSig.linearRampToValueAtTime(n,e))},t.TransportTimelineSignal.prototype._anchorValue=function(e){var n=this.getValueAtTime(t.Transport.ticks);return this._lastVal=n,this._outputSig.cancelScheduledValues(e),this._outputSig.setValueAtTime(n,e),this},t.TransportTimelineSignal.prototype.getValueAtTime=function(e){return e=this.toTicks(e),t.TimelineSignal.prototype.getValueAtTime.call(this,e)},t.TransportTimelineSignal.prototype.setValueAtTime=function(e,n){return n=this.toTicks(n),t.TimelineSignal.prototype.setValueAtTime.call(this,e,n),this},t.TransportTimelineSignal.prototype.linearRampToValueAtTime=function(e,n){return n=this.toTicks(n),t.TimelineSignal.prototype.linearRampToValueAtTime.call(this,e,n),this},t.TransportTimelineSignal.prototype.exponentialRampToValueAtTime=function(e,n){return n=this.toTicks(n),t.TimelineSignal.prototype.exponentialRampToValueAtTime.call(this,e,n),this},t.TransportTimelineSignal.prototype.setTargetAtTime=function(e,n,r){return n=this.toTicks(n),t.TimelineSignal.prototype.setTargetAtTime.call(this,e,n,r),this},t.TransportTimelineSignal.prototype.cancelScheduledValues=function(e){return e=this.toTicks(e),t.TimelineSignal.prototype.cancelScheduledValues.call(this,e),this},t.TransportTimelineSignal.prototype.setValueCurveAtTime=function(e,n,r,i){return n=this.toTicks(n),r=this.toTicks(r),t.TimelineSignal.prototype.setValueCurveAtTime.call(this,e,n,r,i),this},t.TransportTimelineSignal.prototype.dispose=function(){t.Transport.clear(this._synced),t.Transport.off("start stop pause",this._syncedCallback),this._events.cancel(0),t.TimelineSignal.prototype.dispose.call(this),this._outputSig.dispose(),this._outputSig=null},t.TransportTimelineSignal}),t(function(t){return t.MultiPlayer=function(e){1!==arguments.length||t.isUndef(arguments[0])||arguments[0].hasOwnProperty("urls")||(e={urls:e});var n=t.defaults(arguments,["urls","onload"],t.MultiPlayer);t.Source.call(this,n),n.urls instanceof t.Buffers?this.buffers=n.urls:this.buffers=new t.Buffers(n.urls,n.onload),this._activeSources={},this.fadeIn=n.fadeIn,this.fadeOut=n.fadeOut},t.extend(t.MultiPlayer,t.Source),t.MultiPlayer.defaults={onload:t.noOp,fadeIn:0,fadeOut:0},t.MultiPlayer.prototype._makeSource=function(e){var n;t.isString(e)||t.isNumber(e)?n=this.buffers.get(e).get():e instanceof t.Buffer?n=e.get():e instanceof AudioBuffer&&(n=e);var r=new t.BufferSource(n).connect(this.output);return this._activeSources.hasOwnProperty(e)||(this._activeSources[e]=[]),this._activeSources[e].push(r),r},t.MultiPlayer.prototype.start=function(e,n,r,i,o,a){n=this.toSeconds(n);var s=this._makeSource(e);return s.start(n,r,i,t.defaultArg(a,1),this.fadeIn),i&&s.stop(n+this.toSeconds(i),this.fadeOut),o=t.defaultArg(o,0),s.playbackRate.value=t.intervalToFrequencyRatio(o),this},t.MultiPlayer.prototype.startLoop=function(e,n,r,i,o,a,s){n=this.toSeconds(n);var u=this._makeSource(e);return u.loop=!0,u.loopStart=this.toSeconds(t.defaultArg(i,0)),u.loopEnd=this.toSeconds(t.defaultArg(o,0)),u.start(n,r,void 0,t.defaultArg(s,1),this.fadeIn),a=t.defaultArg(a,0),u.playbackRate.value=t.intervalToFrequencyRatio(a),this},t.MultiPlayer.prototype.stop=function(t,e){if(!this._activeSources[t]||!this._activeSources[t].length)throw new Error("Tone.MultiPlayer: cannot stop a buffer that hasn't been started or is already stopped");return e=this.toSeconds(e),this._activeSources[t].shift().stop(e,this.fadeOut),this},t.MultiPlayer.prototype.stopAll=function(t){t=this.toSeconds(t);for(var e in this._activeSources)for(var n=this._activeSources[e],r=0;r<n.length;r++)n[r].stop(t);return this},t.MultiPlayer.prototype.add=function(t,e,n){return this.buffers.add(t,e,n),this},Object.defineProperty(t.MultiPlayer.prototype,"state",{get:function(){return this._activeSources.length>0?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.MultiPlayer.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.MultiPlayer.prototype.dispose=function(){t.Source.prototype.dispose.call(this);for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.dispose()});return this.buffers.dispose(),this.buffers=null,this._activeSources=null,this},t.MultiPlayer}),t(function(t){return t.GrainPlayer=function(){var e=t.defaults(arguments,["url","onload"],t.GrainPlayer);t.Source.call(this,e),this.buffer=new t.Buffer(e.url,e.onload),this._clock=new t.Clock(this._tick.bind(this),e.grainSize),this._loopStart=0,this._loopEnd=0,this._activeSources=[],this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(e,n,r){n=t.defaultArg(n,0),n=this.toSeconds(n),e=this.toSeconds(e),this._offset=n,this._clock.start(e),r&&this.stop(e+this.toSeconds(r))},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t)},t.GrainPlayer.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.stop(t,0)})},t.GrainPlayer.prototype._tick=function(e){var n=this._offset<this._overlap?0:this._overlap,r=new t.BufferSource({buffer:this.buffer,fadeIn:n,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:t.intervalToFrequencyRatio(this.detune/100)}).connect(this.output);r.start(e,this._offset),this._offset+=this.grainSize,r.stop(e+this.grainSize),this._activeSources.push(r),r.onended=function(){var t=this._activeSources.indexOf(r);-1!==t&&this._activeSources.splice(t,1)}.bind(this)},t.GrainPlayer.prototype.seek=function(t,e){return this._offset=this.toSeconds(t),this._tick(this.toSeconds(e)),this},Object.defineProperty(t.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._clock.dispose(),this._clock=null,this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,this},t.GrainPlayer}),t(function(t){return t.Player=function(e){var n;e instanceof t.Buffer?(e=e.get(),n=t.Player.defaults):n=t.defaults(arguments,["url","onload"],t.Player),t.Source.call(this,n),this._source=null,this.autostart=n.autostart,this._buffer=new t.Buffer({url:n.url,onload:this._onload.bind(this,n.onload),reverse:n.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=n.loop,this._loopStart=n.loopStart,this._loopEnd=n.loopEnd,this._playbackRate=n.playbackRate,this.retrigger=n.retrigger,this.fadeIn=n.fadeIn,this.fadeOut=n.fadeOut},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1,fadeIn:0,fadeOut:0},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){(e=t.defaultArg(e,t.noOp))(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,n,r){return n=this._loop?t.defaultArg(n,this._loopStart):t.defaultArg(n,0),n=this.toSeconds(n),r=t.defaultArg(r,Math.max(this._buffer.duration-n,0)),r=this.toSeconds(r),e=this.toSeconds(e),this._source=new t.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output),this._loop||this._synced||this._state.setStateAtTime(t.State.Stopped,e+r),this._loop?this._source.start(e,n):this._source.start(e,n,r),this},t.Player.prototype._stop=function(t){return this._source&&this._source.stop(this.toSeconds(t)),this},t.Player.prototype.seek=function(e,n){return n=this.toSeconds(n),this._state.getValueAtTime(n)===t.State.Started&&(e=this.toSeconds(e),this._stop(n),this._start(n,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(t.Player.prototype,"loaded",{get:function(){return this._buffer.loaded}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),t(function(t){return t.Players=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var r=t.defaults(n,["onload"],t.Players);t.call(this),this._volume=this.output=new t.Volume(r.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=r.mute,this._players={},this._loadingCount=0,this._fadeIn=r.fadeIn,this._fadeOut=r.fadeOut;for(var i in e)this._loadingCount++,this.add(i,e[i],this._bufferLoaded.bind(this,r.onload))},t.extend(t.Players,t.AudioNode),t.Players.defaults={volume:0,mute:!1,onload:t.noOp,fadeIn:0,fadeOut:0},t.Players.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(t.Players.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(t.Players.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(t.Players.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(t.Players.prototype,"state",{get:function(){var e=!1;return this._forEach(function(n){e=e||n.state===t.State.Started}),e?t.State.Started:t.State.Stopped}}),t.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},t.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error("Tone.Players: no player named "+t)},t.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(t.Players.prototype,"loaded",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),t.Players.prototype.add=function(e,n,r){return this._players[e]=new t.Player(n,r).connect(this.output),this._players[e].fadeIn=this._fadeIn,this._players[e].fadeOut=this._fadeOut,this},t.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},t.Players.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},t.Players}),t(function(t){return t.UserMedia=function(){var e=t.defaults(arguments,["volume"],t.UserMedia);t.AudioNode.call(this),this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this.mute=e.mute},t.extend(t.UserMedia,t.AudioNode),t.UserMedia.defaults={volume:0,mute:!1},t.UserMedia.prototype.open=function(e){return e=t.defaultArg(e,"default"),t.UserMedia.enumerateDevices().then(function(n){var r;if(t.isNumber(e))r=n[e];else if(!(r=n.find(function(t){return t.label===e||t.deviceId===e})))throw new Error("Tone.UserMedia: no matching device: "+e);this._device=r;var i={audio:{deviceId:r.deviceId,echoCancellation:!1,sampleRate:this.context.sampleRate}};return navigator.mediaDevices.getUserMedia(i).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)),this}.bind(this))}.bind(this))},t.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},t.UserMedia.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return"audioinput"===t.kind})})},Object.defineProperty(t.UserMedia.prototype,"state",{get:function(){return this._stream&&this._stream.active?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.UserMedia.prototype,"deviceId",{get:function(){if(this._device)return this._device.deviceId}}),Object.defineProperty(t.UserMedia.prototype,"groupId",{get:function(){if(this._device)return this._device.groupId}}),Object.defineProperty(t.UserMedia.prototype,"label",{get:function(){if(this._device)return this._device.label}}),Object.defineProperty(t.UserMedia.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.UserMedia.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.close(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(t.UserMedia,"supported",{get:function(){return!t.isUndef(navigator.mediaDevices)&&t.isFunction(navigator.mediaDevices.getUserMedia)}}),t.UserMedia}),e})},{}],255:[function(t,e,n){(n=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],256:[function(t,e,n){"use strict";e.exports=function(t,e,n){Array.isArray(n)||(n=[].slice.call(arguments,2));for(var r=0,i=n.length;r<i;r++){var o=n[r];for(var a in o)if((void 0===e[a]||Array.isArray(e[a])||t[a]!==e[a])&&a in e){var s;if(!0===o[a])s=e[a];else{if(!1===o[a])continue;if("function"==typeof o[a]&&void 0===(s=o[a](e[a],t,e)))continue}t[a]=s}}return t}},{}],257:[function(t,e,n){e.exports=function(t,e){if(e){e=(e=e.trim().replace(/^(\?|#|&)/,""))?"?"+e:e;var n=t.split(/[\?\#]/)[0];e&&/\:\/\/[^\/]*$/.test(n)&&(n+="/");var r=t.match(/(\#.*)$/);t=n+e,r&&(t+=r[0])}return t}},{}],258:[function(t,e,n){var r=t("./v1"),i=t("./v4"),o=i;o.v1=r,o.v4=i,e.exports=o},{"./v1":261,"./v4":262}],259:[function(t,e,n){for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=function(t,e){var n=e||0,i=r;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}},{}],260:[function(t,e,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],261:[function(t,e,n){var r=t("./lib/rng"),i=t("./lib/bytesToUuid"),o=r(),a=[1|o[0],o[1],o[2],o[3],o[4],o[5]],s=16383&(o[6]<<8|o[7]),u=0,l=0;e.exports=function(t,e,n){var r=e&&n||0,o=e||[],c=void 0!==(t=t||{}).clockseq?t.clockseq:s,f=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:l+1,p=f-u+(h-l)/1e4;if(p<0&&void 0===t.clockseq&&(c=c+1&16383),(p<0||f>u)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,l=h,s=c;var d=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;o[r++]=d>>>24&255,o[r++]=d>>>16&255,o[r++]=d>>>8&255,o[r++]=255&d;var m=f/4294967296*1e4&268435455;o[r++]=m>>>8&255,o[r++]=255&m,o[r++]=m>>>24&15|16,o[r++]=m>>>16&255,o[r++]=c>>>8|128,o[r++]=255&c;for(var y=t.node||a,_=0;_<6;++_)o[r+_]=y[_];return e||i(o)}},{"./lib/bytesToUuid":259,"./lib/rng":260}],262:[function(t,e,n){var r=t("./lib/rng"),i=t("./lib/bytesToUuid");e.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||i(a)}},{"./lib/bytesToUuid":259,"./lib/rng":260}],263:[function(t,e,n){e.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(n=0;n<t.length;n++)t[n]/=e;return t}},{}],264:[function(t,e,n){var r=t("query-string"),i=t("url-set-query"),o=t("object-assign"),a=t("./lib/ensure-header.js"),s=t("./lib/request.js"),u="application/json",l=function(){};e.exports=function(t,e,n){if(!t||"string"!=typeof t)throw new TypeError("must specify a URL");if("function"==typeof e&&(n=e,e={}),n&&"function"!=typeof n)throw new TypeError("expected cb to be undefined or a function");n=n||l;var c=(e=e||{}).json?"json":"text",f=(e=o({responseType:c},e)).headers||{},h=(e.method||"GET").toUpperCase(),p=e.query;return p&&("string"!=typeof p&&(p=r.stringify(p)),t=i(t,p)),"json"===e.responseType&&a(f,"Accept",u),e.json&&"GET"!==h&&"HEAD"!==h&&(a(f,"Content-Type",u),e.body=JSON.stringify(e.body)),e.method=h,e.url=t,e.headers=f,delete e.query,delete e.json,s(e,n)}},{"./lib/ensure-header.js":265,"./lib/request.js":267,"object-assign":268,"query-string":210,"url-set-query":257}],265:[function(t,e,n){e.exports=function(t,e,n){var r=e.toLowerCase();t[e]||t[r]||(t[e]=n)}},{}],266:[function(t,e,n){e.exports=function(t,e){return e?{statusCode:e.statusCode,headers:e.headers,method:t.method,url:t.url,rawRequest:e.rawRequest?e.rawRequest:e}:null}},{}],267:[function(t,e,n){var r=t("xhr"),i=t("./normalize-response");e.exports=function(t,e){delete t.uri;var n=!1;return"json"===t.responseType&&(t.responseType="text",n=!0),r(t,function(r,o,a){if(n&&!r)try{var s=o.rawRequest.responseText;a=JSON.parse(s)}catch(t){r=t}o=i(t,o),r?e(r,null,o):e(r,a,o)})}},{"./normalize-response":266,xhr:269}],268:[function(t,e,n){"use strict";function r(t){var e=Object.getOwnPropertyNames(t);return Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t))),e.filter(function(e){return i.call(t,e)})}var i=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var n,i,o=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),a=1;a<arguments.length;a++){n=arguments[a],i=r(Object(n));for(var s=0;s<i.length;s++)o[i[s]]=n[i[s]]}return o}},{}],269:[function(t,e,n){"use strict";function r(t,e,n){var r=t;return s(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=l(e,{uri:t}),r.callback=n,r}function i(t,e,n){return e=r(t,e,n),o(e)}function o(t){function e(t){return clearTimeout(c),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,o(t,_)}function n(){if(!l){var e;clearTimeout(c),e=t.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var n=_,r=null;return 0!==e?(n={body:function(){var t=void 0;if(t=a.response?a.response:a.responseText||function(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}(a),y)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:h,headers:{},url:f,rawRequest:a},a.getAllResponseHeaders&&(n.headers=u(a.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),o(r,n,n.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var r=!1,o=function(e,n,i){r||(r=!0,t.callback(e,n,i))},a=t.xhr||null;a||(a=t.cors||t.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var s,l,c,f=a.url=t.uri||t.url,h=a.method=t.method||"GET",p=t.body||t.data,d=a.headers=t.headers||{},m=!!t.sync,y=!1,_={body:void 0,headers:{},statusCode:0,method:h,url:f,rawRequest:a};if("json"in t&&!1!==t.json&&(y=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(n,0)},a.onload=n,a.onerror=e,a.onprogress=function(){},a.onabort=function(){l=!0},a.ontimeout=e,a.open(h,f,!m,t.username,t.password),m||(a.withCredentials=!!t.withCredentials),!m&&t.timeout>0&&(c=setTimeout(function(){if(!l){l=!0,a.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",e(t)}},t.timeout)),a.setRequestHeader)for(s in d)d.hasOwnProperty(s)&&a.setRequestHeader(s,d[s]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(a.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(a),a.send(p||null),a}var a=t("global/window"),s=t("is-function"),u=t("parse-headers"),l=t("xtend");e.exports=i,i.XMLHttpRequest=a.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:a.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){i["delete"===t?"del":t]=function(e,n,i){return n=r(e,n,i),n.method=t.toUpperCase(),o(n)}})},{"global/window":181,"is-function":189,"parse-headers":196,xtend:270}],270:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},{}],271:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=(r(t("regl")),r(t("keycode-js"))),a=t("uuid"),s=(t("gl-matrix"),t("lodash")),u=(t("intrinsic-scale"),r(t("../../common/emitter"))),l=t("../../common/common"),c=r(t("../../geometry"));n.default=(t=>{function e(t,e="fly",n={}){n=_(n),t=t||i({},d[y()]),(0,s.assign)(n,{color:{value:t.color.rgb().array().map(t=>t/255)}});const r=p[t.shape].create(n);n.shape=t,h.add(r,e,n)}const{regl:n,mouse:r,engineInteraction:f,reglGeometryActions:h}=t,p=(0,c.default)(n),d=(0,s.values)(l.SAMPLE_TYPES);let m=-1;const y=()=>(m+=1)%d.length,_=(t={})=>(0,s.assign)({ambientLightAmount:{value:l.REGL_CONST.AMBIENT_LIGHT},diffuseLightAmount:{value:l.REGL_CONST.DIFFUSE_LIGHT},scaleAmount:{value:l.REGL_CONST.SCALE},positionAmount:{value:0}},t);u.default.on("object:finished",t=>{e()}),u.default.on("object:clicked",({soundData:t,props:n,hit:r})=>{e(t,"static",n)}),e();const v=(t,e,n={})=>u.default.emit("object:clicked",{soundData:t.props.shape,props:_(i({position:t.position,positionAmount:{value:l.REGL_CONST.POSITION_AMOUNT}},t.props,n)),hit:e});return f.on("ray:click",t=>{const e=h.getObjectsAndPositions(),n=h.getObjectsAndPositions("static"),s=f.getHits(e,1),c=f.getHits(n,l.REGL_CONST.STATIC_SCALE);let p=0;for(p=0;p<c.length;p++)if(c[p]&&n[p].mesh.canInteract()){f.allowRemove()||l.keyboard.isDown(o.default.KEY_SHIFT)?u.default.emit("object:removed",h.removeAt(p,"static")):v(n[p],c[p],{uuid:(0,a.v4)(),position:n[p].position.map(t=>t+=.5*Math.random()-.25)});break}for(p=0;p<s.length;p++){const t=s[p];if(t){r.reset(),v(e[p],t,{uuid:e[p].uuid,props:i({},e[p].props)});break}}}),{}})},{"../../common/common":281,"../../common/emitter":285,"../../geometry":299,"gl-matrix":170,"intrinsic-scale":187,"keycode-js":191,lodash:193,regl:213,uuid:258}],272:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t("tone")),o=t("lodash"),a=t("../../common/common"),s=r(t("../../common/emitter")),u=r(t("../../common/sequence"));n.default=class extends u.default{constructor(t){super(t),this._samples={};for(let t in a.STATE.files)a.STATE.files[t].forEach(({soundUrl:e},n)=>{const r=`${t}:${n}`;this._samples[r]=e});this.samplePlayer=new i.default.Players(this._samples),this.samplePlayer.connect(i.default.Master),this._selectedIndexs=[],this._currentTime=0,this._previousIndex=0,this._containerEl=document.querySelector(".feedback-sequencer--beats"),this.SEQUENCE_STEPS_ARR.forEach((t,e)=>{const n=document.createElement("div");n.setAttribute("data-index",e),n.classList.add("sequencer-step"),n.addEventListener("click",t=>{const e=parseInt(t.currentTarget.dataset.index,10);let n=this._selectedIndexs.indexOf(e);n<0?(this._selectedIndexs.push(e),this._setClassOnStep(t.currentTarget,!0)):(this._selectedIndexs.splice(n,1),this._setClassOnStep(t.currentTarget,!1))}),this._containerEl.appendChild(n),this.SEQUENCE_DATA[e].el=n,this._setColorByIndex(e)}),s.default.on("object:clicked",({props:t,hit:e})=>{const n=t.shape.value,r=a.STATE.files[n],i=`${n}:${(0,o.random)(r.length-1)}`;this._selectedIndexs.length?this._selectedIndexs.forEach(e=>{this._addToSequence(this.SEQUENCE_DATA[e],t,i),this._setColorByIndex(e),this._setClassOnStep(this.SEQUENCE_DATA[e].el,!1)}):(this._addToSequence(this.SEQUENCE_DATA[this._currentIndex],t,i),this._setColorByIndex(this._currentIndex)),this._selectedIndexs.length=0}),s.default.on("object:removed",({uuid:t,props:e})=>{e.shape.value,this.SEQUENCE_DATA.forEach((e,n)=>{let r=e.sampleKeys.filter(e=>e.props.uuid!==t);r.length!==e.sampleKeys.length&&(e.sampleKeys=r,this._setColorByIndex(n,-1))})}),this.toggleActive(a.STATE.renderBeats),a.STATE.on("renderBeats",t=>this.toggleActive(t))}_onUpdate(t,e){this._currentIndex=e,this._isHidden||(this._selectedIndexs.indexOf(this._previousIndex)<0&&this._setClassOnStep(this.SEQUENCE_DATA[this._previousIndex].el,!1),this._setClassOnStep(this.SEQUENCE_DATA[this._currentIndex].el,!0),this.SEQUENCE_DATA[this._previousIndex].sampleKeys.forEach(t=>{t.props.ambientLightAmount.value=a.REGL_CONST.AMBIENT_LIGHT,t.props.ambientLightAmount.value=a.REGL_CONST.DIFFUSE_LIGHT,t.props.scaleAmount.value=a.REGL_CONST.SCALE})),0===this._currentIndex&&this._currentTime&&(a.STATE.sequenceDuration=t-this._currentTime,this._currentTime=t),this.SEQUENCE_DATA[this._currentIndex].sampleKeys.forEach(e=>{this._isHidden||(e.props.ambientLightAmount.value=1,e.props.diffuseLightAmount.value=1,e.props.scaleAmount.value=1+1*Math.abs(e.props.position[2])/a.REGL_CONST.MAX_Z);let n=.2*Math.random()+.2;this.samplePlayer.get(e.sampleKey).start(t,0,"32n",0,n)}),this._previousIndex=this._currentIndex}}},{"../../common/common":281,"../../common/emitter":285,"../../common/sequence":288,lodash:193,tone:254}],273:[function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(t("./beat-sequence"));e.exports=function(){new r.default}},{"./beat-sequence":272}],274:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("gl-matrix"),o=(t("uuid"),t("lodash")),a=(r(t("resl")),r(t("../../common/emitter"))),s=t("../../common/common");n.default=(e=>{function n(t,e="fly"){let n=r[e].splice(t,1)[0];return n.texture.destroy(),{uuid:n.geo.uuid,props:n.props}}const r={fly:[],static:[]},u=[[-.5,-.5,0],[-.5,-.5,0],[.5,.5,0],[.5,.5,0]];let l=0;const c=t=>t.geo.draw({texture:t.texture,diffuseLightAmount:t.props.diffuseLightAmount.value,positionAmount:t.props.positionAmount.value,scaleAmount:t.props.scaleAmount.value,ambientLightAmount:t.props.ambientLightAmount.value,color:t.props.color.value}),f=t=>{const e=s.STATE.files[t];return e[(0,o.random)(e.length-1)]},h=(e,n)=>t("resl")({manifest:{soundImg:{type:"image",src:e}},onDone:n});return{getObjectsAndPositions:function(t="fly"){return r[t].map(t=>({mesh:t.geo,uuid:t.geo.uuid,framesRendered:t.geo.framesRendered,position:i.mat4.getTranslation(i.vec3.create(),t.geo.modelMatrix),props:t.props}))},update:function(){for(let t=r.static.length-1;t>=0;t--){let e=r.static[t];e.geo.framesRendered++,c(e)}for(let t=r.fly.length-1;t>=0;t--){let e=r.fly[t];e.geo.framesRendered++,i.mat4.translate(e.geo.modelMatrix,e.geo.modelMatrix,[e.increment.x,e.increment.y,e.increment.z]),c(e),e.geo.modelMatrix[14]>0&&(a.default.emit("object:finished",e.props.shape),n(t))}},add:function(t,n,o={}){const{shape:a}=o,c=f(a.value),p=.6*s.STATE.sequenceDuration;h(c.imageUrl,a=>{const c=e.texture(a.soundImg),f=(s.SEQUENCE_LENGTH,s.STATE.bmp,s.STATE.fps,i.mat4.getTranslation(i.vec3.create(),t.modelMatrix)),h={x:f[0]/(s.STATE.fps*p)*-1,y:f[1]/(s.STATE.fps*p)*-1,z:Math.abs(f[2])/(s.STATE.fps*p)};"fly"===n?i.mat4.translate(t.modelMatrix,t.modelMatrix,u[l]):"static"===n&&i.mat4.scale(t.modelMatrix,t.modelMatrix,[s.REGL_CONST.STATIC_SCALE,s.REGL_CONST.STATIC_SCALE,s.REGL_CONST.STATIC_SCALE]),r[n].push({geo:t,increment:h,texture:c,props:o}),l=(l+1)%u.length})},removeAt:n}})},{"../../common/common":281,"../../common/emitter":285,"gl-matrix":170,lodash:193,resl:214,uuid:258}],275:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=t("../common/common"),o=r(t("choo/html")),a=(r(t("sono")),r(t("./beats/beats"))),s=r(t("./music/music"));e.exports=function(t){return i.IS_DEV?document.querySelector(".app"):STATE.container,document.body.appendChild(o.default`
        <div class="feedback-sequencer">
          <div class="feedback-sequencer--beats"></div>
          <div class="feedback-sequencer--music"></div>
        </div>
      `),{beats:(0,a.default)(),music:(0,s.default)(t)}}},{"../common/common":281,"./beats/beats":273,"./music/music":280,"choo/html":21,sono:219}],276:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=((t={type:"audio/webm"})=>{function e(t){}var n=[];let r,i;const o=t=>{n.push(t.data)},a=t=>{e()},s=()=>{e(i.state)},u=()=>{e(i.state);var o=new Blob(n,{type:`${t.type}`});n=[],r(o)},l=()=>{e(i.state)},c=()=>{e(i.state)},f=t=>{e()},h=()=>{i&&(i.addEventListener("dataavailable",o),i.addEventListener("error",a),i.addEventListener("start",s),i.addEventListener("stop",u),i.addEventListener("pause",l),i.addEventListener("resume",c),i.addEventListener("warning",f))},p=()=>{i&&(i.removeEventListener("dataavailable",f),i.removeEventListener("error",a),i.removeEventListener("start",s),i.removeEventListener("stop",u),i.removeEventListener("pause",l),i.removeEventListener("resume",c),i.removeEventListener("warning",f))};return{addStream:function(e,n={}){p(),i=new MediaRecorder(e,Object.assign({},t,n)),h()},start:function(t){i?i.start(0):e()},stop:function(t){r=t,"recording"===i.state&&i.stop()}}})},{}],277:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});r(t("angle-normals"));var i=r(t("primitive-cylinder")),o=(t("../../geometry/base"),t("../../geometry/glsl"),t("../../common/common"),t("gl-matrix")),a=r(t("../../lib/observable"));n.default=(e=>{const{regl:n}=e;t("regl-line2d")(n);let r=class{constructor(t,e={}){this.controller=(0,a.default)({pitch:0}),this.modelMatrix=o.mat4.create(),this._baseTr=o.vec3.fromValues(-c/2,0,s),o.mat4.translate(this.modelMatrix,this.modelMatrix,this._baseTr),this.geo=t,this._tr=o.vec3.create(),this._tempPosition=null}updatePosition(t){t[0]*=-1,t[1]*=-1,this._tempPosition=t,o.vec3.add(t,t,this._startPosition),o.mat4.fromTranslation(this.modelMatrix,t),this._updateController()}_updateController(){this.controller.pitch=this._tempPosition[1]}onDown(){this._startPosition=this.position}get startPosition(){return this._startPosition}get position(){return o.mat4.getTranslation(o.vec3.create(),this.modelMatrix)}draw(){return n({vert:"\n      precision lowp float;\n    uniform mat4 projection, view, model;\n    attribute vec3 position;\n    attribute vec3 normal;\n    attribute vec2 uvs;\n\n    varying vec3 vColor;\n\n    uniform float tick;\n\n          mat3 rotateX(float rad) {\n        float c = cos(rad);\n        float s = sin(rad);\n        return mat3(\n            1.0, 0.0, 0.0,\n            0.0, c, s,\n            0.0, -s, c\n        );\n    }\n\n          mat3 rotateZ(float rad) {\n          float c = cos(rad);\n          float s = sin(rad);\n          return mat3(\n              c, s, 0.0,\n              -s, c, 0.0,\n              0.0, 0.0, 1.0\n          );\n      }\n\n\n\n    const float DEG_TO_RAD = 3.141592653589793 / 180.0;\n    const float Z_ROT = 90. * DEG_TO_RAD;\n\n    void main () {\n      vec3 pos = position;\n      vec3 norm = normal;\n      float xRad = (cos(tick * 0.015) - 0.5) * 8.  * DEG_TO_RAD;\n      pos = rotateZ(Z_ROT) * pos;\n      pos = rotateX(xRad) * pos;\n      norm = rotateZ(Z_ROT) * norm;\n      norm = rotateX(xRad) * norm;\n      vColor = norm;\n      gl_Position = projection * view * model * vec4(pos, 1);\n    }\n    ",frag:"\n\n          precision lowp float;\n          varying vec3 vColor;\n\n          void main () {\n            gl_FragColor = vec4(vColor, 1.);\n          }\n\n    ",uniforms:{model:n.prop("modelMatrix"),view:n.context("view"),tick:n.context("tick"),projection:n.context("projection")},attributes:{position:n.prop("positions"),uvs:n.prop("uvs"),normal:n.prop("normals")},elements:n.prop("cells")})({modelMatrix:this.modelMatrix,positions:this.geo.positions,uvs:this.geo.uvs,normals:this.geo.normals,cells:this.geo.cells})}};const s=-2,u=6,l=50,c=2,f=Math.floor(l/2);return{createFromAudioBuffer:function(t,e={}){const n=t.getChannelData(0);var o=n.length;const a=[],s=Math.floor(o/l),h=1/o;for(var p=0;p<o;p+=s)a.push([h*p,Math.min(Math.abs(n[Math.min(p,o-1)])*u,12),h*p]);const d=(0,i.default)(.2,.2,c,f,3,a);return new r(d,{points:[]})}}})},{"../../common/common":281,"../../geometry/base":294,"../../geometry/glsl":298,"../../lib/observable":303,"angle-normals":1,"gl-matrix":170,"primitive-cylinder":201,"regl-line2d":212}],278:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=r(t("./music-geometry")),o=(t("../../common/common"),t("gl-matrix")),a=t("lodash");r(t("../../geometry"));e.exports=function(t){const{regl:e,engineInteraction:n,mouse:r,on:s,off:u}=t,l=[],c=(0,i.default)(t);n.on("ray:click",t=>{});let f=[];return n.on("ray:down",t=>{(f=(0,a.compact)(n.getHits(l).map((t,e)=>t?l[e]:null))).forEach(t=>t.onDown())}),n.on("ray:up",t=>{f.length=0}),n.on("ray:move",t=>{f.forEach(e=>e.updatePosition(o.vec3.sub(o.vec3.create(),t.startPosition,o.vec3.fromValues(t.x/window.innerWidth*2-1,2*(1-t.y/window.innerHeight)-1,0))))}),s("update",()=>{l.forEach(t=>t.draw())}),{add:function(t){const e=c.createFromAudioBuffer(t);return l.push(e),e}}}},{"../../common/common":281,"../../geometry":299,"./music-geometry":277,"gl-matrix":170,lodash:193}],279:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t("tone")),o=t("../../common/common"),a=r(t("../../common/sequence"));n.default=class extends a.default{constructor(t){super(t);const{sequenceLength:e}=this.options;this.SEQUENCE_DATA=this.newSequenceData(e),this.samplePlayer=new i.default.Players,this.samplePlayer.connect(i.default.Master),this.pitchShift=new i.default.PitchShift({windowSize:.1,feedback:0,wet:1}),this._containerEl=document.querySelector(".feedback-sequencer--music"),this._createSequenceEls(),this._samples=[],this.toggleActive(o.STATE.renderMusic),o.STATE.on("renderMusic",t=>this.toggleActive(t))}_createSampleKey(){return this._samples.length}_onUpdate(t,e){this._currentIndex=e,this._isHidden||(this._setClassOnStep(this.SEQUENCE_DATA[this._previousIndex].el,!1),this._setClassOnStep(this.SEQUENCE_DATA[this._currentIndex].el,!0)),this.SEQUENCE_DATA[this._currentIndex].sampleKeys.forEach(t=>{this.samplePlayer.get(t.sampleKey).start()}),this._previousIndex=this._currentIndex}add(t,e){const n={sampleKey:this._createSampleKey()};this._samples.push(n),this.samplePlayer.add(n.sampleKey,t),this._addToSequence(this.SEQUENCE_DATA[this._currentIndex],e,n.sampleKey),this._setColorByIndex(this._currentIndex),e.on("pitch",t=>{})}}},{"../../common/common":281,"../../common/sequence":288,tone:254}],280:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=r(t("sono")),o=r(t("sono/effects")),a=r(t("./music-regl")),s=r(t("./mediaRecord")),u=r(t("./music-sequence")),l=t("../../common/common");e.exports=function(t){function e(t){h.addStream(t);const e=i.default.create({data:t});p.push({sound:e,analyzer:e.effects.add(o.default.analyser({fftSize:128,useFloats:!0}))}),e.volume=0}function n(){const{sound:t,analyzer:e}=d();t.volume=0,h.start(),m=setInterval(()=>{e.getPitch(t=>{t.hertz>0&&y.push(t)})},180)}function r(){const{sound:t}=d();t.volume=0,clearInterval(m),h.stop(t=>{const e=new FileReader;e.onloadend=(()=>{i.default.context.decodeAudioData(e.result).then(t=>{const{controller:e}=c.add(t);f.add(t,e),t=null})}),e.readAsArrayBuffer(t)})}const c=new a.default(t),f=new u.default({sequenceLength:64}),h=(0,s.default)({type:"audio/webm"});let p=[];const d=()=>p[p.length-1];let m;var y=[];return l.IS_DEV&&navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(function(t){e(t)}).catch(function(t){}),l.GUI_O.startRecord=(()=>{n()}),l.GUI_O.stopRecord=(()=>{r()}),{addStream:e,start:n,stop:r}}},{"../../common/common":281,"./mediaRecord":276,"./music-regl":278,"./music-sequence":279,sono:219,"sono/effects":249}],281:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.SAMPLE_TYPES=n.REGL_CONST=n.STATE=n.brightestColor=n.colors=n.getColor=n.SEQUENCE_LENGTH=n.GUI_O=n.keyboard=n.IS_DEV=void 0;var i=r(t("color")),o=r(t("tone")),a=(r(t("./detector")),r(t("./emitter"))),s=t("lodash"),u=r(t("nice-color-palettes")),l=r(t("../lib/observable")),c=r(t("./keyboard-proxy"));const f=t("dat.gui/build/dat.gui.js"),h=n.IS_DEV=!1,p=(n.keyboard=c.default,n.GUI_O={toggleViews:()=>{m.renderBeats=!m.renderBeats,m.renderMusic=!m.renderMusic},startRecord:s.noop,stopRecord:s.noop,makeDrone:s.noop});if(h){const t=new f.GUI;t.add(p,"toggleViews"),t.add(p,"startRecord"),t.add(p,"stopRecord"),t.add(p,"makeDrone")}n.SEQUENCE_LENGTH=32;const d=n.getColor=(()=>(0,s.sample)(u.default)),m=(n.colors=d(),n.brightestColor=((t,e=!1)=>t.map(t=>(0,i.default)(t)).sort((t,e)=>e.rgbNumber()>t.rgbNumber()).map(t=>e?t.hex():t)),n.STATE=(0,l.default)({files:{},fps:60,bmp:o.default.Transport.bpm.value,renderBeats:!0,renderMusic:!1,sequenceDuration:4}));let y=window.innerWidth/window.innerHeight;n.REGL_CONST={MAX_X:40*y,MAX_Y:40,MAX_Z:40,MAX_Z_HALF:20,AMBIENT_LIGHT:.7,DIFFUSE_LIGHT:.5,POSITION_AMOUNT:.1,SCALE:1,STATIC_SCALE:.5};window.addEventListener("resize",()=>window.innerWidth/window.innerHeight),window.addEventListener("focus",()=>a.default.emit("window:focus")),window.addEventListener("blur",()=>a.default.emit("window:blur"));n.SAMPLE_TYPES={kick:{value:"kick",names:["kick"],shape:"box",color:(0,i.default)("#2427E0").darken(.3*Math.random()).lighten(.3*Math.random())},tom:{value:"tom",names:["tom","bongo"],shape:"capsule",color:(0,i.default)("#DA24E0").darken(.3*Math.random()).lighten(.3*Math.random())},conga:{value:"conga",names:["conga","clave"],shape:"sphere",color:(0,i.default)("#24CEE0").darken(.3*Math.random()).lighten(.3*Math.random())},hihat:{value:"hihat",names:["hi hat","hh","snap","agogo","cowbell"],shape:"chevron",color:(0,i.default)("#E04D24").darken(.3*Math.random()).lighten(.3*Math.random())},snare:{value:"snare",names:["snare","rim"],shape:"torus",color:(0,i.default)("#24E027").darken(.3*Math.random()).lighten(.3*Math.random())},cymbal:{value:"cymbal",names:["cymbal","ride","crash"],shape:"arc",color:(0,i.default)("#E0E024").darken(.3*Math.random()).lighten(.3*Math.random())}}},{"../lib/observable":303,"./detector":282,"./emitter":285,"./keyboard-proxy":286,color:34,"dat.gui/build/dat.gui.js":163,lodash:193,"nice-color-palettes":194,tone:254}],282:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),window.Detector={};var r=window.Detector,i=navigator.userAgent||navigator.vendor||window.opera;r.isIpad=!!i.match(/iPad/i),r.isIphone=!!i.match(/iPhone/i),r.isIpod=!!i.match(/iPod/i),r.isIOS=r.isIpad||r.isIphone||r.isIpod,r.isIOS5=!!i.match(/OS 5(_\d)+ like Mac OS X/i),r.isIOS6=!!i.match(/OS 6(_\d)+ like Mac OS X/i),r.isIOS7=!!i.match(/OS 7(_\d)+ like Mac OS X/i),r.isIOS8=!!i.match(/OS 8(_\d)+ like Mac OS X/i),r.isIOS9=!!i.match(/OS 9(_\d)+ like Mac OS X/i),r.isIOS11=!!i.match(/OS 11(_\d)+ like Mac OS X/i),r.isIOS12=!!i.match(/OS 12(_\d)+ like Mac OS X/i),r.IOSVersion=(()=>{if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(t[1],10)}return!1})(),r.isAndroid=!!i.match(/Android/i),r.isAndroidOld=!!(r.isAndroid&&parseFloat(i.slice(i.indexOf("Android")+8))<4),r.isAndroidStock=(()=>{var t=new RegExp(/AppleWebKit\/([\d.]+)/),e=null===t.exec(i)?null:parseFloat(t.exec(i)[1]);return r.isAndroid&&null!==e&&e<537})(),r.isTabvar=(r.isAndroid||r.isIOS)&&/ipad|android 3|sch-i800|playbook|tablet|kindle|gt-p1000|sgh-t849|shw-m180s|a510|a511|a100|dell streak|silk/i.test(i.toLowerCase()),r.isMobile=(r.isAndroid||r.isIOS)&&/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(i.toLowerCase()),r.isDesktop=!r.isTabvar&&!r.isMobile,r.device=r.isTabvar?"tablet":r.isMobile?"mobile":"desktop",r.IEVersion=(()=>{var t=-1;return"Microsoft Internet Explorer"===navigator.appName?null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i)&&(t=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i)&&(t=parseFloat(RegExp.$1)),t})(),r.isIE=r.IEVersion>-1,r.isIE11=11===r.IEVersion,r.isIE11Down=r.IEVersion<=11,r.isIE11Up=r.IEVersion>=11,r.isIE10=10===r.IEVersion,r.isIE10Down=r.IEVersion<=10,r.isIE10Up=r.IEVersion>=10,r.isIE9=9===r.IEVersion,r.isIE9Down=r.IEVersion<=9,r.isIE9Up=r.IEVersion>=9,r.isIE8=8===r.IEVersion,r.isIE8Down=r.IEVersion<=8,r.isIE8Up=r.IEVersion>=8,r.isFirefox=i.toLowerCase().indexOf("firefox")>-1,r.isChrome=(()=>{var t=window.chrome,e=window.navigator.vendor;return null!==t&&void 0!==t&&"Google Inc."===e})(),r.isSafari=/^((?!chrome).)*safari/i.test(i),r.hasHistory=!(!history||!history.pushState),r.hasMouseMove=r.isDesktop,r.hasTouch="ontouchstart"in window||"onmsgesturechange"in window,r.hasFullscreen=(()=>{var t=document.body;return!!(t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen)})(),r.transitionEnd=(()=>{var t,e=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var r in n)if(void 0!==e.style[r]){t=n[r];break}return t})(),r.visibilityChangeEventName=void 0,r.hiddenPropertyName=void 0,void 0!==document.hidden?(r.hiddenPropertyName="hidden",r.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(r.hiddenPropertyName="mozHidden",r.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(r.hiddenPropertyName="msHidden",r.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden&&(r.hiddenPropertyName="webkitHidden",r.visibilityChangeEventName="webkitvisibilitychange"),r.pixelRatio=window.devicePixelRatio||1,r.isRetina=r.pixelRatio>1,r.webp=r.isChrome&&!r.isSafari,r.hasCanvas=!!window.CanvasRenderingContext2D,r.hasWebgl=(()=>{try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}})(),n.default=window.Detector},{}],283:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(t,e=.1){this.easing=e,this._value=t,this._targetValue=t}update(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}setTo(t){this._targetValue=this._value=t}add(t){this._targetValue+=t}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){}set value(t){this._targetValue=t}get value(){return this._value}get targetValue(){return this._targetValue}get limitMin(){return this._min}get limitMax(){return this._max}}},{}],284:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lodash");n.default=class{constructor(){this.listeners=new Map}on(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}off(t,e){let n,i=this.listeners.get(t);return!!(i&&i.length&&(n=i.reduce((t,n,i)=>(0,r.isFunction)(n)&&n===e?t=i:t,-1))>-1)&&(i.splice(n,1),this.listeners.set(t,i),!0)}emit(t,...e){let n=this.listeners.get(t);return!(!n||!n.length||(n.forEach(t=>{t(...e)}),0))}}},{lodash:193}],285:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(t("./emitter-base"));n.default=new r.default},{"./emitter-base":284}],286:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0});var o,a=r(t("../lib/observable")),s=(r(t("keycode-js")),t("core-decorators"));let u=(o=class{constructor(){const t={};new Array(224).fill().forEach((e,n)=>t[n]=!1),this.keyCodes=(0,a.default)(t),window.addEventListener("keyup",this._keyUp),window.addEventListener("keydown",this._keyDown)}_keyUp(t){this.keyCodes[t.keyCode]=!1}_keyDown(t){this.keyCodes[t.keyCode]=!0}isDown(t){return this.keyCodes[t]}},i(o.prototype,"_keyUp",[s.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_keyUp"),o.prototype),i(o.prototype,"_keyDown",[s.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_keyDown"),o.prototype),o);n.default=new u},{"../lib/observable":303,"core-decorators":37,"keycode-js":191}],287:[function(t,e,n){"use strict";t("gl-matrix");var r=function(t){return t&&t.__esModule?t:{default:t}}(t("keycode-js")),i=t("./common");e.exports=function(t,e){let n,o,a,s=!1,u=!1;const l=document.createElement("div");l.style.position="absolute",l.style.display="none",l.classList.add("mesh-timer"),i.IS_DEV&&t.appendChild(l);const c=()=>{a=0,o=0,s=!1,u=!1,window.removeEventListener("click",f),clearInterval(n),clearTimeout(void 0)},f=()=>{o++};let h=0,p=0;window.addEventListener("mousemove",t=>{(Math.abs(t.pageX-h)>=1||Math.abs(t.pageY-p)>=1)&&(m(),c(),c(),n=setInterval(()=>{a<850?a+=10:(s=!0,d(),window.addEventListener("click",f))},10)),n&&(l.style.left=`${t.pageX-5}px`,l.style.top=`${t.pageY-5}px`),h=t.pageX,p=t.pageY});const d=()=>l.style.display="block",m=()=>l.style.display="none";return i.keyboard.keyCodes.on(r.default.KEY_SHIFT,t=>t?d():m()),{reset:c,getClicks:()=>.5*o,isStill:()=>s}}},{"./common":281,"gl-matrix":170,"keycode-js":191}],288:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;r(t("color"));var i=r(t("tone")),o=(t("lodash"),t("./common")),a=r(t("./emitter"));n.default=class{constructor(t={}){this.options=Object.assign({},{sequenceLength:o.SEQUENCE_LENGTH},t);const{sequenceLength:e}=this.options;this.SEQUENCE_DATA=this.newSequenceData(e),this.SEQUENCE_STEPS_ARR=new Array(e).fill(0).map((t,e)=>e),this._currentTime=0,this._previousIndex=0,this.loop=new i.default.Sequence(this._onUpdate.bind(this),this.SEQUENCE_STEPS_ARR,"16n"),a.default.on("window:blur",()=>this.loop.stop()),a.default.on("window:focus",()=>this.loop.start()),i.default.Transport.start(),this.loop.start()}newSequenceData(t){return new Array(t).fill(0).map(t=>({el:null,color:(0,o.brightestColor)(o.colors)[0],sampleKeys:[]}))}toggleActive(t){t?this._show():this._hide()}_pause(){this.loop.stop(this.loop.sampleTime)}_resume(){this.loop.start(this.loop.sampleTime)}_show(){this._isHidden=!1,this._containerEl.classList.remove("hide")}_hide(){this._isHidden=!0,this._containerEl.classList.add("hide")}_createSequenceEls(){this.SEQUENCE_STEPS_ARR.forEach((t,e)=>{const n=document.createElement("div");n.setAttribute("data-index",e),n.classList.add("sequencer-step"),n.addEventListener("click",t=>{const e=parseInt(t.currentTarget.dataset.index,10);let n=this._selectedIndexs.indexOf(e);n<0?(this._selectedIndexs.push(e),this._setClassOnStep(t.currentTarget,!0)):(this._selectedIndexs.splice(n,1),this._setClassOnStep(t.currentTarget,!1))}),this._containerEl.appendChild(n),this.SEQUENCE_DATA[e].el=n,this._setColorByIndex(e)})}_setClassOnStep(t,e=!1){t.classList[e?"add":"remove"]("active")}_addToSequence(t,e,n){t.sampleKeys.push({props:e,sampleKey:n})}_setColorByIndex(t,e=1){this.SEQUENCE_DATA[t].el.style.backgroundColor=this.SEQUENCE_DATA[t].color.darken(.25*e*this.SEQUENCE_DATA[t].sampleKeys.length).hsl().string()}_onUpdate(t,e){}pause(){}resume(){}add(){}}},{"./common":281,"./emitter":285,color:34,lodash:193,tone:254}],289:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("gl-matrix"),o=r(t("./touch-events")),a=t("lodash"),s=r(t("camera-picking-ray")),u=r(t("ray-sphere-intersection")),l=r(t("../common/emitter-base"));t("../common/common");n.default=((t,e,n)=>{const r={startPosition:i.vec3.create(),x:0,y:0,ro:[0,0,0],rd:[0,0,0]},c=new l.default,f=t=>{const o=i.mat4.multiply([],e,n),a=i.mat4.invert([],o),u=window.innerHeight,l=window.innerWidth,c=[t.pageX,t.pageY],f=[0,0,l,u];r.x=t.pageX,r.y=t.pageY,(0,s.default)(r.ro,r.rd,c,f,a)};let h=!1;window.addEventListener("mousedown",t=>{f(t),i.vec3.set(r.startPosition,r.x/window.innerWidth*2-1,2*(1-r.y/window.innerHeight)-1,0),h=!0,c.emit("ray:down",r)});const p=t=>{f(t),h=!1,c.emit("ray:up",r)};window.addEventListener("mouseleave",p),window.addEventListener("mouseup",p),window.addEventListener("mousemove",(0,a.throttle)(t=>{h&&(f(t),c.emit("ray:move",r))}),180),window.addEventListener("click",t=>{f(t),c.emit("ray:click",r)});const d=(0,o.default)(c);return d.on("touch:tap",t=>{f(t.srcEvent)}),d.on("touch:doubletap",t=>{f(t.srcEvent),c.emit("ray:click",r)}),{allowRemove:()=>t.isStill()||"doubletap"===d.tapEvent().type,getHits:(e,n=1)=>e.map(({position:t})=>t).map(e=>(0,u.default)([],r.ro,r.rd,e,(1.45+t.getClicks())*n)),on:function(t,e){c.on(t,e)},off:function(t,e){c.off(t,e)}}})},{"../common/common":281,"../common/emitter-base":284,"./touch-events":291,"camera-picking-ray":18,"gl-matrix":170,lodash:193,"ray-sphere-intersection":211}],290:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("regl")),o=(t("uuid"),t("gl-matrix")),a=(t("lodash"),t("intrinsic-scale"),r(t("camera-picking-ray")),r(t("ray-sphere-intersection")),r(t("../common/ease-number"))),s=r(t("../common/mouse")),u=r(t("../common/emitter")),l=t("../common/common"),c=r(t("../audio/beats/beat-engine")),f=r(t("../audio/beats/geometry-actions")),h=r(t("./engine-interaction"));n.default=(t=>{let e;e=l.IS_DEV?(0,i.default)({extensions:["angle_instanced_arrays"],container:t}):t;let n=o.mat4.create();const r=o.vec3.fromValues(0,0,1),p=o.mat4.create(),d=(0,f.default)(e),m=(0,s.default)(l.IS_DEV?document.body:t,e),y=(0,h.default)(m,n,p);(0,c.default)({regl:e,mouse:m,reglGeometryActions:d,engineInteraction:y}),new a.default(0,.001),new a.default(0,.001);let _=0;const v=e({context:{projection:({viewportWidth:t,viewportHeight:e})=>(o.mat4.perspective(n,Math.PI/2.1,t/e,.001,l.REGL_CONST.MAX_Z),n),tick:({tick:t})=>l.IS_DEV?t:_,view:()=>o.mat4.lookAt(p,r,[0,0,-l.REGL_CONST.MAX_Z],[0,1,0])}});let g=!0;u.default.on("window:blur",()=>g=!1),u.default.on("window:focus",()=>g=!0);const b=()=>{g&&v(()=>{l.STATE.renderBeats&&d.update(),l.STATE.renderMusic&&w.update.length&&w.update.forEach(t=>t())})};l.IS_DEV&&e.frame(function(){e.clear({color:[0,0,0,1]}),b()});const w={update:[]};return{regl:e,engineInteraction:y,mouse:m,setupCamera:v,update:function(){e.clear({color:[0,0,0,1]}),b(),_++},on:function(t,e){w[t]=w[t]||[],w[t].push(e)},off:function(t,e){w[t].splice(w[t].indexOf(e),1)},destroy:function(){e.destroy()}}})},{"../audio/beats/beat-engine":271,"../audio/beats/geometry-actions":274,"../common/common":281,"../common/ease-number":283,"../common/emitter":285,"../common/mouse":287,"./engine-interaction":289,"camera-picking-ray":18,"gl-matrix":170,"intrinsic-scale":187,lodash:193,"ray-sphere-intersection":211,regl:213,uuid:258}],291:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t&&t.__esModule}(t("hammerjs"));n.default=(t=>{const e=new Hammer.Manager(window,{recognizers:[[Hammer.Tap,{event:"doubletap",taps:2,interval:350}],[Hammer.Pinch,{enable:!0}]]});e.on("pinch",e=>{t.emit("touch:pinch",e)});let n;e.on("tap",e=>{n=e,t.emit("touch:tap",e)}),e.on("doubletap",e=>{n=e,t.emit("touch:doubletap",e)});return{tapEvent:()=>n||{},on:function(e,n){t.on(e,n)},off:function(e,n){t.off(e,n)}}})},{hammerjs:183}],292:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}r(t("proxy-polyfill"));var i=r(t("tone")),o=r(t("path-parse")),a=r(t("xhr-request")),s=(t("intrinsic-scale"),t("lodash")),u=t("./common/common"),l=r(t("./audio")),c=r(t("./core/engine"));window.DesktopSequencer=(()=>{return{start:function(t,e,n,r,f={}){if(!(u.IS_DEV||t&&e&&n&&r))throw new Error("Supply arguments: regl, cb, audioPath, containerEl.\n        audioPath should be in the format of audio.json\n        ");(0,a.default)(n||"build/audio.json",{json:!0},(n,a)=>{if(n)throw n;u.STATE.containerEl=r;const h=a.files.split("\n");(0,s.keys)(u.SAMPLE_TYPES).forEach(t=>u.STATE.files[t]=[]),h.forEach(t=>{const e=t.split("/")[1];u.STATE.files[e]=u.STATE.files[e]||[];const{names:n}=u.SAMPLE_TYPES[e];n.forEach(n=>{if(t.toLowerCase().indexOf(n)>-1){const{dir:n,name:r}=(0,o.default)(t);u.STATE.files[e].push({soundUrl:t,imageUrl:`${n}/${r}.png`})}})});for(let t in f)u.STATE[t]=f[t];const p=(0,c.default)(u.IS_DEV?document.querySelector(".app"):t),d=(0,l.default)(p);u.IS_DEV||e({engine:p,state:u.STATE,music:d,Tone:i.default})})}}})()},{"./audio":275,"./common/common":281,"./core/engine":290,"intrinsic-scale":187,lodash:193,"path-parse":197,"proxy-polyfill":209,tone:254,"xhr-request":264}],293:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t&&t.__esModule}(t("angle-normals"));var r=t("./base");t("./glsl"),t("../common/common"),t("gl-matrix");n.default=(e=>{const n=t("geo-arc")({cellSize:3,x:0,y:0,z:0,startRadian:0,endRadian:6.28,innerRadius:.7,outerRadius:1,numBands:2,numSlices:6,drawOutline:!1});let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"angle-normals":1,"geo-arc":169,"gl-matrix":170}],294:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BaseMesh=n.reglGeo=n.torusSettings=void 0;var r=t("./glsl"),i=t("../common/common"),o=t("gl-matrix"),a=t("uuid");const s=t("angle-normals");n.torusSettings=(()=>({majorSegments:3,minorSegments:6})),n.reglGeo=((t,e)=>({vert:r.VERT,frag:r.FRAG,uniforms:{model:t.this("modelMatrix"),view:t.context("view"),projection:t.context("projection"),ambientLightAmount:t.prop("ambientLightAmount"),diffuseLightAmount:t.prop("diffuseLightAmount"),scaleAmount:t.prop("scaleAmount"),positionAmount:t.prop("positionAmount"),color:t.prop("color"),tick:t.context("tick"),randomSpeed:t.this("_randomSpeed"),rotationAxis:[Math.round(Math.random()),Math.round(Math.random()),Math.round(Math.random())],lightDir:[.39,.87,.29]},attributes:{position:e.positions,uvs:e.uvs,normal:e.normals||t.this("_normals")},elements:e.cells}));n.BaseMesh=class{constructor(t,e={}){if(this.framesRendered=0,this.geo=t,this._randomSpeed=.8*Math.random()+.2,this.uuid=e.uuid||(0,a.v4)(),this._normals=t.normals||s(t.cells,t.positions),this.modelMatrix=o.mat4.create(),e.position)o.mat4.translate(this.modelMatrix,this.modelMatrix,e.position);else{const t=Math.random()*i.REGL_CONST.MAX_X*2-i.REGL_CONST.MAX_X,e=Math.random()*i.REGL_CONST.MAX_Y*2-i.REGL_CONST.MAX_Y;o.mat4.translate(this.modelMatrix,this.modelMatrix,[t,e,-i.REGL_CONST.MAX_Z])}}canInteract(){return this.framesRendered>2*i.STATE.fps}}},{"../common/common":281,"./glsl":298,"angle-normals":1,"gl-matrix":170,uuid:258}],295:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});(function(t){t&&t.__esModule})(t("angle-normals")),t("../common/common");var r=t("./base");t("./glsl"),t("gl-matrix");n.default=(e=>{const n=t("primitive-cube")(1,1,1,2,2,2);let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"angle-normals":1,"gl-matrix":170,"primitive-cube":200}],296:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t&&t.__esModule}(t("angle-normals"));var r=t("./base");t("./glsl"),t("../common/common"),t("gl-matrix");n.default=(e=>{const n=t("primitive-capsule")(1,1,4,4);let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"angle-normals":1,"gl-matrix":170,"primitive-capsule":199}],297:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t&&t.__esModule}(t("angle-normals"));var r=t("./base");t("./glsl"),t("../common/common"),t("gl-matrix");n.default=(e=>{const n=t("primitive-torus")(r.torusSettings);let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"angle-normals":1,"gl-matrix":170,"primitive-torus":207}],298:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.VERT="\n    precision lowp float;\n    uniform mat4 projection, view, model;\n    attribute vec3 position;\n    attribute vec3 normal;\n    attribute vec2 uvs;\n\n    uniform vec3 rotationAxis;\n    uniform float tick;\n    uniform float randomSpeed;\n    //uniform sampler2D texture;\n\n    uniform vec3 lightDir;\n    uniform vec3 color;\n    uniform float ambientLightAmount;\n    uniform float diffuseLightAmount;\n    uniform float scaleAmount;\n    uniform float positionAmount;\n\n    varying vec3 vColor;\n    varying vec2 vTextureCoord;\n    varying vec3 vNormal;\n    varying vec3 vPosition;\n\n    const float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\n    mat3 rotateX(float rad) {\n        float c = cos(rad);\n        float s = sin(rad);\n        return mat3(\n            1.0, 0.0, 0.0,\n            0.0, c, s,\n            0.0, -s, c\n        );\n    }\n\n      mat3 rotateY(float rad) {\n          float c = cos(rad);\n          float s = sin(rad);\n          return mat3(\n              c, 0.0, -s,\n              0.0, 1.0, 0.0,\n              s, 0.0, c\n          );\n      }\n\n      mat3 rotateZ(float rad) {\n          float c = cos(rad);\n          float s = sin(rad);\n          return mat3(\n              c, s, 0.0,\n              -s, c, 0.0,\n              0.0, 0.0, 1.0\n          );\n      }\n\n\n    void main () {\n      vTextureCoord           = uvs;\n      vec3 pos = position;\n      vec3 norm = normal;\n      pos *= scaleAmount;\n      norm *= scaleAmount;\n\n      float xRad = tick * randomSpeed * rotationAxis.x * DEG_TO_RAD;\n      float yRad = tick * randomSpeed * rotationAxis.y * DEG_TO_RAD;\n      float zRad = tick * randomSpeed * rotationAxis.z * DEG_TO_RAD;\n\n      pos += vec3(cos(xRad) * model[3][2] * positionAmount ,\n        sin(xRad) * model[3][2] * positionAmount ,\n        0.);\n\n      pos = rotateX(xRad) * pos;\n      pos = rotateY(yRad) * pos;\n      pos = rotateZ(zRad) * pos;\n      norm = rotateX(xRad) * norm;\n      norm = rotateY(yRad) * norm;\n      norm = rotateZ(zRad) * norm;\n\n      vPosition = pos;\n      vNormal = norm;\n      //vec4 pixelate = texture2D( texture, vTextureCoord );\n      //pos.xyz += norm * (length(pixelate.rgb) * 1.);\n\n      vec3 ambient = ambientLightAmount * color;\n      float cosTheta = dot(vNormal, lightDir);\n      vec3 diffuse = diffuseLightAmount * color * clamp(cosTheta , 0., 1.0 );\n      vColor = ( (vNormal)/2. - 0.4 ) + ambient + diffuse;\n      //vColor = vec3(am)\n\n      gl_Position = projection * view * model * vec4(pos, 1);\n    }\n    ",n.FRAG="\n    precision lowp float;\n\n    varying vec2    vTextureCoord;\n    varying vec3 vColor;\n    varying vec3 vNormal;\n    varying vec3 vPosition;\n    uniform float ambientLightAmount;\n    uniform float diffuseLightAmount;\n\n    uniform vec3 lightDir;\n    uniform sampler2D texture;\n\n\n    uniform vec3 color;\n\n\n    void main () {\n      //vec4 pixelate = texture2D( texture, vTextureCoord );\n      //vec3 ambient = ambientLightAmount * color;\n\n      //float cosTheta = dot(vNormal, lightDir);\n      //vec3 diffuse = diffuseLightAmount * color * clamp(cosTheta , 0.0, 1.0 );\n      //gl_FragColor = vec4((ambient + diffuse), 1.0);\n\n      gl_FragColor = vec4(vColor, 1.);\n      //gl_FragColor = vec4(pixelate.rgb+(vNormal*0.2)+ambient + diffuse, 1.);\n    }\n    "},{}],299:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("./quad")),o=r(t("./chevron")),a=r(t("./sphere")),s=r(t("./capsule")),u=r(t("./torus")),l=r(t("./box")),c=r(t("./arc"));n.default=function(t){return{sphere:(0,a.default)(t),quad:(0,i.default)(t),capsule:(0,s.default)(t),chevron:(0,o.default)(t),torus:(0,u.default)(t),arc:(0,c.default)(t),box:(0,l.default)(t)}}},{"./arc":293,"./box":295,"./capsule":296,"./chevron":297,"./quad":300,"./sphere":301,"./torus":302}],300:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});t("../common/common");var r=t("./base");t("./glsl"),t("gl-matrix");n.default=(e=>{const n=t("primitive-quad")();let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"gl-matrix":170,"primitive-quad":206}],301:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t&&t.__esModule}(t("angle-normals"));var r=t("./base");t("./glsl"),t("../common/common"),t("gl-matrix");n.default=(e=>{const n=t("primitive-icosphere")(1,{subdivisions:2});let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"angle-normals":1,"gl-matrix":170,"primitive-icosphere":202}],302:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});(function(t){t&&t.__esModule})(t("angle-normals")),t("./glsl");var r=t("./base");t("../common/common"),t("gl-matrix");n.default=(e=>{const n=t("primitive-torus")(r.torusSettings);let i=class extends r.BaseMesh{constructor(t,e){super(t,e)}};return i.prototype.draw=e((0,r.reglGeo)(e,n)),{create:function(t){return new i(n,t)}}})},{"../common/common":281,"./base":294,"./glsl":298,"angle-normals":1,"gl-matrix":170,"primitive-torus":207}],303:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./pubsub");n.default=(t=>{if(t.on&&t.off)return t;const e=new r.PubSub,n=new Proxy(t,{get:(t,r)=>{if(r in t){if(t.constructor===Array){let i=n;"pop"===r?i=t[t.length-1]:"shift"===r&&(i=t[0]),"push"!==r&&"length"!==r&&e.fire(r,i)}return t[r]}return"on"===r?e.on.bind(e):"once"===r?e.once.bind(e):"off"===r?e.off.bind(e):void 0},set:(t,n,r)=>(t.constructor===Array?"length"!==n&&e.fire("change",r):e.has(n)&&e.fire(n,r,t[n]),t[n]=r,!0)});return n})},{"./pubsub":304}],304:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.PubSub=class{constructor(){this.fns={any:[]}}has(t){return t in this.fns&&this.fns[t].length>0||this.fns.any.length>0}on(t,e){return t in this.fns==!1&&(this.fns[t]=[]),this.fns[t].push(e),e}fire(t,e,n){return this.fns.any.concat(t in this.fns?this.fns[t]:[]).forEach(r=>r(e,n,t)),this}off(t){for(const e in this.fns){const n=this.fns[e];for(let e=0;e<n.length;e++)if(n[e]===t)return n.splice(e,1),!0}return!1}once(t,e){const n=(t,r,i)=>{e(t,r,i),this.off(n)};return this.on(t,n),e}}},{}]},{},[292]);
